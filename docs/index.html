<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğ— ğ—”ğ—« _ğ—¢ğ—¦ _ [vÂ¹â€¤â°â€¤â°]</title>
    <!-- Favicon - ä½¿ç”¨ä¸€ä¸ªç®€å•çš„SVGä½œä¸ºç¤ºä¾‹ -->
    <link rel="icon" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16'><text x='0' y='14' font-size='16'>ğŸŒŒ</text></svg>\" type="image/svg+xml">
    <!-- å¼•å…¥ Tailwind CSS CDNï¼Œç”¨äºå¿«é€Ÿæ„å»ºå’Œå“åº”å¼å¸ƒå±€ -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- å¼•å…¥ Google Fonts - Inter å­—ä½“ä½œä¸ºé€šç”¨å­—ä½“ï¼Œå¦‚æœéœ€è¦ 'Chocolate Classical Sans'ï¼Œè¯·åœ¨æ­¤å¤„å¼•å…¥å…¶ CDN æˆ–æœ¬åœ°è·¯å¾„ -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700&display=swap" rel="stylesheet">
    <!-- Marked.js ç”¨äº Markdown è§£æ -->
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <style>
        /* å…¨å±€æ ·å¼å’Œå˜é‡ï¼Œé’ˆå¯¹ Frutiger Aeroï¼ˆå¢å¼ºç‰ˆï¼‰ä¼˜åŒ– */
        :root {
            /* æ ¸å¿ƒè“è‰²è°ƒè‰²æ¿ - è°ƒæ•´ä»¥åŒ¹é…å‚è€ƒå›¾ç‰‡çš„é«˜é¥±å’Œè“è‰² */
            --primary-blue: #00BFFF; /* æ˜äº®çš„å¤©ç©ºè“ï¼Œç”¨äºé«˜å…‰å’Œæ¿€æ´»çŠ¶æ€ */
            --dark-blue: #008CFF; /* æ·±è“è‰²ï¼ŒBLUEå€¼æ›´é«˜ */
            --light-blue: #E0F5FF; /* éå¸¸æµ…çš„è“è‰²ï¼ŒBLUEå€¼æ›´é«˜ */
            --mid-blue: #55B4FF; /* æ–°å¢çš„ä¸­é—´è“è‰²ï¼ŒBLUEå€¼æ›´é«˜ */
            --accent-glow-blue: #A3D9FF; /* æ›´ç»†è…»ã€é€šé€çš„è“è‰²å…‰æ™•ï¼ŒBLUEå€¼æ›´é«˜ */

            /* Glassmorphism & ç»ç’ƒè´¨æ„Ÿä¸åŠé€æ˜ - å¢å¼ºçœŸå® Aero æ•ˆæœ */
            --glass-border-light: rgba(0, 204, 255, 0.9); /* æ›´æ”¹ä¸ºä¸»è“è‰²ï¼Œå¢åŠ ä¸é€æ˜åº¦ï¼ŒBLUEå€¼æ›´é«˜ */
            --glass-border-dark: rgba(0, 140, 255, 0.9); /* æ›´æ”¹ä¸ºæ·±è“è‰²ï¼Œå¢åŠ ä¸é€æ˜åº¦ï¼ŒBLUEå€¼æ›´é«˜ */
            --glass-bg: rgba(255, 255, 255, 0.1); /* æ›´åŠ ç»†è…»çš„ç™½è‰²èƒŒæ™¯ï¼Œç•¥å¾®ä¸é€æ˜ */
            --glass-overlay-light: rgba(255, 255, 255, 0.3); /* å†…éƒ¨å…ƒç´ çš„æ›´äº®è¦†ç›–å±‚ï¼Œç•¥å¾®ä¸é€æ˜ */
            --glass-overlay-dark: rgba(0, 0, 0, 0.15); /* å¾®å¦™çš„é»‘è‰²è¦†ç›–å±‚ï¼Œç”¨äºæ·±åº¦æ•ˆæœ */

            /* èƒŒæ™¯ - åæ˜ å›¾ç‰‡çš„é²œæ˜ä¸”ç•¥æš—çš„æ°›å›´ */
            --background-dark: #0A102A; /* æ›´æ·±çš„ã€ç•¥å¸¦è“è‰²çš„èƒŒæ™¯ */
            
            /* è°ƒæ•´é€šç”¨æ–‡æœ¬é¢œè‰²ä¸ºæ›´æ·±ã€æ›´æ¸…æ™°çš„è“è‰² */
            --text-color: #005A9C; 
            --content-text-blue: #004F90; /* ç”¨äºçª—å£å†…å®¹å†…éƒ¨çš„æ·±è“è‰²æ–‡æœ¬ */

            /* å­—ä½“ - ä¿æŒ Inter ä½œä¸ºå¤‡é€‰ï¼Œä¼˜å…ˆä½¿ç”¨ç»å…¸ Aero é£æ ¼å­—ä½“ï¼ˆå¦‚æœ‰ï¼‰ */
            --font-main: 'Inter', sans-serif; /* é»˜è®¤ä½¿ç”¨ Inter å­—ä½“ */

            /* Frutiger Aero ä¸“å±æ¸å˜ - æ›´å¤æ‚å’Œç»†è…» */
            /* ç»Ÿä¸€çš„è“è‰²æ¸å˜å˜é‡ */
            --fa-blue-gradient-strong-start: rgba(0, 204, 255, 0.9); /* å¼ºçš„æ´»åŠ¨è“è‰²ï¼ŒBLUEå€¼æ›´é«˜ */
            --fa-blue-gradient-strong-end: rgba(0, 140, 255, 0.9); /* å¼ºçš„æ´»åŠ¨æ·±è“ï¼ŒBLUEå€¼æ›´é«˜ */
            --fa-blue-gradient-medium-start: rgba(0, 204, 255, 0.6); /* ä¸­ç­‰å¼ºåº¦çš„è“è‰²ï¼ŒBLUEå€¼æ›´é«˜ */
            --fa-blue-gradient-medium-end: rgba(0, 140, 255, 0.6); /* ä¸­ç­‰å¼ºåº¦çš„æ·±è“ï¼ŒBLUEå€¼æ›´é«˜ */
            --fa-blue-gradient-translucent-start: rgba(0, 204, 255, 0.5); /* åŠé€æ˜è“è‰²ï¼ŒBLUEå€¼æ›´é«˜ */
            --fa-blue-gradient-translucent-end: rgba(0, 140, 255, 0.5); /* åŠé€æ˜æ·±è“ï¼ŒBLUEå€¼æ›´é«˜ */

            --fa-title-active-gradient: linear-gradient(to bottom, var(--fa-blue-gradient-strong-start) 0%, var(--fa-blue-gradient-strong-end) 100%); /* æ›´äº®çš„æ¿€æ´»æ ‡é¢˜æ æ¸å˜ */
            --fa-title-inactive-gradient: linear-gradient(to bottom, var(--fa-blue-gradient-medium-start) 0%, var(--fa-blue-gradient-medium-end) 100%); /* æ›´æŸ”å’Œçš„éæ¿€æ´»æ ‡é¢˜æ æ¸å˜ */
            
            --fa-button-bg: linear-gradient(to bottom, rgba(255,255,255,0.4) 0%, rgba(255,255,255,0.1) 100%); /* æ›´æ˜æ˜¾çš„æŒ‰é’®åŸºç¡€æ¸å˜ */
            --fa-button-hover-bg: linear-gradient(to bottom, rgba(255,255,255,0.5) 0%, rgba(255,255,255,0.2) 100%); /* æ‚¬åœæ—¶æ›´äº® */
            --fa-button-active-bg: linear-gradient(to top, rgba(255,255,255,0.4) 0%, rgba(255,255,255,0.1) 100%); /* æŒ‰ä¸‹æ—¶çš„æ¸å˜æ•ˆæœ */
            
            /* æŒ‰é’®å’Œå…ƒç´ çš„å¢å¼ºå…‰æ³½æ•ˆæœ */
            --fa-gloss-effect: inset 0 1px 12px rgba(255, 255, 255, 0.7); /* æ›´å¼ºçš„å†…é«˜å…‰ */
            --fa-dark-gloss-effect: inset 0 -1px 8px rgba(0, 0, 0, 0.3); /* å¾®å¦™çš„å†…é˜´å½±ï¼Œç”¨äºæ·±åº¦æ•ˆæœ */

            /* é˜´å½±ä¸å…‰æ™• - å¢å¼º Aero è´¨æ„Ÿçš„å¼ºåº¦å’Œæ‰©æ•£ */
            --fa-shadow-soft: 0 4px 15px rgba(0, 0, 0, 0.3); /* ç•¥å¾®æŸ”å’Œçš„é˜´å½± */
            --fa-shadow-deep: 0 8px 20px rgba(0, 0, 0, 0.5); /* æ›´æ·±çš„é˜´å½±ï¼Œä½†æ‰©æ•£è¾ƒå°‘ */
            --fa-glow-blue: 0 0 16px rgba(0, 204, 255, 0.9); /* æ›´å¼ºçš„è“è‰²å…‰æ™•ï¼ŒåŒ¹é…çŠ¶æ€æ ï¼ŒBLUEå€¼æ›´é«˜ */
            --fa-inner-highlight: inset 0 1px 6px rgba(255, 255, 255, 0.3); /* å¾®å¦™çš„å†…é«˜å…‰ï¼Œç”¨äºå…‰æ³½æ•ˆæœ */
            --fa-inner-shadow: inset 0 -1px 3px rgba(0, 0, 0, 0.15); /* å†…é˜´å½±ï¼Œç”¨äºæ·±åº¦æ•ˆæœ */

            --taskbar-height: 48px; /* å®šä¹‰ä»»åŠ¡æ é«˜åº¦ */

            /* é¼ æ ‡æŒ‡é’ˆ - ç”± JavaScript åŠ¨æ€è®¾ç½® */
            --cursor-default: auto;
            --cursor-active: auto;
            --cursor-pointer: pointer;

            --desktop-image-url:  url('./assets/backgrounds/test_bg.jpg'); /* æ¡Œé¢èƒŒæ™¯å›¾ç‰‡çš„CSSå˜é‡ */
        }

        body {
            /* å…¨å±€å­—ä½“åº”ç”¨æ–°ä¸»å­—ä½“ */
            font-family: var(--font-main); 
            /* æ·±è‰²èƒŒæ™¯ */
            background-color: var(--background-dark); 
            /* æ–‡æœ¬é¢œè‰²è®¾ç½®ä¸ºæ›´æ·±çš„è“è‰² */
            color: var(--text-color); 
            margin: 0;
            padding: 0;
            overflow: hidden; /* é˜²æ­¢æ»šåŠ¨æ¡å‡ºç°ï¼Œæ¨¡æ‹Ÿæ¡Œé¢ç¯å¢ƒ */
            position: relative; /* ç”¨äºèƒŒæ™¯åŠ¨ç”»å®šä½ */
            width: 100vw; /* ç¡®ä¿ä¸»ä½“å æ»¡æ•´ä¸ªè§†å£å®½åº¦ */
            height: 100vh; /* ç¡®ä¿ä¸»ä½“å æ»¡æ•´ä¸ªè§†å£é«˜åº¦ */
            cursor: var(--cursor-default);
            display: flex; /* ä½¿ç”¨å¼¹æ€§ç›’å­å¸ƒå±€æ¡Œé¢å®¹å™¨ */
            flex-direction: column;
        }

        body:active {
            cursor: var(--cursor-active);
        }

        a, button, .clickable-element {
            cursor: var(--cursor-pointer);
        }

        /* Frutiger Aero é£æ ¼æ¡Œé¢èƒŒæ™¯ - å¤æ‚æ¸å˜å’Œç‰¹æ•ˆï¼ˆé»˜è®¤å›é€€ï¼‰ */
          .desktop-background {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            min-height: 100vh;
            /* ä½¿ç”¨å›¾ç‰‡ä½œä¸ºèƒŒæ™¯ï¼Œä¼˜å…ˆäºæ¸å˜ */
            background-image: var(--desktop-image-url);
            background-size: cover;
            background-position: center;
            opacity: 1; /* ä½¿ç”¨å›¾ç‰‡æ—¶å»ºè®®å…¨ä¸é€æ˜ */
            filter: none;
            z-index: -1;
        }
        .desktop-background::before,
        .desktop-background::after {
            display: none !important;
        }
        /* å½“èƒŒæ™¯å›¾ç‰‡æ¿€æ´»æ—¶ï¼Œéšè—ä¼ªå…ƒç´  */
        .desktop-background-image-active {
            background-image: var(--desktop-image-url) !important; /* è®¾ç½®å›¾ç‰‡å¹¶ç¡®ä¿å…¶è¦†ç›– */
            background-color: transparent !important; /* å…³é”®ï¼šç¡®ä¿åº•ä¸‹æ²¡æœ‰å®è‰² */
            opacity: 1 !important; /* ç¡®ä¿å®Œå…¨ä¸é€æ˜ */
            filter: none !important; /* æ— æ»¤é•œ */
        }
        .desktop-background-image-active::before,
        .desktop-background-image-active::after {
            display: none !important; /* ç¡®ä¿ä¼ªå…ƒç´ è¢«éšè— */
        }

        /* æ¨¡æ‹Ÿç»†å¾®å™ªç‚¹/é¢—ç²’çº¹ç† - Aero å¿…å¤‡ */
        .desktop-background::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAYAAAAGCAYAAADgzJ6OAAAAAXNSR0IArs4c6QAAABJJREFUGFdjYGBgYGJgaAgGAIAADoA7X0jYAAAAAElFTkSuQmCC"); /* å¾®å°å™ªç‚¹çº¹ç† */
            background-repeat: repeat;
            opacity: 0.08; /* ç¨å¾®æ˜æ˜¾ä¸€äº› */
            z-index: 1;
        }

        /* æ¨¡æ‹Ÿå…‰æ™•æ•ˆæœ - å¢å¼ºç‰ˆ */
        .desktop-background::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 100%;
            height: 100%;
            background: radial-gradient(circle at center, rgba(0,204,255,0.6) 0%, transparent 65%); /* æ›´å¼ºçš„ä¸­å¿ƒå…‰æ™•ï¼ŒBLUEå€¼æ›´é«˜ */
            transform: translate(-50%, -50%);
            animation: pulse-glow 12s infinite alternate; /* æ›´å¿«çš„å…‰æ™•è„‰å†²åŠ¨ç”» */
            z-index: 2; /* åœ¨å™ªç‚¹ä¸Šæ–¹ï¼Œåœ¨å†…å®¹ä¸‹æ–¹ */
        }

        /* å…‰æ™•è„‰å†²åŠ¨ç”» - è°ƒæ•´ */
        @keyframes pulse-glow {
            0% { transform: translate(-50%, -50%) scale(0.98); opacity: 0.4; }
            50% { transform: translate(-50%, -50%) scale(1.02); opacity: 0.6; }
            100% { transform: translate(-50%, -50%) scale(0.98); opacity: 0.4; }
        }

        /* æ¡Œé¢å®¹å™¨ï¼Œä½œä¸ºä¸»è¦å†…å®¹åŒ…è£…å™¨ */
        .desktop-container {
            position: relative; /* ç›¸å¯¹äºä¸»ä½“å®šä½ */
            flex-grow: 1; /* å æ»¡æ‰€æœ‰å¯ç”¨ç©ºé—´ */
            width: 100%;
            height: 100%;
            overflow: hidden;
            display: flex;
            flex-direction: column;
            z-index: 3; /* ç¡®ä¿åœ¨èƒŒæ™¯ç‰¹æ•ˆä¹‹ä¸Š */
        }

        /* æ¡Œé¢å¸ƒå±€ - åŒ…å«ä¸»æ¡Œé¢åŒºå’Œä»»åŠ¡æ  */
        .desktop-layout {
            display: flex;
            flex-direction: column;
            width: 100%;
            height: 100%;
        }

        /* ä¸»æ¡Œé¢åŒº - å›¾æ ‡å’Œçª—å£æ‰€åœ¨åŒºåŸŸ */
        .main-desktop-area {
            flex-grow: 1;
            position: relative;
            overflow: hidden; /* ç”¨äºçª—å£ */
            padding: 10px; /* æ¡Œé¢å›¾æ ‡çš„å†…è¾¹è· */
            padding-bottom: calc(10px + var(--taskbar-height)); /* ä»…è€ƒè™‘ä»»åŠ¡æ é«˜åº¦ */
        }

        /* ä»»åŠ¡æ ï¼ˆåŸDockï¼‰ */
        .taskbar {
            position: absolute;
            bottom: 0; /* å›ºå®šåœ¨åº•éƒ¨ */
            left: 0;
            width: 100%; /* å…¨å®½ */
            height: var(--taskbar-height); /* å›ºå®šé«˜åº¦ */
            /* èƒŒæ™¯å’Œè¾¹æ¡†è°ƒæ•´ä»¥åŒ¹é…çŠ¶æ€æ  */
            background: linear-gradient(to top, var(--fa-blue-gradient-translucent-start), var(--fa-blue-gradient-translucent-end)); /* åŒ¹é…çŠ¶æ€æ æ¸å˜ */
            backdrop-filter: blur(20px); /* æ›´å¼ºçš„æ¨¡ç³Šæ•ˆæœ */
            -webkit-backdrop-filter: blur(20px); /* Safari æ”¯æŒ */
            border-top: 1px solid var(--glass-border-light); /* æ–°è“è‰²è¾¹æ¡† */
            border-bottom: 1px solid var(--glass-border-dark); /* æ–°è“è‰²è¾¹æ¡† */
            box-shadow: 0 -6px 25px var(--fa-glow-blue), inset 0 2px 15px rgba(255, 255, 255, 0.4); /* æ›´æ˜æ˜¾çš„é˜´å½±å’Œå†…é«˜å…‰ */
            display: flex;
            align-items: center;
            justify-content: space-between; /* åœ¨å¼€å§‹æŒ‰é’®ã€å›¾æ ‡å’Œæ‰˜ç›˜ä¹‹é—´ç•™å‡ºç©ºé—´ */
            padding: 0 10px; /* ä¸¤ä¾§å†…è¾¹è· */
            z-index: 100; /* ç¡®ä¿ä»»åŠ¡æ å§‹ç»ˆåœ¨æœ€ä¸Šå±‚ */
            position: fixed; /* å›ºå®šä»»åŠ¡æ  */
        }

        /* å¼€å§‹æŒ‰é’® - é«˜åº¦ç»†è‡´çš„ Aero é£æ ¼ï¼Œç°åœ¨æ˜¯è“è‰²è°ƒ */
        .start-button {
            background: linear-gradient(to top, var(--fa-blue-gradient-translucent-start) 0%, var(--fa-blue-gradient-translucent-end) 100%); /* åŒ¹é…çŠ¶æ€æ çš„åŠé€æ˜æ¸å˜ */
            border: 2px solid rgba(255, 255, 255, 0.5); /* åŒ¹é…çŠ¶æ€æ çš„è¾¹æ¡† */
            border-radius: 50%; /* åœ†å½¢ */
            width: 48px; /* ç¨å¤§ä¸€äº› */
            height: 48px; /* ç¨å¤§ä¸€äº› */
            display: flex;
            align-items: center;
            justify-content: center;
            color: white; /* æ–‡æœ¬é¢œè‰²æ˜¾å¼ä¸ºç™½è‰² */
            font-size: 0.9rem;
            font-weight: bold;
            text-shadow: 0 0 10px rgba(255, 255, 255, 0.8); /* æ›´å¼ºçš„ç™½è‰²å…‰æ™• */
            box-shadow: inset 0 -2px 8px rgba(0,0,0,0.5), 0 6px 20px rgba(0,0,0,0.4); /* åŒ¹é…çŠ¶æ€æ çš„é˜´å½±ï¼Œè°ƒæ•´å¤–éƒ¨é˜´å½±ä»¥çªå‡º */
            cursor: pointer;
            transition: all 0.2s ease-in-out;
            white-space: nowrap;
            position: relative;
            overflow: hidden;
        }

        /* å¼€å§‹æŒ‰é’®å†…éƒ¨é«˜å…‰ */
        .start-button::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: radial-gradient(circle at top left, rgba(255,255,255,0.6) 0%, transparent 60%); /* å·¦ä¸Šè§’é«˜å…‰ */
            border-radius: 50%;
            opacity: 0.9;
            pointer-events: none;
        }
        .start-button::after {
            content: '';
            position: absolute;
            bottom: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle at center, var(--fa-blue-gradient-strong-start) 0%, transparent 70%); /* å¾®å¦™çš„è“è‰²å…‰æ™• */
            opacity: 0;
            transition: opacity 0.3s ease;
            pointer-events: none;
        }


        .start-button:hover {
            background: linear-gradient(to top, rgba(0, 204, 255, 0.7) 0%, rgba(0, 140, 255, 0.6) 100%); /* æ‚¬åœæ—¶ç¨å¾®æ›´ä¸é€æ˜ï¼ŒBLUEå€¼æ›´é«˜ */
            transform: translateY(-4px); /* æ›´æ˜æ˜¾çš„æŠ¬èµ·æ•ˆæœ */
            border-color: rgba(255, 255, 255, 0.7);
            box-shadow: inset 0 -2px 10px rgba(0,0,0,0.6), 0 8px 25px var(--fa-glow-blue);
        }
        .start-button:hover::after {
            opacity: 1; /* æ‚¬åœæ—¶æ˜¾ç¤ºå…‰æ™• */
        }

        .start-button:active {
            background: linear-gradient(to bottom, var(--fa-blue-gradient-translucent-start) 0%, var(--fa-blue-gradient-translucent-end) 100%); /* æŒ‰ä¸‹æ—¶åè½¬æ¸å˜ä»¥è·å¾—æŒ‰ä¸‹æ•ˆæœ */
            transform: translateY(0);
            box-shadow: inset 0 2px 10px rgba(0,0,0,0.7), inset 0 -2px 8px rgba(255,255,255,0.5);
            filter: brightness(0.9);
        }

        .start-button .icon-image { /* åŠ¨æ€åŠ è½½å›¾ç‰‡çš„å°ºå¯¸ */
            width: 2em; /* æ›´å¤§çš„å›¾æ ‡å°ºå¯¸ */
            height: 2em;
            filter: drop-shadow(0 0 10px rgba(255, 255, 255, 0.8)); /* æ›´å¼ºçš„æ–‡æœ¬é˜´å½±ç­‰æ•ˆäºå›¾åƒ */
        }

        /* ä»»åŠ¡æ å›¾æ ‡ï¼ˆæ‰“å¼€/æœ€å°åŒ–çª—å£ï¼‰ */
        .taskbar-icons-container {
            display: flex;
            flex-grow: 1;
            justify-content: flex-start;
            align-items: center;
            height: 100%;
            overflow-x: auto;
            padding: 0 10px;
            gap: 10px; /* ä»»åŠ¡æ é¡¹ç›®ä¹‹é—´çš„é—´è·æ›´å¤§ */
        }

        /* ç³»ç»Ÿæ‰˜ç›˜ */
        .system-tray {
            display: flex;
            align-items: center;
            gap: 12px; /* ç³»ç»Ÿå›¾æ ‡ä¹‹é—´çš„é—´è·æ›´å¤§ */
        }

        .system-tray-icon {
            font-size: 1.2rem; /* å›¾æ ‡å°ºå¯¸ç¨å¤§ */
            color: var(--text-color); /* è°ƒæ•´ä¸ºæ›´æ·±çš„è“è‰² */
            transition: all 0.2s ease;
            cursor: default;
            padding: 8px; /* ç¨å¾®å¤šä¸€ç‚¹å†…è¾¹è· */
            border-radius: 50%;
            box-shadow: 0 1px 5px rgba(0,0,0,0.3); /* å¾®å¦™çš„é˜´å½± */
        }
        .system-tray-icon:hover {
            color: white; /* æ‚¬åœæ—¶å˜ä¸ºç™½è‰² */
            background-color: rgba(255,255,255,0.25); /* æ›´æ˜æ˜¾çš„æ‚¬åœæ•ˆæœ */
            transform: translateY(-3px);
            box-shadow: 0 4px 12px rgba(0, 204, 255, 0.5); /* æ›´å¼ºçš„è“è‰²å…‰æ™•ï¼ŒBLUEå€¼æ›´é«˜ */
        }
        .system-tray-icon .icon-image { /* åŠ¨æ€åŠ è½½å›¾ç‰‡çš„å°ºå¯¸ */
            width: 1.2em;
            height: 1.2em;
            vertical-align: middle;
            filter: drop-shadow(0 0 8px rgba(0, 204, 255, 0.7)); /* æ›´æ˜æ˜¾çš„å…‰æ™•ï¼ŒBLUEå€¼æ›´é«˜ */
        }

        /* æ¡Œé¢å›¾æ ‡ï¼ˆå¿«æ·æ–¹å¼ï¼‰ */
        .desktop-icons-container {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: calc(100% - var(--taskbar-height));
            padding: 20px;
            z-index: 2;
        }

        .desktop-icon {
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
            width: 100px; /* ç¨å¾®å®½ä¸€äº›ï¼Œä»¥ä¾¿æ›´å¥½çš„é—´è· */
            cursor: pointer;
            transition: transform 0.15s ease, filter 0.15s ease;
            padding: 10px;
            border-radius: 15px;
            user-select: none;
            position: absolute;
        }

        .desktop-icon:hover {
            filter: brightness(1.1);
            background-color: transparent;
        }

        .desktop-icon:active {
            transform: scale(0.95);
            filter: brightness(0.9);
            background-color: transparent;
        }

        .desktop-icon .icon-image { /* åŠ¨æ€åŠ è½½å›¾ç‰‡çš„å°ºå¯¸ */
            width: 60px;
            height: 60px;
            filter: drop-shadow(0 4px 8px rgba(0,0,0,0.8));
            transition: filter 0.15s ease;
        }

        .desktop-icon:hover .icon-image {
            /* æ‚¬åœæ—¶ä¸ºå›¾æ ‡æœ¬èº«æ·»åŠ å…‰æ™• */
            filter: drop-shadow(0 0 8px var(--primary-blue))
                    drop-shadow(0 0 15px var(--accent-glow-blue))
                    drop-shadow(0 0 25px rgba(0, 204, 255, 0.4)); /* BLUEå€¼æ›´é«˜ */
        }

        .desktop-icon:active .icon-image {
            filter: drop-shadow(0 0 3px rgba(0,0,0,0.6));
        }

        .desktop-icon-label {
            font-size: 0.9rem;
            color: white;
            text-shadow: 1px 1px 4px rgba(0,0,0,0.9);
            margin-top: 10px;
            word-wrap: break-word;
            max-width: 100%;
        }

        /* å¼€å§‹èœå•æ ·å¼ - é«˜åº¦ç»ç’ƒè´¨æ„Ÿ */
        .start-menu {
            position: absolute;
            bottom: var(--taskbar-height);
            left: 10px;
            width: 380px;
            height: auto;
            max-height: calc(100% - var(--taskbar-height) - 40px);
            background: linear-gradient(to bottom right, rgba(0, 204, 255, 0.4), rgba(0, 140, 255, 0.3)); /* BLUEå€¼æ›´é«˜ */
            backdrop-filter: blur(28px);
            -webkit-backdrop-filter: blur(28px);
            border: 2px solid var(--glass-border-light);
            border-radius: 25px;
            box-shadow: 0 20px 60px var(--fa-glow-blue), inset 0 0 30px rgba(255, 255, 255, 0.5);
            padding: 20px;
            display: none;
            flex-direction: column;
            z-index: 100;
            transform-origin: bottom left;
            animation: fadeInScaleUpFromBottomLeft 0.3s ease-out forwards;
            overflow-y: auto;
        }

        .start-menu.hidden {
            display: none;
        }
        .start-menu.visible {
            display: flex;
        }

        /* å¼€å§‹èœå•å¤´éƒ¨ï¼ˆå¸¦ä¸ªäººä¿¡æ¯ï¼‰ - æ›´çªå‡ºï¼Œç°åœ¨æ˜¯è“è‰²è°ƒ */
        .start-menu-header {
            display: flex;
            align-items: center;
            padding: 15px;
            margin-bottom: 15px;
            background: linear-gradient(to right, var(--fa-blue-gradient-strong-start) 0%, var(--fa-blue-gradient-strong-end) 100%);
            border-radius: 18px;
            border: 1px solid var(--glass-border-light);
            box-shadow: inset 0 2px 8px rgba(0,0,0,0.5), inset 0 -1px 5px rgba(255,255,255,0.4);
            cursor: pointer;
            transition: all 0.2s ease;
            position: relative;
            overflow: hidden;
        }
        .start-menu-header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: radial-gradient(circle at top left, rgba(255,255,255,0.2) 0%, transparent 50%);
            border-radius: inherit;
            pointer-events: none;
        }
        .start-menu-header:hover {
            transform: translateX(8px);
            box-shadow: 0 8px 20px var(--fa-glow-blue), inset 0 2px 10px rgba(255,255,255,0.6);
            filter: brightness(1.2);
        }

        .start-menu-header span {
            color: white;
            font-size: 1.3rem;
            font-weight: bold;
            text-shadow: 0 0 10px rgba(255, 255, 255, 0.8);
        }

        /* å¼€å§‹èœå•æ¡ç›®æ ·å¼ - æ›´å…·äº¤äº’æ€§å’Œå…‰æ³½æ„Ÿ */
        .start-menu-item {
            padding: 15px 20px;
            display: flex;
            align-items: center;
            color: var(--text-color);
            text-decoration: none;
            transition: background-color 0.2s ease, transform 0.15s ease, filter 0.2s ease, box-shadow 0.2s ease;
            cursor: pointer;
            font-size: 1.05rem;
            font-weight: normal;
            border-radius: 12px;
            margin: 6px 0;
            position: relative;
            overflow: hidden;
            box-shadow: var(--fa-inner-highlight), var(--fa-dark-gloss-effect);
            border: 1px solid var(--glass-border-dark);
        }

        .start-menu-item::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.4), transparent);
            transition: left 0.5s ease;
        }

        .start-menu-item:hover::before {
            left: 100%;
        }

        .start-menu-item:hover {
            background: linear-gradient(to right, var(--fa-blue-gradient-strong-start) 0%, var(--fa-blue-gradient-strong-end) 100%);
            transform: translateX(10px);
            color: white;
            text-shadow: 0 0 12px rgba(255,255,255,1);
            filter: brightness(1.4);
            box-shadow: var(--fa-glow-blue), inset 0 0 10px rgba(0,0,0,0.5);
        }

        .start-menu-item .icon-image {
            margin-right: 18px;
            width: 1.5em;
            height: 1.5em;
            filter: drop-shadow(0 0 8px rgba(0, 204, 255, 0.8)); /* BLUEå€¼æ›´é«˜ */
            transition: filter 0.2s ease;
        }
        .start-menu-item:hover .icon-image {
            filter: brightness(2) drop-shadow(0 0 15px rgba(255,255,255,1));
        }
        
        .start-menu-item .menu-item-label {
            flex-grow: 1;
            text-align: left;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        /* å¼€å§‹èœå•åº•éƒ¨æŒ‰é’®å®¹å™¨ï¼ˆè®¾ç½®å’Œå…³æœºï¼‰ */
        .start-menu-buttons-container { 
            display: flex;
            flex-direction: row;
            justify-content: flex-end;
            gap: 15px;
            padding-top: 18px;
            margin-top: 18px;
            padding-right: 10px;
            border-top: 1px solid var(--glass-border-dark);
        }

        /* å¼€å§‹èœå•åº•éƒ¨å›¾æ ‡æŒ‰é’®çš„æ–°æ ·å¼ - æ›´æœå†»æ„Ÿ */
        .start-menu-footer-button {
            width: 58px;
            height: 58px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            background: linear-gradient(to top, var(--fa-blue-gradient-translucent-start) 0%, var(--fa-blue-gradient-translucent-end) 100%); /* åŒ¹é…çŠ¶æ€æ çš„åŠé€æ˜æ¸å˜ */
            border: 2px solid rgba(255, 255, 255, 0.5); /* åŒ¹é…çŠ¶æ€æ çš„è¾¹æ¡† */
            border-radius: 15px;
            cursor: pointer;
            transition: background-color 0.2s ease, transform 0.1s ease, box-shadow 0.2s ease;
            color: white;
            box-shadow: inset 0 -2px 8px rgba(0,0,0,0.5), 0 4px 15px rgba(0,0,0,0.4); /* åŒ¹é…çŠ¶æ€æ çš„é˜´å½±ï¼Œè°ƒæ•´å¤–éƒ¨é˜´å½±ä»¥çªå‡º */
            position: relative;
            overflow: hidden;
        }
        .start-menu-footer-button::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: radial-gradient(circle at top left, rgba(255,255,255,0.3) 0%, transparent 50%);
            border-radius: inherit;
            pointer-events: none;
        }

        .start-menu-footer-button:hover {
            background: linear-gradient(to top, rgba(0, 204, 255, 0.7) 0%, rgba(0, 140, 255, 0.6) 100%); /* BLUEå€¼æ›´é«˜ */
            transform: translateY(-4px);
            box-shadow: inset 0 -2px 10px rgba(0,0,0,0.6), 0 6px 20px var(--fa-glow-blue);
        }

        .start-menu-footer-button:active {
            transform: translateY(0);
            background: linear-gradient(to bottom, var(--fa-blue-gradient-translucent-start) 0%, var(--fa-blue-gradient-translucent-end) 100%);
            box-shadow: inset 0 2px 8px rgba(0,0,0,0.7), inset 0 -2px 6px rgba(255,255,255,0.5);
            filter: brightness(0.9);
        }

        .start-menu-footer-button .icon-image {
            width: 32px;
            height: 32px;
            filter: drop-shadow(0 0 8px rgba(255, 255, 255, 0.7));
        }

        /* åŠ¨ç”»ï¼šèœå•å‡ºç° - ä»å·¦ä¸‹è§’æ”¾å¤§æ·¡å…¥ */
        @keyframes fadeInScaleUpFromBottomLeft {
            from {
                opacity: 0;
                transform: scale(0.6);
            }
            to {
                opacity: 1;
                transform: scale(1);
            }
        }

        /* çª—å£æ ·å¼ï¼ˆä¿ç•™ç»ç’ƒè´¨æ„Ÿï¼‰ - Aero é‡ç‚¹ */
        .os-window {
            position: absolute;
            background: linear-gradient(to bottom right, rgba(0, 204, 255, 0.3), rgba(0, 140, 255, 0.2)); /* BLUEå€¼æ›´é«˜ */
            backdrop-filter: blur(35px);
            -webkit-backdrop-filter: blur(35px);
            /* ç»Ÿä¸€è¾¹æ¡†ï¼Œä½¿å…¶çœ‹èµ·æ¥åƒä¸€ä¸ªæ•´ä½“çš„ç»ç’ƒå— */
            border: 2px solid rgba(255, 255, 255, 0.4); 
            border-radius: 20px;
            box-shadow: 0 10px 40px var(--fa-glow-blue), inset 0 0 25px rgba(255, 255, 255, 0.4);
            display: flex;
            flex-direction: column;
            overflow: hidden;
            min-width: 400px;
            min-height: 300px;
            z-index: 5;
            animation: windowPopIn 0.3s ease-out forwards;
            resize: both;
        }

        .os-window.minimized {
            display: none;
        }

        .os-window.maximized {
            top: 0 !important;
            left: 0 !important;
            width: 100% !important;
            height: calc(100% - var(--taskbar-height)) !important;
            border-radius: 0;
            box-shadow: none;
            transition: all 0.3s ease-in-out;
            border: none;
        }

        /* çª—å£æ ‡é¢˜æ  - å¢å¼º Frutiger Aero é£æ ¼ */
        .os-window-title-bar {
            background: linear-gradient(to top, var(--fa-blue-gradient-translucent-start) 0%, var(--fa-blue-gradient-translucent-end) 100%); /* åŒ¹é…çŠ¶æ€æ çš„åŠé€æ˜æ¸å˜ */
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            padding: 10px 18px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: none; /* ç§»é™¤åº•éƒ¨è¾¹æ¡†ï¼Œä¸å†…å®¹åŒºæ— ç¼è¿æ¥ */
            cursor: grab;
            border-radius: 20px 20px 0 0; /* ä¸çª—å£é¡¶éƒ¨åœ†è§’ä¿æŒä¸€è‡´ */
            position: relative;
            font-size: 1.1rem;
            font-weight: bold;
            color: white;
            /* text-shadow: 0 1px 3px rgba(0,0,0,0.7); /* Original shadow */
            box-shadow: inset 0 -2px 8px rgba(0,0,0,0.5); /* åŒ¹é…çŠ¶æ€æ çš„é˜´å½± */
        }
        /* æ ‡é¢˜æ å†…éƒ¨ç»ç’ƒé«˜å…‰ */
        .os-window-title-bar::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(to bottom, rgba(255,255,255,0.15) 0%, transparent 60%); /* æ›´æ˜æ˜¾çš„å…‰æ³½ï¼Œç•¥å¾®ä¸é€æ˜ */
            pointer-events: none;
            border-radius: inherit;
        }

        .os-window-title-bar.inactive {
            background: linear-gradient(to top, rgba(0, 204, 255, 0.4) 0%, rgba(0, 140, 255, 0.3) 100%); /* ç¨å¾®æ›´æŸ”å’Œçš„éæ¿€æ´»æ¸å˜ï¼ŒBLUEå€¼æ›´é«˜ */
            border-bottom: none; /* ç¡®ä¿éæ´»è·ƒæ—¶ä¹Ÿæ²¡æœ‰åº•éƒ¨è¾¹æ¡† */
            box-shadow: inset 0 -1px 5px rgba(0,0,0,0.3);
        }
        .os-window-title-bar.inactive::after {
            background: linear-gradient(to bottom, rgba(255,255,255,0.08) 0%, transparent 60%); /* ç•¥å¾®ä¸é€æ˜ */
        }

        /* çª—å£æ ‡é¢˜å’ŒLogoå®¹å™¨ */
        .os-window-title-content {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .os-window-title-content .icon-image {
            width: 32px;
            height: 32px;
            filter: drop-shadow(0 0 8px rgba(255, 255, 255, 0.7)); /* ç™½è‰²å…‰æ™• */
        }

        .os-window-title {
            color: white;
            /* Added glow effect similar to status bar branding */
            text-shadow: 0 0 6px rgba(255, 255, 255, 0.8), /* White glow for readability, stronger */
                         0 0 12px rgba(0, 204, 255, 0.7), /* Blue glow, stronger and more blue */
                         0 0 25px rgba(0, 204, 255, 0.5); /* Wider blue glow, stronger and more blue */
        }

        /* çª—å£æ§åˆ¶æŒ‰é’®ï¼ˆæœ€å°åŒ–ã€æœ€å¤§åŒ–ã€å…³é—­ï¼‰ - æ›´å°æ›´çªå‡º */
        .os-window-controls {
            display: flex;
            gap: 6px;
        }

        .os-window-controls .control-button {
            width: 24px;
            height: 24px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.7em;
            color: white;
            cursor: pointer;
            transition: background-color 0.15s ease, transform 0.1s ease, box-shadow 0.15s ease;
            
            /* æ–°çš„é»˜è®¤æ ·å¼ï¼ŒåŒ¹é…çŠ¶æ€æ çš„åŠé€æ˜æ•ˆæœ */
            background: linear-gradient(to top, var(--fa-blue-gradient-translucent-start) 0%, var(--fa-blue-gradient-translucent-end) 100%); /* åŒ¹é…çŠ¶æ€æ  */
            border: 1px solid rgba(255, 255, 255, 0.5); /* åŒ¹é…çŠ¶æ€æ çš„è¾¹æ¡† */
            box-shadow: inset 0 -2px 8px rgba(0,0,0,0.5), 0 2px 6px rgba(0,0,0,0.3); /* åŒ¹é…çŠ¶æ€æ çš„é˜´å½±ï¼ŒåŠ ä¸Šä¸€äº›å¤–éƒ¨é˜´å½± */

            position: relative;
            overflow: hidden;
        }
        .os-window-controls .control-button::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: radial-gradient(circle at top left, rgba(255,255,255,0.4) 0%, transparent 60%);
            border-radius: 50%;
            opacity: 0.8;
            pointer-events: none;
        }

        /* æ‚¬åœ/æ¿€æ´»çŠ¶æ€ä¸‹çš„æŒ‰é’®é¢œè‰² */
        .os-window-controls .control-button:hover {
            transform: scale(1.1);
            filter: brightness(1.2);
            background: linear-gradient(to top, rgba(0, 204, 255, 0.7) 0%, rgba(0, 140, 255, 0.6) 100%); /* æ‚¬åœæ—¶ç¨å¾®æ›´ä¸é€æ˜ï¼ŒBLUEå€¼æ›´é«˜ */
            border-color: rgba(255, 255, 255, 0.7);
            box-shadow: inset 0 -2px 10px rgba(0,0,0,0.6), 0 4px 10px rgba(0,204,255,0.7); /* æ›´å¼ºçš„è“è‰²å…‰æ™•ï¼ŒBLUEå€¼æ›´é«˜ */
        }
        /* å…³é—­æŒ‰é’®çš„ç‰¹æ®Šæ‚¬åœæ•ˆæœï¼Œå¦‚æœéœ€è¦çº¢è‰² */
        .os-window-controls .control-button.close:hover {
             background: linear-gradient(to top, rgba(255,0,0,0.5) 0%, rgba(180,0,0,0.4) 100%);
             border-color: rgba(255,255,255,0.7);
             box-shadow: inset 0 -2px 10px rgba(0,0,0,0.6), 0 4px 10px rgba(255,0,0,0.6);
        }

        .os-window-controls .control-button:active {
            transform: scale(0.95);
            opacity: 1;
            background: linear-gradient(to bottom, rgba(0, 204, 255, 0.4) 0%, rgba(0, 140, 255, 0.3) 100%); /* æŒ‰ä¸‹æ—¶åè½¬æ¸å˜ä»¥è·å¾—æŒ‰ä¸‹æ•ˆæœï¼ŒBLUEå€¼æ›´é«˜ */
            box-shadow: inset 0 2px 8px rgba(0,0,0,0.7), inset 0 -1px 4px rgba(255,255,255,0.4);
            filter: brightness(0.9);
        }
        .os-window-controls .control-button .icon-image {
            width: 0.9em;
            height: 0.9em;
            filter: drop-shadow(0 0 8px rgba(255, 255, 255, 0.7)); /* ç™½è‰²å…‰æ™• */
        }

        /* çª—å£å†…å®¹åŒº - ç¾åŒ–ä¸æ–‡æœ¬é¢œè‰²è°ƒæ•´ */
        .os-window-content {
            flex-grow: 1;
            padding: 25px;
            /* è°ƒæ•´ä¸ºæ›´é€æ˜çš„ç™½è‰²èƒŒæ™¯ï¼Œå¹¶è®¾ç½®æ·±è“è‰²æ–‡æœ¬é¢œè‰² */
            background-color: rgba(255, 255, 255, 0.92); /* ç•¥å¾®ä¸é€æ˜ */
            color: var(--content-text-blue); 
            font-size: 1rem;
            line-height: 1.7;
            overflow: auto;
            border-radius: 0; 
            text-shadow: 0 0 0.5px rgba(0, 0, 0, 0.05); /* subtle shadow for overall content */
        }

        /* Markdownå†…å®¹åŒºä¸“å±æ ·å¼ - é’ˆå¯¹ Aero å¯è¯»æ€§ä¼˜åŒ– */
        .os-window-content .markdown-content h1 { font-size: 2.4em; margin-bottom: 0.7em; color: #111; border-bottom: 3px solid var(--primary-blue); padding-bottom: 0.5em; text-shadow: 0 0 2px rgba(0, 0, 0, 0.2); }
        .os-window-content .markdown-content h2 { font-size: 2em; margin-bottom: 0.6em; color: #222; text-shadow: 0 0 1px rgba(0, 0, 0, 0.1); }
        .os-window-content .markdown-content h3 { font-size: 1.6em; margin-bottom: 0.5em; color: #333; text-shadow: 0 0 1px rgba(0, 0, 0, 0.08); }
        .os-window-content .markdown-content p { margin-bottom: 1.4em; opacity: 1; color: var(--content-text-blue); text-shadow: 0 0 0.5px rgba(0, 0, 0, 0.03); }
        .os-window-content .markdown-content ul, .os-window-content .markdown-content ol { margin-left: 2.5em; margin-bottom: 1.4em; list-style-type: disc; opacity: 1; color: var(--content-text-blue); text-shadow: 0 0 0.5px rgba(0, 0, 0, 0.03); }
        .os-window-content .markdown-content li { margin-bottom: 0.8em; }
        .os-window-content .markdown-content strong { font-weight: bold; color: #111; text-shadow: 0 0 1px rgba(0, 0, 0, 0.1); }
        .os-window-content .markdown-content em { font-style: italic; opacity: 1; color: var(--content-text-blue); text-shadow: 0 0 0.5px rgba(0, 0, 0, 0.02); }
        .os-window-content .markdown-content a { 
            color: var(--dark-blue); /* è°ƒæ•´é“¾æ¥é¢œè‰²ï¼Œä½¿å…¶åœ¨äº®èƒŒæ™¯ä¸‹æ›´æ¸…æ™° */
            text-decoration: underline; 
            text-shadow: none; 
            transition: color 0.2s ease;
        }
        .os-window-content .markdown-content a:hover {
            color: var(--primary-blue); /* æ‚¬åœæ—¶é“¾æ¥é¢œè‰²å˜äº® */
        }
        .os-window-content .markdown-content code { background-color: #f0f0f0; padding: 0.3em 0.6em; border-radius: 8px; font-family: monospace; font-size: 0.95em; border: 1px solid #ddd; color: #333; text-shadow: none; }
        .os-window-content .markdown-content pre { background-color: #f5f5f5; padding: 1.5em; border-radius: 12px; overflow-x: auto; margin-bottom: 1.8em; border: 1px solid #eee; box-shadow: inset 0 0 5px rgba(0,0,0,0.1); color: #333; text-shadow: none; }
        .os-window-content .markdown-content blockquote { border-left: 8px solid var(--primary-blue); padding-left: 2em; margin-left: 0; opacity: 1; background-color: #f8f8f8; border-radius: 10px; padding-top: 1em; padding-bottom: 1em; color: #333; text-shadow: none; }


        /* çª—å£å¼¹å‡ºåŠ¨ç”» - æ›´ç»†è…» */
        @keyframes windowPopIn {
            from {
                opacity: 0;
                transform: scale(0.9) translateY(20px);
            }
            to {
                opacity: 1;
                transform: scale(1) translateY(0);
            }
        }

        /* ä½œå“é›†ç½‘æ ¼ä¸“å±æ ·å¼ */
        .works-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
            gap: 25px;
            padding: 20px;
        }

        .work-card {
            background: linear-gradient(to bottom, rgba(255, 255, 255, 0.18), rgba(255, 255, 255, 0.08)); /* ç•¥å¾®ä¸é€æ˜ */
            border: 2px solid var(--glass-border-light);
            border-bottom: 2px solid var(--glass-border-dark);
            border-right: 2px solid var(--glass-border-dark);
            border-radius: 20px;
            overflow: hidden;
            cursor: pointer;
            transition: all 0.25s ease-in-out, filter 0.25s ease, box-shadow 0.25s ease;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.6), inset 0 0 12px rgba(255,255,255,0.2);
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
            padding-bottom: 15px;
            position: relative;
            overflow: hidden;
        }
        .work-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: radial-gradient(circle at top left, rgba(255,255,255,0.18) 0%, transparent 55%); /* ç•¥å¾®ä¸é€æ˜ */
            border-radius: inherit;
            pointer-events: none;
        }


        .work-card:hover {
            transform: translateY(-10px) scale(1.05);
            box-shadow: 0 8px 25px var(--fa-glow-blue), inset 0 0 15px rgba(255,255,255,0.3);
            border-color: var(--primary-blue);
            filter: brightness(1.2);
            background: linear-gradient(to bottom, rgba(0, 204, 255, 0.3), rgba(0, 140, 255, 0.2)); /* BLUEå€¼æ›´é«˜ */
        }

        .work-card img {
            width: 100%;
            height: 180px;
            object-fit: cover;
            border-radius: 18px 18px 0 0;
            filter: brightness(0.95);
            transition: filter 0.2s ease;
        }

        .work-card:hover img {
            filter: brightness(1.2);
        }

        .work-card-title {
            font-size: 1.1rem;
            font-weight: bold;
            margin-top: 15px;
            color: white;
            text-shadow: 0 0 8px rgba(0,204,255,0.5); /* BLUEå€¼æ›´é«˜ */
        }

        .work-card-category {
            font-size: 0.9rem;
            color: var(--content-text-blue); /* è°ƒæ•´ä¸ºæ·±è“è‰² */
            opacity: 0.95;
            margin-top: 6px;
        }

        /* ä½œå“è¯¦æƒ…çª—å£ä¸“å±æ ·å¼ */
        .work-detail-content {
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .work-detail-content .gallery-main-image-container {
            position: relative;
            width: 100%;
            max-width: 700px;
            margin-bottom: 25px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.5);
            border-radius: 15px;
            overflow: hidden;
            border: 3px solid var(--glass-border-light);
        }

        .work-detail-content .gallery-main-image {
            width: 100%;
            height: auto;
            display: block;
            border-radius: 12px;
        }

        .work-detail-content .gallery-nav-button {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            background: rgba(0, 0, 0, 0.8);
            color: white;
            border: 2px solid rgba(255,255,255,0.6);
            padding: 15px;
            cursor: pointer;
            font-size: 2rem;
            border-radius: 50%;
            transition: background-color 0.25s ease, filter 0.25s ease, box-shadow 0.25s ease;
            z-index: 2;
            box-shadow: 0 6px 15px rgba(0,0,0,0.6);
        }

        .work-detail-content .gallery-nav-button:hover {
            background: rgba(0, 0, 0, 0.95);
            filter: brightness(1.4);
            box-shadow: 0 8px 20px rgba(0,0,0,0.8);
        }
        .work-detail-content .gallery-nav-button .icon-image {
            width: 2em;
            height: 2em;
            filter: drop-shadow(0 0 8px rgba(0, 204, 255, 0.7)); /* BLUEå€¼æ›´é«˜ */
        }

        .work-detail-content .gallery-nav-button.prev {
            left: 20px;
        }

        .work-detail-content .gallery-nav-button.next {
            right: 20px;
        }

        .work-detail-content .gallery-thumbnails {
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            gap: 15px;
            margin-top: 20px;
            margin-bottom: 25px;
        }

        .work-detail-content .gallery-thumbnail {
            width: 100px;
            height: 80px;
            object-fit: cover;
            border-radius: 10px;
            border: 3px solid transparent;
            cursor: pointer;
            transition: border-color 0.25s ease, transform 0.15s ease, filter 0.25s ease, box-shadow 0.25s ease;
            box-shadow: 0 4px 12px rgba(0,0,0,0.4);
        }

        .work-detail-content .gallery-thumbnail.active {
            border-color: var(--primary-blue);
            transform: scale(1.15);
            box-shadow: 0 0 20px var(--fa-glow-blue);
        }
        .work-detail-content .gallery-thumbnail:hover {
            filter: brightness(1.2);
            box-shadow: 0 0 12px var(--fa-glow-blue);
        }

        .work-detail-content h3 {
            font-size: 2rem;
            font-weight: bold;
            color: white;
            margin-bottom: 15px;
            text-align: center;
            text-shadow: 0 0 10px rgba(0,204,255,0.7); /* BLUEå€¼æ›´é«˜ */
        }
        .work-detail-content p {
            margin-bottom: 15px;
            text-align: justify;
            font-size: 1rem;
            color: var(--content-text-blue); /* è°ƒæ•´ä¸ºæ·±è“è‰² */
        }
        .work-detail-content .category-tag {
            display: inline-block;
            background-color: rgba(0, 204, 255, 0.6); /* BLUEå€¼æ›´é«˜ */
            border: 1px solid var(--primary-blue);
            border-radius: 10px;
            padding: 6px 12px;
            font-size: 0.9rem;
            color: white;
            margin-top: 15px;
            text-shadow: 0 0 5px rgba(0,0,0,0.6);
            box-shadow: inset 0 0 8px rgba(255,255,255,0.2);
        }
        .service-category-card {
            background: linear-gradient(to bottom, rgba(255, 255, 255, 0.18), rgba(255, 255, 255, 0.08)); /* ç•¥å¾®ä¸é€æ˜ */
            border: 2px solid var(--glass-border-light);
            border-bottom: 2px solid var(--glass-border-dark);
            border-right: 2px solid var(--glass-border-dark);
            border-radius: 15px;
            overflow: hidden;
            cursor: pointer;
            transition: all 0.25s ease-in-out, filter 0.25s ease, box-shadow 0.25s ease;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.5), inset 0 0 10px rgba(255,255,255,0.2);
            padding: 20px;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            min-height: 120px;
            position: relative;
            overflow: hidden;
        }
        .service-category-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: radial-gradient(circle at top left, rgba(255,255,255,0.2) 0%, transparent 60%);
            border-radius: inherit;
            pointer-events: none;
        }
        .service-category-card:hover {
            transform: translateY(-8px) scale(1.03);
            box-shadow: 0 10px 25px var(--fa-glow-blue), inset 0 0 12px rgba(255,255,255,0.3);
            border-color: var(--primary-blue);
            filter: brightness(1.2);
            background: linear-gradient(to right, rgba(0, 204, 255, 0.4), rgba(0, 140, 255, 0.3)); /* BLUEå€¼æ›´é«˜ */
        }

        /* ä»»åŠ¡æ æœ€å°åŒ–çª—å£å›¾æ ‡ - æ›´ç»ç’ƒè´¨æ„Ÿ */
        .taskbar-minimized-icon {
            background: linear-gradient(to top, var(--fa-blue-gradient-translucent-start), var(--fa-blue-gradient-translucent-end));
            border: 1px solid rgba(255, 255, 255, 0.5); /* åŒ¹é…çŠ¶æ€æ çš„è¾¹æ¡† */
            border-radius: 12px;
            padding: 8px 12px;
            margin: 0 5px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 8px;
            color: white;
            font-size: 0.9rem;
            box-shadow: inset 0 -2px 8px rgba(0,0,0,0.5), 0 2px 8px rgba(0,0,0,0.3); /* åŒ¹é…çŠ¶æ€æ çš„é˜´å½± */
            transition: all 0.25s ease;
            white-space: nowrap;
            max-width: 160px;
            overflow: hidden;
            text-overflow: ellipsis;
            position: relative;
            overflow: hidden;
        }
        .taskbar-minimized-icon::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: radial-gradient(circle at top left, rgba(255,255,255,0.4) 0%, transparent 60%);
            border-radius: inherit;
            pointer-events: none;
        }


        .taskbar-minimized-icon:hover {
            background: linear-gradient(to top, rgba(0, 204, 255, 0.7) 0%, rgba(0, 140, 255, 0.6) 100%); /* BLUEå€¼æ›´é«˜ */
            transform: translateY(-4px);
            box-shadow: inset 0 -2px 10px rgba(0,0,0,0.6), 0 4px 15px rgba(0,0,0,0.5);
        }

        /* æ¿€æ´»çŠ¶æ€ä¸‹çš„ä»»åŠ¡æ å›¾æ ‡æ ·å¼ */
        .taskbar-minimized-icon.active {
            background: linear-gradient(to bottom, rgba(0, 204, 255, 0.7) 0%, rgba(0, 140, 255, 0.6) 100%); /* BLUEå€¼æ›´é«˜ */
            border-color: rgba(255, 255, 255, 0.7);
            box-shadow: inset 0 2px 8px rgba(0,0,0,0.7), 0 0 12px var(--primary-blue);
            transform: translateY(0);
        }
        .taskbar-minimized-icon.active::before {
            background: radial-gradient(circle at top left, rgba(255,255,255,0.5) 0%, transparent 60%);
        }


        .taskbar-minimized-icon .icon-image {
            width: 1.2em;
            height: 1.2em;
            filter: drop-shadow(0 0 8px rgba(0, 204, 255, 0.8)); /* BLUEå€¼æ›´é«˜ */
            transition: filter 0.2s ease;
        }
        .taskbar-minimized-icon.active .icon-image {
            filter: brightness(2) drop-shadow(0 0 12px rgba(255,255,255,1));
        }

        /* åŠ è½½åŠ¨ç”»æ ·å¼ */
        .loading-spinner {
            border: 5px solid rgba(255, 255, 255, 0.4);
            border-top: 5px solid var(--primary-blue);
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 0.8s linear infinite;
            margin: 25px auto;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* è¯­è¨€é€‰æ‹©å­èœå• */
        .start-menu-submenu {
            position: absolute;
            left: 100%;
            top: 0;
            width: 250px;
            background: linear-gradient(to bottom right, rgba(0, 204, 255, 0.45), rgba(0, 140, 255, 0.35)); /* BLUEå€¼æ›´é«˜ */
            backdrop-filter: blur(28px);
            -webkit-backdrop-filter: blur(28px);
            border: 2px solid var(--glass-border-light);
            border-radius: 20px;
            box-shadow: 0 10px 40px var(--fa-glow-blue), inset 0 0 20px rgba(255, 255, 255, 0.4);
            padding: 15px;
            display: none;
            flex-direction: column;
            z-index: 101;
        }
        .start-menu-item.has-submenu:hover .start-menu-submenu {
            display: flex;
        }

        /* å¼€å…³æ ·å¼ - æ›´ Aero é£æ ¼ */
        .toggle-switch {
            position: relative;
            display: inline-block;
            width: 70px;
            height: 40px;
        }

        .toggle-switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }

        .toggle-slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #909090;
            -webkit-transition: .4s;
            transition: .4s;
            border-radius: 40px;
            box-shadow: inset 0 0 6px rgba(0,0,0,0.5);
            border: 2px solid rgba(255,255,255,0.4);
        }

        .toggle-slider:before {
            position: absolute;
            content: "";
            height: 32px;
            width: 32px;
            left: 4px;
            bottom: 4px;
            background: linear-gradient(to bottom, #FFFFFF 0%, #F0F0F0 100%);
            -webkit-transition: .4s;
            transition: .4s;
            border-radius: 50%;
            box-shadow: 0 3px 8px rgba(0,0,0,0.4), inset 0 1px 4px rgba(255,255,255,0.5);
        }

        input:checked + .toggle-slider {
            background: linear-gradient(to right, var(--primary-blue) 0%, var(--mid-blue) 100%);
            border-color: var(--dark-blue);
        }

        input:focus + .toggle-slider {
            box-shadow: 0 0 1px var(--primary-blue), inset 0 0 8px rgba(0,0,0,0.5);
        }

        input:checked + .toggle-slider:before {
            -webkit-transform: translateX(30px);
            -ms-transform: translateX(30px);
            transform: translateX(30px);
        }

        /* åœ†å½¢æ»‘å— */
        .toggle-slider.round {
            border-radius: 40px;
        }

        .toggle-slider.round:before {
            border-radius: 50%;
        }

        /* è‡ªå®šä¹‰æ»šåŠ¨æ¡æ ·å¼ï¼ˆWebkitæµè§ˆå™¨å¦‚Chrome/Safariï¼‰ */
        /* æ»šåŠ¨æ¡è½¨é“ */
        ::-webkit-scrollbar {
            width: 20px;
        }

        /* æ»šåŠ¨æ¡æ»‘å— */
        ::-webkit-scrollbar-thumb {
            background: linear-gradient(to bottom, rgba(0, 204, 255, 0.95), rgba(0, 140, 255, 0.95)); /* BLUEå€¼æ›´é«˜ */
            border-radius: 15px;
            border: 4px solid rgba(255, 255, 255, 0.5);
            transition: background 0.2s ease, box-shadow 0.2s ease;
            box-shadow: inset 0 0 10px rgba(255,255,255,0.3);
        }

        /* æ»‘å—æ‚¬åœæ—¶ */
        ::-webkit-scrollbar-thumb:hover {
            background: linear-gradient(to bottom, rgba(0, 204, 255, 1), rgba(0, 140, 255, 1)); /* BLUEå€¼æ›´é«˜ */
            box-shadow: inset 0 0 12px rgba(255,255,255,0.4), 0 0 20px rgba(0,204,255,0.9); /* BLUEå€¼æ›´é«˜ */
        }

        /* è½¨é“èƒŒæ™¯ */
        ::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.18); /* ç•¥å¾®ä¸é€æ˜ */
            border-radius: 15px;
        }

        /* æ»šåŠ¨æ¡æŒ‰é’®ï¼ˆç®­å¤´ï¼‰ - æ›´çªå‡ºæ›´å…‰æ³½ */
        ::-webkit-scrollbar-button {
            background: linear-gradient(to bottom, rgba(255,255,255,0.4) 0%, rgba(255,255,255,0.15) 100%);
            border-radius: 50%;
            height: 28px;
            width: 28px;
            display: block;
            border: 2px solid rgba(255, 255, 255, 0.8);
            box-shadow: inset 0 2px 8px rgba(255,255,255,0.9), 0 2px 10px rgba(0,0,0,0.7);
            transition: background-color 0.15s ease, transform 0.08s ease, box-shadow 0.15s ease;
        }

        ::-webkit-scrollbar-button:hover {
            background: linear-gradient(to bottom, rgba(255,255,255,0.5) 0%, rgba(255,255,255,0.2) 100%);
            transform: scale(1.15);
            filter: brightness(1.3);
            box-shadow: inset 0 2px 10px rgba(255,255,255,1), 0 4px 15px rgba(0,0,0,0.8);
        }

        ::-webkit-scrollbar-button:active {
            background: linear-gradient(to top, rgba(255,255,255,0.4) 0%, rgba(255,255,255,0.15) 100%);
            transform: scale(0.9);
            opacity: 1;
            box-shadow: inset 0 0 10px rgba(0,0,0,0.9), inset 0 -2px 8px rgba(255,255,255,0.7);
            filter: brightness(0.8);
        }

        /* Firefoxæ»šåŠ¨æ¡æ ·å¼ */
        html {
            scrollbar-width: thin;
            scrollbar-color: rgba(0, 204, 255, 0.95) rgba(255, 255, 255, 0.18); /* BLUEå€¼æ›´é«˜ */
        }

        /* --- ç§»åŠ¨ç«¯é€‚é… (max-width: 768px) --- */
        @media (max-width: 768px) {
            .os-window {
                min-width: 90vw; /* è°ƒæ•´æœ€å°å®½åº¦ */
                min-height: 50vh; /* è°ƒæ•´æœ€å°é«˜åº¦ */
                width: 95vw !important; /* å¼ºåˆ¶çª—å£å®½åº¦ä¸ºè§†å£å®½åº¦çš„95% */
                height: 80vh !important; /* å¼ºåˆ¶çª—å£é«˜åº¦ä¸ºè§†å£é«˜åº¦çš„80% */
                left: 2.5vw !important; /* å±…ä¸­ */
                top: 5vh !important; /* é¡¶éƒ¨ç•™ç™½ */
                transform: none !important; /* ç§»é™¤ä»»ä½•transformï¼Œç¡®ä¿ä½ç½®æ­£ç¡® */
                border-radius: 15px; /* ç§»åŠ¨ç«¯å¯ä»¥å°ä¸€ç‚¹çš„åœ†è§’ */
                box-shadow: 0 5px 20px rgba(0,0,0,0.5), inset 0 0 15px rgba(255,255,255,0.2);
            }

            .os-window.maximized {
                border-radius: 0; /* æœ€å¤§åŒ–æ—¶æ— åœ†è§’ */
            }

            .start-menu {
                width: 95vw; /* å¼€å§‹èœå•å æ®å¤§éƒ¨åˆ†å®½åº¦ */
                left: 2.5vw; /* å±…ä¸­ */
                padding: 15px; /* è°ƒæ•´å†…è¾¹è· */
                border-radius: 20px;
                max-height: calc(100% - var(--taskbar-height) - 20px); /* é€‚åº”ç§»åŠ¨ç«¯é«˜åº¦ */
            }

            .desktop-icon {
                width: 80px; /* å‡å°æ¡Œé¢å›¾æ ‡å®½åº¦ */
                padding: 5px;
            }

            .desktop-icon .icon-image {
                width: 50px; /* å‡å°å›¾æ ‡å›¾ç‰‡å°ºå¯¸ */
                height: 50px;
            }

            .desktop-icon-label {
                font-size: 0.8rem; /* å‡å°æ ‡ç­¾å­—ä½“å¤§å° */
                margin-top: 5px;
            }

            .taskbar {
                height: 44px; /* ä»»åŠ¡æ é«˜åº¦å¯ä»¥ç•¥å° */
            }

            .start-button {
                width: 40px; /* å¼€å§‹æŒ‰é’®ç•¥å° */
                height: 40px;
            }

            .start-button .icon-image {
                width: 1.8em;
                height: 1.8em;
            }

            .system-tray-icon {
                font-size: 1rem; /* ç³»ç»Ÿæ‰˜ç›˜å›¾æ ‡ç•¥å° */
                padding: 6px;
            }

            .system-tray-icon .icon-image {
                width: 1em;
                height: 1em;
            }

            #current-time {
                font-size: 0.8rem; /* æ—¶é—´å­—ä½“ç•¥å° */
            }

            .os-window-content {
                padding: 15px; /* çª—å£å†…å®¹åŒºå†…è¾¹è·è°ƒæ•´ */
            }

            .os-window-content .markdown-content h1 { font-size: 2em; }
            .os-window-content .markdown-content h2 { font-size: 1.8em; }
            .os-window-content .markdown-content h3 { font-size: 1.4em; }
            .os-window-content .markdown-content p { font-size: 0.95rem; }

            .works-grid {
                grid-template-columns: repeat(auto-fill, minmax(140px, 1f r)); /* ä½œå“é›†ç½‘æ ¼åˆ—æ•°è°ƒæ•´ */
                gap: 15px;
                padding: 10px;
            }

            .work-card img {
                height: 120px; /* ä½œå“å¡ç‰‡å›¾ç‰‡é«˜åº¦è°ƒæ•´ */
            }

            .work-card-title {
                font-size: 1rem;
            }
            .work-card-category {
                font-size: 0.8rem;
            }

            .work-detail-content .gallery-main-image-container {
                margin-bottom: 15px;
            }
            .work-detail-content .gallery-nav-button {
                font-size: 1.5rem; /* ç”»å»Šå¯¼èˆªæŒ‰é’®å°ºå¯¸è°ƒæ•´ */
                padding: 10px;
            }
            .work-detail-content .gallery-thumbnail {
                width: 80px; /* ç¼©ç•¥å›¾å°ºå¯¸è°ƒæ•´ */
                height: 60px;
            }
        }

        /* çª—å£çŠ¶æ€æ  */
        .os-window-status-bar {
            padding: 8px 18px;
            display: flex;
            justify-content: space-between; /* è°ƒæ•´ä¸ºä¸¤ç«¯å¯¹é½ */
            align-items: center;
            font-size: 0.85rem;
            background: linear-gradient(to bottom, rgba(0, 204, 255, 0.3), rgba(0, 140, 255, 0.2)); /* åŒ¹é…çª—å£çš„æŸ”å’Œæ¸å˜ï¼ŒBLUEå€¼æ›´é«˜ */
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border-top: 1px solid rgba(255, 255, 255, 0.3); /* è½»å¾®çš„é¡¶éƒ¨è¾¹æ¡† */
            border-radius: 0 0 20px 20px; /* ä¸çª—å£åº•éƒ¨åœ†è§’ä¿æŒä¸€è‡´ */
            color: var(--content-text-blue); /* ä½¿ç”¨å†…å®¹æ–‡æœ¬çš„æ·±è“è‰² */
            text-shadow: 0 0 0.5px rgba(0, 0, 0, 0.05);
            box-shadow: inset 0 1px 3px rgba(255, 255, 255, 0.1), inset 0 -1px 3px rgba(0, 0, 0, 0.1);
        }

        .os-window-status-bar .status-text {
            color: var(--content-text-blue); /* çŠ¶æ€æ–‡æœ¬é¢œè‰² */
            opacity: 0.9;
            font-weight: 500;
        }

        .os-window-status-bar .system-branding-text {
            color: white; /* å“ç‰Œæ–‡å­—ä¸ºç™½è‰²ï¼Œæ›´é†’ç›® */
            font-weight: bold;
            text-shadow: 0 0 6px rgba(255, 255, 255, 0.8); /* ç™½è‰²å…‰æ™•ï¼Œæ›´å¼º */
            opacity: 0.9;
        }
    </style>
</head>
<body>
    <!-- æ¡Œé¢èƒŒæ™¯å±‚ï¼Œç”¨äºåŠ¨æ€ Frutiger Aero é£æ ¼èƒŒæ™¯ -->
    <div class="desktop-background" id="desktop-background"></div>

    <!-- æ¡Œé¢å®¹å™¨ï¼Œæ¨¡æ‹Ÿå±å¹• -->
    <div class="desktop-container" id="desktop-container">
        <!-- æ¡Œé¢å¸ƒå±€ - åŒ…å«ä¸»æ¡Œé¢åŒºå’Œä»»åŠ¡æ  -->
        <div class="desktop-layout">
            <!-- ä¸»æ¡Œé¢åŒº - å›¾æ ‡å’Œçª—å£æ‰€åœ¨åŒºåŸŸ -->
            <div class="main-desktop-area" id="main-desktop-area">
                <!-- åˆå§‹æ¬¢è¿ä¿¡æ¯ï¼Œçª—å£æ‰“å¼€æ—¶éšè— -->
                <!-- ç§»é™¤æ¬¢è¿ä¿¡æ¯ -->
                
                <!-- æ¡Œé¢å›¾æ ‡ï¼ˆå¿«æ·æ–¹å¼ï¼‰ -->
                <div class="desktop-icons-container" id="desktop-icons-container">
                    <div class="desktop-icon" data-section="works" data-title-zh="æˆ‘çš„ä½œå“é›†" data-title-en="My Works">
                        <span class="icon-placeholder" data-asset-key="icon_works"></span>
                        <span class="desktop-icon-label" data-lang-key="worksIcon">ä½œå“é›†</span>
                    </div>
                    <div class="desktop-icon" data-section="characters" data-title-zh="è§’è‰²åº“" data-title-en="Characters">
                        <span class="icon-placeholder" data-asset-key="icon_characters"></span>
                        <span class="desktop-icon-label" data-lang-key="charactersIcon">è§’è‰²</span>
                    </div>
                    <!-- å…³äºæˆ‘å›¾æ ‡æ›´æ”¹ä¸º mazko.exe å’Œ M å›¾æ ‡ -->
                    <div class="desktop-icon" data-section="about" data-title-zh="å…³äº MAZKO" data-title-en="About MAZKO">
                        <span class="icon-placeholder" data-asset-key="icon_mazko_logo"></span>
                        <span class="desktop-icon-label" data-lang-key="mazkoExeIcon">MAZKO</span>
                    </div>
                    <div class="desktop-icon" data-section="services" data-title-zh="æœåŠ¡ä¸æŠ¥ä»·" data-title-en="Services & Pricing">
                        <span class="icon-placeholder" data-asset-key="icon_services"></span>
                        <span class="desktop-icon-label" data-lang-key="servicesIcon">æœåŠ¡</span>
                    </div>
                    <div class="desktop-icon" data-section="socials" data-title-zh="ç¤¾äº¤åª’ä½“" data-title-en="Social Media">
                        <span class="icon-placeholder" data-asset-key="icon_socials"></span>
                        <span class="desktop-icon-label" data-lang-key="socialsIcon">ç¤¾äº¤</span>
                    </div>
                    <!-- æ–°å¢çš„æ•°æ®æ ¸å¿ƒåº”ç”¨ç¨‹åºå›¾æ ‡ -->
                    <div class="desktop-icon" data-section="data-core" data-title-zh="æ•¸æ“šá•¼á£¯éˆŠ â¸¸ Dá´¬áµ€á´¬.Cá´¼á´¿á´± â˜" data-title-en="DATA.CORE">
                        <span class="icon-placeholder" data-asset-key="icon_datacore"></span>
                        <span class="desktop-icon-label" data-lang-key="datacoreIcon">æ•¸æ“šæ ¸å¿ƒ</span>
                    </div>
                </div>
                <!-- çª—å£å°†é€šè¿‡ JavaScript é™„åŠ åœ¨è¿™é‡Œ -->
            </div>

            <!-- å¼€å§‹èœå• -->
            <div id="start-menu" class="start-menu hidden">
                <div class="start-menu-header" data-section="about" data-title-zh="å…³äº MAZKO" data-title-en="About MAZKO"> <!-- ç‚¹å‡»å¤´éƒ¨æ‰“å¼€å…³äºæˆ‘ -->
                    <span class="icon-placeholder" data-asset-key="icon_mazko_logo"></span>
                    <span data-lang-key="profileName">MAZKO</span>
                </div>
                <a href="#" class="start-menu-item" data-section="works" data-lang-key="worksMenuItem" data-title-zh="æˆ‘çš„ä½œå“é›†" data-title-en="My Works">
                    <span class="icon-placeholder" data-asset-key="icon_works"></span>
                    <span class="menu-item-label"></span>
                </a>
                <a href="#" class="start-menu-item" data-section="characters" data-lang-key="charactersMenuItem" data-title-zh="è§’è‰²åº“" data-title-en="Characters">
                    <span class="icon-placeholder" data-asset-key="icon_characters"></span>
                    <span class="menu-item-label"></span>
                </a>
                <a href="#" class="start-menu-item" data-section="services" data-lang-key="servicesMenuItem" data-title-zh="æœåŠ¡ä¸æŠ¥ä»·" data-title-en="Services & Pricing">
                    <span class="icon-placeholder" data-asset-key="icon_services"></span>
                    <span class="menu-item-label"></span>
                </a>
                <a href="#" class="start-menu-item" data-section="socials" data-lang-key="socialsMenuItem" data-title-zh="ç¤¾äº¤åª’ä½“" data-title-en="Social Media">
                    <span class="icon-placeholder" data-asset-key="icon_socials"></span>
                    <span class="menu-item-label"></span>
                </a>
                <!-- æ–°å¢çš„æ•°æ®æ ¸å¿ƒåº”ç”¨ç¨‹åºèœå•é¡¹ -->
                <a href="#" class="start-menu-item" data-section="data-core" data-lang-key="datacoreMenuItem" data-title-zh="æ•¸æ“šá•¼á£¯éˆŠ â¸¸ Dá´¬áµ€á´¬.Cá´¼á´¿á´± â˜" data-title-en="DATA.CORE">
                    <span class="icon-placeholder" data-asset-key="icon_datacore"></span>
                    <span class="menu-item-label"></span>
                </a>
                <!-- ç§»é™¤æ°´å¹³åˆ†éš”çº¿ -->
                <!-- <div class="border-t border-gray-600 my-2 mx-4"></div> -->
                <!-- è®¾ç½®å’Œå…³æœºæŒ‰é’®åœ¨ä¸€ä¸ªå®¹å™¨ä¸­ï¼Œç°åœ¨ä½¿ç”¨ start-menu-footer-button ç±» -->
                <div class="start-menu-buttons-container">
                    <button class="start-menu-footer-button" data-section="settings" data-lang-key="settingsMenuItem" title="è®¾ç½®" data-title-zh="ç³»ç»Ÿè®¾ç½®" data-title-en="Settings">
                        <span class="icon-placeholder" data-asset-key="icon_settings"></span>
                        <!-- ç§»é™¤æ–‡æœ¬span -->
                    </button>
                    <button class="start-menu-footer-button" data-section="shutdown" data-lang-key="shutdownMenuItem" title="å…³é—­ç³»ç»Ÿ" data-title-zh="å…³é—­ç³»ç»Ÿ" data-title-en="Shutdown">
                        <span class="icon-placeholder" data-asset-key="icon_shutdown"></span>
                        <!-- ç§»é™¤æ–‡æœ¬span -->
                    </button>
                </div>
            </div>

            <!-- ä»»åŠ¡æ åº•éƒ¨ -->
            <div class="taskbar" id="taskbar">
                <!-- å¼€å§‹æŒ‰é’®æ›´æ”¹ä¸º M å›¾æ ‡ -->
                <button class="start-button" id="start-button-taskbar">
                    <span class="icon-placeholder" data-asset-key="icon_mazko_logo" id="start-button-icon-placeholder"></span>
                    <!-- <span data-lang-key="startButton">å¼€å§‹</span> ç§»é™¤æ–‡æœ¬ -->
                </button>

                <!-- ä»»åŠ¡æ å›¾æ ‡ï¼ˆæ‰“å¼€/æœ€å°åŒ–çª—å£ï¼‰ -->
                <div id="taskbar-icons" class="taskbar-icons-container">
                    <!-- æœ€å°åŒ–çª—å£å›¾æ ‡å°†é™„åŠ åœ¨è¿™é‡Œ -->
                </div>

                <!-- å³ä¾§ç³»ç»Ÿæ‰˜ç›˜ -->
                <div class="system-tray">
                    <div class="system-tray-icon">
                        <span class="icon-placeholder" data-asset-key="icon_wifi"></span>
                    </div>
                    <div class="system-tray-icon">
                        <span class="icon-placeholder" data-asset-key="icon_battery"></span>
                    </div>
                    <div class="system-tray-icon">
                        <span class="icon-placeholder" data-asset-key="icon_volume"></span>
                    </div>
                    <span class="text-sm text-white opacity-80" id="current-time"></span> <!-- æ—¶é—´æ˜¾ç¤ºï¼Œä¿æŒç™½è‰²ä»¥å¢å¼ºå¯¹æ¯” -->
                </div>
            </div>
        </div>
    </div>

    <script>
        console.log('è„šæœ¬å¼€å§‹è§£æã€‚'); // Added for debugging
        
        /**
         * @object ASSETS
         * @description æ‰€æœ‰å›¾ç‰‡å’Œå›¾æ ‡è·¯å¾„çš„é›†ä¸­ç®¡ç†ã€‚
         * æ‰€æœ‰èµ„äº§ç°åœ¨éƒ½ç»è¿‡Base64ç¼–ç ä»¥å®ç°è‡ªåŒ…å«ã€‚
         */
        const ASSETS = {
            // å…‰æ ‡å›¾åƒï¼ˆé»˜è®¤é»‘è‰²ç‚¹ï¼Œæ´»åŠ¨æ—¶åå­—ï¼ŒæŒ‡é’ˆæ—¶ç®­å¤´ï¼‰
            'cursor_default': 'data:image/svg+xml,%3Csvg width=\'16\' height=\'16\' viewBox=\'0 0 16 16\' fill=\'none\' xmlns=\'http://www.w3.org/2000/svg\'%3E%3Ccircle cx=\'8\' cy=\'8\' r=\'2\' fill=\'%23000000\'/%3E%3C/svg%3E',
            'cursor_active': 'data:image/svg+xml,%3Csvg width=\'16\' height=\'16\' viewBox=\'0 0 16 16\' fill=\'none\' xmlns=\'http://www.w3.org/2000/svg\'%3E%3Cpath d=\'M8 0V16M0 8H16\' stroke=\'%23000000\' stroke-width=\'2\'/%3E%3C/svg%3E',
            'cursor_pointer': 'data:image/svg+xml,%3Csvg width=\'16\' height=\'16\' viewBox=\'0 0 16 16\' fill=\'none\' xmlns=\'http://www.w3.org/2000/svg\'%3E%3Cpath d=\'M1 1L15 8L1 15V1L1 1Z\' fill=\'%23000000\' stroke=\'%23000000\' stroke-width=\'1\'/%3E%3C/svg%3E',

            // æ¡Œé¢å›¾æ ‡ / å¼€å§‹èœå•å›¾æ ‡ (ç®€å•çš„SVGå›¾æ ‡)
            'icon_works': 'data:image/svg+xml,%3Csvg width=\'64\' height=\'64\' viewBox=\'0 0 24 24\' fill=\'none\' xmlns=\'http://www.w3.org/2000/svg\'%3E%3Cpath d=\'M2 12V4C2 3.44772 2.44772 3 3 3H9L11 7H21C21.5523 7 22 7.44772 22 8V20C22 20.5523 21.5523 21 21 21H3C2.44772 21 2 20.5523 2 20V12Z\' stroke=\'%23FFFFFF\' stroke-width=\'2\' stroke-linecap=\'round\' stroke-linejoin=\'round\'/%3E%3C/svg%3E',
            'icon_characters': 'data:image/svg+xml,%3Csvg width=\'64\' height=\'64\' viewBox=\'0 0 24 24\' fill=\'none\' xmlns=\'http://www.w3.org/2000/svg\'%3E%3Cpath d=\'M17 21V19C17 17.9391 16.5786 16.9217 15.8284 16.1716C15.0783 15.4214 14.0609 15 13 15H5C3.93913 15 2.92172 15.4214 2.17157 16.1716C1.42143 16.9217 1 17.9391 1 19V21M17 21H23V19C23 17.9391 22.5786 16.9217 21.8284 16.1716C21.0783 15.4214 20.0609 15 19 15H17M9 3C11.2091 3 13 4.79086 13 7C13 9.20914 11.2091 11 9 11C6.79086 11 5 9.20914 5 7C5 4.79086 6.79086 3 9 3Z\' stroke=\'%23FFFFFF\' stroke-width=\'2\' stroke-linecap=\'round\' stroke-linejoin=\'round\'/%3E%3C/svg%3E',
            'icon_mazko_logo': 'data:image/svg+xml,%3Csvg width=\'64\' height=\'64\' viewBox=\'0 0 24 24\' fill=\'none\' xmlns=\'http://www.w3.org/2000/svg\'%3E%3Cpath d=\'M7.5 12C7.5 10.16 8.96 8.75 10.75 8.75C12.54 8.75 14 10.16 14 12C14 13.84 12.54 15.25 10.75 15.25C8.96 15.25 7.5 13.84 7.5 12ZM10.75 7.5C13.29 7.5 15.33 9.38 15.33 12C15.33 14.62 13.29 16.5 10.75 16.5C8.21 16.5 6.17 14.62 6.17 12C6.17 9.38 8.21 7.5 10.75 7.5ZM2 12C2 17.52 6.48 22 12 22C17.52 22 22 17.52 22 12C22 6.48 17.52 2 12 2C6.48 2 2 6.48 2 12ZM3.33 12C3.33 7.21 7.21 3.33 12 3.33C16.79 3.33 20.67 7.21 20.67 12C20.67 16.79 16.79 20.67 12 20.67C7.21 20.67 3.33 16.79 3.33 12Z\' fill=\'%23FFFFFF\'/%3E%3C/svg%3E', // ä¸€ä¸ªåœ†åœˆä¸­çš„é€šç”¨â€œMâ€å½¢ï¼Œåƒä¸€ä¸ªæ ‡å¿—
            'icon_services': 'data:image/svg+xml,%3Csvg width=\'64\' height=\'64\' viewBox=\'0 0 24 24\' fill=\'none\' xmlns=\'http://www.w3.org/2000/svg\'%3E%3Cpath d=\'M18 13.5V18C18 19.1046 17.1046 20 16 20H4C2.89543 20 2 19.1046 2 18V6C2 4.89543 2.89543 4 4 4H10.5M18 13.5L22 9.5M22 9.5L18 5.5M22 9.5H16M13 10L10.5 12.5L13 15\' stroke=\'%23FFFFFF\' stroke-width=\'2\' stroke-linecap=\'round\' stroke-linejoin=\'round\'/%3E%3C/svg%3E',
            'icon_socials': 'data:image/svg+xml,%3Csvg width=\'64\' height=\'64\' viewBox=\'0 0 24 24\' fill=\'none\' xmlns=\'http://www.w3.org/2000/svg\'%3E%3Cpath d=\'M18 8C19.6569 8 21 6.65685 21 5C21 3.34315 19.6569 2 18 2C16.3431 2 15 3.34315 15 5C15 6.65685 16.3431 8 18 8Z\' stroke=\'%23FFFFFF\' stroke-width=\'2\' stroke-linecap=\'round\' stroke-linejoin=\'round\'/%3E%3Cpath d=\'M6 15C7.65685 15 9 13.6569 9 12C9 10.3431 7.65685 9 6 9C4.34315 9 3 10.3431 3 12C3 13.6569 4.34315 15 6 15Z\' stroke=\'%23FFFFFF\' stroke-width=\'2\' stroke-linecap=\'round\' stroke-linejoin=\'round\'/%3E%3Cpath d=\'M18 22C19.6569 22 21 20.6569 21 19C21 17.3431 19.6569 16 18 16C16.3431 16 15 17.3431 15 19C15 20.6569 16.3431 22 18 22Z\' stroke=\'%23FFFFFF\' stroke-width=\'2\' stroke-linecap=\'round\' stroke-linejoin=\'round\'/%3E%3Cpath d=\'M8.59 13.51L15.42 17.49\' stroke=\'%23FFFFFF\' stroke-width=\'2\' stroke-linecap=\'round\' stroke-linejoin=\'round\'/%3E%3Cpath d=\'M15.41 6.51L8.59 10.49\' stroke=\'%23FFFFFF\' stroke-width=\'2\' stroke-linecap=\'round\' stroke-linejoin=\'round\'/%3E%3C/svg%3E',
            'icon_datacore': 'data:image/svg+xml,%3Csvg width=\'24\' height=\'24\' viewBox=\'0 0 24 24\' fill=\'none\' xmlns=\'http://www.w3.org/2000/svg\'%3E%3Cpath d=\'M5 12L12 19L19 12L12 5L5 12Z\' stroke=\'%23FFFFFF\' stroke-width=\'2\' stroke-linecap=\'round\' stroke-linejoin=\'round\'/%3E%3Cpath d=\'M12 5V2M12 22V19M19 12H22M2 12H5\' stroke=\'%23FFFFFF\' stroke-width=\'2\' stroke-linecap=\'round\' stroke-linejoin=\'round\'/%3E%3Cpath d=\'M12 12C14.7614 12 17 9.76142 17 7C17 4.23858 14.7614 2 12 2C9.23858 2 7 4.23858 7 7C7 9.76142 9.23858 12 12 12Z\' stroke=\'%23FFFFFF\' stroke-width=\'2\' stroke-linecap=\'round\' stroke-linejoin=\'round\'/%3E%3Cpath d=\'M12 12C9.23858 12 7 14.2386 7 17C7 19.7614 9.23858 22 12 22C14.7614 22 17 19.7614 17 17C17 14.2386 14.7614 12 12 12Z\' stroke=\'%23FFFFFF\' stroke-width=\'2\' stroke-linecap=\'round\' stroke-linejoin=\'round\'/%3E%3C/svg%3E',
            // ä»»åŠ¡æ ç³»ç»Ÿæ‰˜ç›˜å›¾æ ‡ (ç®€å•çš„SVGå›¾æ ‡)
            'icon_wifi': 'data:image/svg+xml,%3Csvg width=\'24\' height=\'24\' viewBox=\'0 0 24 24\' fill=\'none\' xmlns=\'http://www.w3.org/2000/svg\'%3E%3Cpath d=\'M12 18V22\' stroke=\'%23FFFFFF\' stroke-width=\'2\' stroke-linecap=\'round\' stroke-linejoin=\'round\'/%3E%3Cpath d=\'M12 12L12.01 12\' stroke=\'%23FFFFFF\' stroke-width=\'2\' stroke-linecap=\'round\' stroke-linejoin=\'round\'/%3E%3Cpath d=\'M2.99998 8.00002C5.99998 5.00002 9.00002 3.00002 12 3.00002C15 3.00002 18 5.00002 21 8.00002\' stroke=\'%23FFFFFF\' stroke-width=\'2\' stroke-linecap=\'round\' stroke-linejoin=\'round\'/%3E%3Cpath d=\'M5.99998 11C7.99998 9 10 7.99998 12 7.99998C14 7.99998 16 9 18 11\' stroke=\'%23FFFFFF\' stroke-width=\'2\' stroke-linecap=\'round\' stroke-linejoin=\'round\'/%3E%3C/svg%3E',
            'icon_battery': 'data:image/svg+xml,%3Csvg width=\'24\' height=\'24\' viewBox=\'0 0 24 24\' fill=\'none\' xmlns=\'http://www.w3.org/2000/svg\'%3E%3Cpath d=\'M15 6H19C19.5523 6 20 6.44772 20 7V17C20 17.5523 19.5523 18 19 18H5C4.44772 18 4 17.5523 4 17V7C4 6.44772 4.44772 6 5 6H9M15 6V4C15 3.44772 14.5523 3 14 3H10C9.44772 3 9 3.44772 9 4V6M15 6H9M22 10V14\' stroke=\'%23FFFFFF\' stroke-width=\'2\' stroke-linecap=\'round\' stroke-linejoin=\'round\'/%3E%3C/svg%3E',
            'icon_volume': 'data:image/svg+xml,%3Csvg width=\'24\' height=\'24\' viewBox=\'0 0 24 24\' fill=\'none\' xmlns=\'http://www.w3.org/2000/svg\'%3E%3Cpath d=\'M11 5L6 9H2V15H6L11 19V5Z\' stroke=\'%23FFFFFF\' stroke-width=\'2\' stroke-linecap=\'round\' stroke-linejoin=\'round\'/%3E%3Cpath d=\'M19.07 4.93C20.6695 6.52936 21.5583 8.70776 21.5583 11C21.5583 13.2922 20.6695 15.4706 19.07 17.07\' stroke=\'%23FFFFFF\' stroke-width=\'2\' stroke-linecap=\'round\' stroke-linejoin=\'round\'/%3E%3Cpath d=\'M15.54 8.46C16.3262 9.24614 16.7644 10.2986 16.7644 11.39C16.7644 12.4814 16.3262 13.5339 15.54 14.32\' stroke=\'%23FFFFFF\' stroke-width=\'2\' stroke-linecap=\'round\' stroke-linejoin=\'round\'/%3E%3C/svg%3E',

            // å¼€å§‹èœå•åº•éƒ¨æŒ‰é’®å›¾æ ‡ (ç®€å•çš„SVGå›¾æ ‡)
            'icon_settings': 'data:image/svg+xml,%3Csvg width=\'32\' height=\'32\' viewBox=\'0 0 24 24\' fill=\'none\' xmlns=\'http://www.w3.org/2000/svg\'%3E%3Cpath d=\'M12 2C12.5523 2 13 2.44772 13 3V5.07409C14.7351 5.25367 16.3475 5.92383 17.7088 6.98066L19.2912 5.3983C19.6817 5.00782 20.3183 5.00782 20.7088 5.3983L21.5983 6.28779C21.9888 6.67828 21.9888 7.31482 21.5983 7.70531L19.9575 9.34612C21.0143 10.7074 21.6845 12.3198 21.864 14H24V14C24 14.5523 23.5523 15 23 15H20.9259C20.7463 16.7351 20.0762 18.3475 19.0193 19.7088L20.6017 21.2912C20.9922 21.6817 20.9922 22.3183 20.6017 22.7088L19.7122 23.5983C19.3217 23.9888 18.6852 23.9888 18.2947 23.5983L16.6539 21.9575C15.2926 23.0143 13.6802 23.6845 12 23.864V24C11.4477 24 11 23.5523 11 23V21.864C9.26493 21.6845 7.65251 21.0143 6.29119 19.9575L4.70883 21.54C4.31834 21.9305 3.68179 21.9305 3.29131 21.54L2.40181 20.6505C2.01132 20.26 2.01132 19.6235 2.40181 19.233L4.04262 17.5922C2.98576 16.2309 2.31557 14.6185 2.13603 12.8833H0V12C0 11.4477 0.447715 11 1 11H3.07409C3.25367 9.26493 3.92383 7.65251 4.98066 6.29119L3.3983 4.70883C3.00782 4.31834 3.00782 3.68179 3.3983 3.29131L4.28779 2.40181C4.67828 2.01132 5.31482 2.01132 5.70531 2.40181L7.34612 4.04262C8.70744 2.98576 10.3198 2.31557 12 2.13603V2Z\' stroke=\'%23FFFFFF\' stroke-width=\'2\' stroke-linecap=\'round\' stroke-linejoin=\'round\'/%3E%3Ccircle cx=\'12\' cy=\'12\' r=\'3\' stroke=\'%23FFFFFF\' stroke-width=\'2\' stroke-linecap=\'round\' stroke-linejoin=\'round\'/%3E%3C/svg%3E',
            'icon_shutdown': 'data:image/svg+xml,%3Csvg width=\'24\' height=\'24\' viewBox=\'0 0 24 24\' fill=\'none\' xmlns=\'http://www.w3.org/2000/svg\'%3E%3Cpath d=\'M12 2V12\' stroke=\'%23FFFFFF\' stroke-width=\'2\' stroke-linecap=\'round\' stroke-linejoin=\'round\'/%3E%3Cpath d=\'M18.364 5.63604C20.4184 7.69036 21.5817 10.3913 21.5817 13.2091C21.5817 16.0269 20.4184 18.7277 18.364 20.7821C16.3096 22.8364 13.6087 24 10.7909 24C7.97314 24 5.27228 22.8364 3.21796 20.7821C1.16364 18.7277 0 16.0269 0 13.2091C0 10.3913 1.16364 7.69036 3.21796 5.63604\' stroke=\'%23FFFFFF\' stroke-width=\'2\' stroke-linecap=\'round\' stroke-linejoin=\'round\'/%3E%3C/svg%3E',

            // çª—å£æ§åˆ¶æŒ‰é’®å›¾æ ‡ (ç®€å•çš„SVGå›¾æ ‡)
            'icon_minus': 'data:image/svg+xml,%3Csvg width=\'24\' height=\'24\' viewBox=\'0 0 24 24\' fill=\'none\' xmlns=\'http://www.w3.org/2000/svg\'%3E%3Cpath d=\'M5 12H19\' stroke=\'%23FFFFFF\' stroke-width=\'2\' stroke-linecap=\'round\' stroke-linejoin=\'round\'/%3E%3C/svg%3E',
            'icon_square': 'data:image/svg+xml,%3Csvg width=\'24\' height=\'24\' viewBox=\'0 0 24 24\' fill=\'none\' xmlns=\'http://www.w3.org/2000/svg\'%3E%3Crect x=\'3\' y=\'3\' width=\'18\' height=\'18\' rx=\'2\' stroke=\'%23FFFFFF\' stroke-width=\'2\' stroke-linecap=\'round\' stroke-linejoin=\'round\'/%3E%3C/svg%3E',
            'icon_times': 'data:image/svg+xml,%3Csvg width=\'24\' height=\'24\' viewBox=\'0 0 24 24\' fill=\'none\' xmlns=\'http://www.w3.org/2000/svg\'%3E%3Cpath d=\'M6 18L18 6M6 6L18 18\' stroke=\'%23FFFFFF\' stroke-width=\'2\' stroke-linecap=\'round\' stroke-linejoin=\'round\'/%3E%3C/svg%3E',
            'icon_window_restore': 'data:image/svg+xml,%3Csvg width=\'24\' height=\'24\' viewBox=\'0 0 24 24\' fill=\'none\' xmlns=\'http://www.w3.org/2000/svg\'%3E%3Cpath d=\'M4 14C4 12.8954 4.89543 12 6 12H18C19.1046 12 20 12.8954 20 14V18C20 19.1046 19.1046 20 18 20H6C4.89543 20 4 19.1046 4 18V14Z\' stroke=\'%23FFFFFF\' stroke-width=\'2\' stroke-linecap=\'round\' stroke-linejoin=\'round\'/%3E%3Cpath d=\'M8 4C8 2.89543 8.89543 2 10 2H18C19.1046 2 20 2.89543 20 4V8\' stroke=\'%23FFFFFF\' stroke-width=\'2\' stroke-linecap=\'round\' stroke-linejoin=\'round\'/%3E%3C/svg%3E',

            // ç”»å»Šå¯¼èˆªæŒ‰é’®å›¾æ ‡ (ç®€å•çš„SVGå›¾æ ‡)
            'icon_chevron_left': 'data:image/svg+xml,%3Csvg width=\'24\' height=\'24\' viewBox=\'0 0 24 24\' fill=\'none\' xmlns=\'http://www.w3.org/2000/svg\'%3E%3Cpath d=\'M15 18L9 12L15 6\' stroke=\'%23FFFFFF\' stroke-width=\'2\' stroke-linecap=\'round\' stroke-linejoin=\'round\'/%3E%3C/svg%3E',
            'icon_chevron_right': 'data:image/svg+xml,%3Csvg width=\'24\' height=\'24\' viewBox=\'0 0 24 24\' fill=\'none\' xmlns=\'http://www.w3.org/2000/svg\'%3E%3Cpath d=\'M9 18L15 12L9 6\' stroke=\'%23FFFFFF\' stroke-width=\'2\' stroke-linecap=\'round\' stroke-linejoin=\'round\'/%3E%3C/svg%3E',

            // ç¤¾äº¤åª’ä½“å›¾æ ‡ (ç®€å•çš„SVGå›¾æ ‡)
            'icon_weibo': 'data:image/svg+xml,%3Csvg width=\'24\' height=\'24\' viewBox=\'0 0 24 24\' fill=\'none\' xmlns=\'http://www.w3.org/2000/svg\'%3E%3Cpath d=\'M12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2Z\' fill=\'%23EA4C89\'/%3E%3Cpath d=\'M15.5 8C15.5 7.44772 15.0523 7 14.5 7H9.5C8.94772 7 8.5 7.44772 8.5 8V16C8.5 16.5523 8.94772 17 9.5 17H14.5C15.0523 17 15.5 16.5523 15.5 16V8Z\' stroke=\'%23FFFFFF\' stroke-width=\'2\' stroke-linecap=\'round\' stroke-linejoin=\'round\'/%3E%3Cpath d=\'M12 10.5C12.8284 10.5 13.5 9.82843 13.5 9C13.5 8.17157 12.8284 7.5 12 7.5C11.1716 7.5 10.5 8.17157 10.5 9C10.5 9.82843 11.1716 10.5 12 10.5Z\' fill=\'%23FFFFFF\'/%3E%3Cpath d=\'M12 13C12.8284 13 13.5 12.3284 13.5 11.5C13.5 10.6716 12.8284 10 12 10C11.1716 10 10.5 10.6716 10.5 11.5C10.5 12.3284 11.1716 13 12 13Z\' fill=\'%23FFFFFF\'/%3E%3C/svg%3E',
            'icon_instagram': 'data:image/svg+xml,%3Csvg width=\'24\' height=\'24\' viewBox=\'0 0 24 24\' fill=\'none\' xmlns=\'http://www.w3.org/2000/svg\'%3E%3Crect x=\'2\' y=\'2\' width=\'20\' height=\'20\' rx=\'5\' stroke=\'%23FFFFFF\' stroke-width=\'2\' stroke-linecap=\'round\' stroke-linejoin=\'round\'/%3E%3Cpath d=\'M16 3H16.01\' stroke=\'%23FFFFFF\' stroke-width=\'2\' stroke-linecap=\'round\' stroke-linejoin=\'round\'/%3E%3Cpath d=\'M12 7C9.23858 7 7 9.23858 7 12C7 14.7614 9.23858 17 12 17C14.7614 17 17 14.7614 17 12C17 9.23858 14.7614 7 12 7Z\' stroke=\'%23FFFFFF\' stroke-width=\'2\' stroke-linecap=\'round\' stroke-linejoin=\'round\'/%3E%3C/svg%3E',
            'icon_artstation': 'data:image/svg+xml,%3Csvg width=\'24\' height=\'24\' viewBox=\'0 0 24 24\' fill=\'none\' xmlns=\'http://www.w3.org/2000/svg\'%3E%3Cpath d=\'M12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2Z\' fill=\'%2313AFF0\'/%3E%3Cpath d=\'M12 6L18 18H6L12 6Z\' fill=\'%23FFFFFF\'/%3E%3C/svg%3E',
            'icon_behance_square': 'data:image/svg+xml,%3Csvg width=\'24\' height=\'24\' viewBox=\'0 0 24 24\' fill=\'none\' xmlns=\'http://www.w3.org/2000/svg\'%3E%3Crect x=\'2\' y=\'2\' width=\'20\' height=\'20\' rx=\'2\' stroke=\'%23FFFFFF\' stroke-width=\'2\' stroke-linecap=\'round\' stroke-linejoin=\'round\'/%3E%3Cpath d=\'M16 10C16 8.89543 15.1046 8 14 8H10C8.89543 8 8 8.89543 8 10V14C8 15.1046 8.89543 16 10 16H14C15.1046 16 16 15.1046 16 14V10Z\' stroke=\'%23FFFFFF\' stroke-width=\'2\' stroke-linecap=\'round\' stroke-linejoin=\'round\'/%3E%3Cpath d=\'M10 8L14 16\' stroke=\'%23FFFFFF\' stroke-width=\'2\' stroke-linecap=\'round\' stroke-linejoin=\'round\'/%3E%3C/svg%3E',
            'icon_envelope': 'data:image/svg+xml,%3Csvg width=\'24\' height=\'24\' viewBox=\'0 0 24 24\' fill=\'none\' xmlns=\'http://www.w3.org/2000/svg\'%3E%3Cpath d=\'M4 4H20C21.1046 4 22 4.89543 22 6V18C22 19.1046 21.1046 20 20 20H4C2.89543 20 2 19.1046 2 18V6C2 4.89543 2.89543 4 4 4Z\' stroke=\'%23FFFFFF\' stroke-width=\'2\' stroke-linecap=\'round\' stroke-linejoin=\'round\'/%3E%3Cpath d=\'M22 6L12 13L2 6\' stroke=\'%23FFFFFF\' stroke-width=\'2\' stroke-linecap=\'round\' stroke-linejoin=\'round\'/%3E%3C/svg%3E',

            // æ¡Œé¢èƒŒæ™¯å›¾åƒ (ä½¿ç”¨ç›¸å¯¹è·¯å¾„)
            'desktop_background_image': './assets/backgrounds/test_bg.jpg'
        };

        /**
         * @function getAssetUrl
         * @description ä» ASSETS å¯¹è±¡ä¸­æ£€ç´¢æŒ‡å®šèµ„äº§çš„URLã€‚
         * @param {string} assetKey - ASSETS å¯¹è±¡ä¸­çš„é”®åã€‚
         * @returns {string} ç›¸åº”èµ„äº§çš„URLè·¯å¾„ã€‚
         */
        function getAssetUrl(assetKey) {
            return ASSETS[assetKey] || ''; 
        }

        /**
         * @object LANG_CONTENT
         * @description ç”¨äºUIçš„é›†ä¸­å¼å¤šè¯­è¨€å†…å®¹ã€‚
         */
        const LANG_CONTENT = {
            zh: {
                systemName: 'MAX OS',
                systemVersion: 'v1.0.0',
                welcomeMessage: 'æ¬¢è¿æ¥åˆ° MAZKO çš„è™šæ‹Ÿç»ˆç«¯',
                loadingMessage: 'åŠ è½½ä¸­...',
                errorLoadingContent: 'åŠ è½½å†…å®¹å¤±è´¥ï¼š',
                unknownModule: 'æœªçŸ¥æ¨¡å—',
                profileName: 'MAZKO',
                startButton: 'å¼€å§‹',
                // æ¡Œé¢å›¾æ ‡ / èœå•é¡¹
                worksIcon: 'ä½œå“é›†',
                worksMenuItem: 'æˆ‘çš„ä½œå“é›†',
                charactersIcon: 'è§’è‰²',
                charactersMenuItem: 'è§’è‰²åº“',
                mazkoExeIcon: 'MAZKO',
                servicesIcon: 'æœåŠ¡',
                servicesMenuItem: 'æœåŠ¡ä¸æŠ¥ä»·',
                socialsIcon: 'ç¤¾äº¤',
                socialsMenuItem: 'ç¤¾äº¤åª’ä½“',
                datacoreIcon: 'æ•¸æ“šæ ¸å¿ƒ', // æ–°å¢æ•°æ®æ ¸å¿ƒå›¾æ ‡æ–‡æœ¬
                datacoreMenuItem: 'æ•¸æ“šá•¼á£¯éˆŠ â¸¸ Dá´¬áµ€á´¬.Cá´¼á´¿á´± â˜', // æ–°å¢æ•°æ®æ ¸å¿ƒèœå•é¡¹æ–‡æœ¬
                settingsMenuItem: 'ç³»ç»Ÿè®¾ç½®',
                shutdownMenuItem: 'å…³æœº',
                shutdownMessage: 'ç³»ç»Ÿæ­£åœ¨å…³æœºï¼Œå†è§ï¼', // Added missing translation

                // Status bar specific
                statusBarBranding: 'â§‰ Ğ¼ax ä¿‚çµ± â¸¸ ğ™ˆğ™–ğ™­ ğ™Šğ™ [ğ™‘áµ‰Ê³Â¹â€¤â°â€¤â°]',
                statusBarStatusReady: 'å°±ç»ª',
                statusBarStatusDragging: 'æ­£åœ¨æ‹–åŠ¨çª—å£...',
                statusBarStatusResizing: 'æ­£åœ¨è°ƒæ•´çª—å£å¤§å°...',

                // ä½œå“é›†éƒ¨åˆ†
                worksTitle: 'æˆ‘çš„ä½œå“é›†',
                worksClickPrompt: 'ç‚¹å‡»ä½œå“æŸ¥çœ‹è¯¦æƒ…',
                worksDetailsSuffix: ' ä½œå“è¯¦æƒ…',

                // è§’è‰²éƒ¨åˆ†
                charactersTitle: 'è§’è‰²åº“',
                charactersDescription: 'è¿™é‡Œå±•ç¤ºäº†æˆ‘è®¾è®¡çš„ä¸€äº›è§’è‰²ï¼Œå®ƒä»¬æ¥è‡ªä¸åŒçš„ä¸–ç•Œå’Œæ•…äº‹ã€‚',

                // å…³äºéƒ¨åˆ†
                aboutTitle: 'å…³äº MAZKO',
                aboutContent: `
# å…³äº MAZKO

MAZKO æ˜¯ä¸€ä½ä¸“æ³¨äº **èµ›åšæœ‹å…‹ã€Y2Kã€PSX å’Œæ•…éšœè‰ºæœ¯é£æ ¼** çš„æ•°å­—è‰ºæœ¯å®¶ã€‚

æˆ‘çš„åˆ›ä½œé¢†åŸŸæ¶µç›–ï¼š

* **ä¸‰ç»´æ¨¡å‹ä¸æ¸²æŸ“**ï¼šé«˜ç²¾åº¦ä¸ä½å¤šè¾¹å½¢æ¨¡å‹ï¼Œä¸“æ³¨äºå¤å¤æœªæ¥ä¸»ä¹‰ç¾å­¦ã€‚
* **æ¦‚å¿µè‰ºæœ¯ä¸æ’ç”»**ï¼šå°†æŠ½è±¡æƒ³æ³•è½¬åŒ–ä¸ºå…·è±¡è§†è§‰ï¼Œå¸¦æœ‰ç‹¬ç‰¹çš„èµ›åšæœ‹å…‹æ°›å›´ã€‚
* **è§†è§‰ç‰¹æ•ˆä¸åŠ¨ç”»**ï¼šä¸ºæ‚¨çš„é¡¹ç›®å¢æ·»åŠ¨æ€å’Œæ²‰æµ¸æ„Ÿã€‚
* **ç”¨æˆ·ç•Œé¢è®¾è®¡**ï¼šç§‰æŒ Frutiger Aeroã€Y2K ç­‰é£æ ¼ï¼Œåˆ›é€ ç›´è§‚è€Œç¾è§‚çš„ç•Œé¢ã€‚

æˆ‘è‡´åŠ›äºé€šè¿‡è‰ºæœ¯è¡¨è¾¾å¯¹ç§‘æŠ€ã€æœªæ¥ä¸æ€€æ—§çš„æ€è€ƒã€‚

**è”ç³»æˆ‘ï¼š**

æ¬¢è¿é€šè¿‡ä»¥ä¸‹æ–¹å¼ä¸æˆ‘è”ç³»ï¼Œå…±åŒæ¢ç´¢æ•°å­—è‰ºæœ¯çš„æ— é™å¯èƒ½ã€‚

`,
                // æ•°æ®æ ¸å¿ƒéƒ¨åˆ†
                datacoreTitle: 'æ•¸æ“šá•¼á£¯éˆŠ â¸¸ Dá´¬áµ€á´¬.Cá´¼á´¿á´± â˜',
                datacoreDescription: 'æ¢ç´¢æˆ‘çš„çµæ„Ÿå›¾åº“ã€‚',
                datacoreEmpty: 'è¿™é‡Œæš‚æ—¶æ²¡æœ‰çµæ„Ÿå›¾ç‰‡ã€‚',


                // æœåŠ¡éƒ¨åˆ†
                services: {
                    title: 'æœåŠ¡ä¸æŠ¥ä»·',
                    description: 'æˆ‘æä¾›ä»¥ä¸‹æ•°å­—è‰ºæœ¯æœåŠ¡ã€‚æ¯ä¸ªæœåŠ¡éƒ½æ—¨åœ¨æ»¡è¶³æ‚¨ç‰¹å®šçš„åˆ›æ„éœ€æ±‚ã€‚',
                    categories: [
                        {
                            id: 'character-modeling-category',
                            name: 'è§’è‰²å»ºæ¨¡ä¸è®¾è®¡',
                            nameEn: 'Character Modeling & Design',
                            shortDescription: 'åˆ›å»ºç‹¬ç‰¹ä¸”é£æ ¼åŒ–çš„ 3D/2D è§’è‰²ã€‚',
                            detailContent: `
# è§’è‰²å»ºæ¨¡ä¸è®¾è®¡

æˆ‘æ“…é•¿ä»æ¦‚å¿µåˆ°æœ€ç»ˆæ¸²æŸ“çš„å„ç±»è§’è‰²è®¾è®¡ï¼Œå°¤å…¶æ˜¯åœ¨ **PSXé£æ ¼å’Œä½å¤šè¾¹å½¢** é¢†åŸŸæœ‰æ·±å…¥ç ”ç©¶ã€‚

æœåŠ¡åŒ…æ‹¬ï¼š

* **æ¦‚å¿µè‰å›¾**ï¼šæ ¹æ®æ‚¨çš„æƒ³æ³•ï¼Œæä¾›å¤šè§’åº¦çš„è§’è‰²æ¦‚å¿µå›¾ã€‚
* **3Då»ºæ¨¡**ï¼šä½¿ç”¨ Blender/ZBrush ç­‰å·¥å…·è¿›è¡Œè§’è‰²é«˜ä½æ¨¡åˆ¶ä½œã€‚
* **çº¹ç†ç»˜åˆ¶**ï¼šç»“åˆ Substance Painterï¼Œä¸ºè§’è‰²èµ‹äºˆå¤å¤åƒç´ æˆ–ç§‘å¹»è´¨æ„Ÿã€‚
* **éª¨éª¼ç»‘å®šä¸åŠ¨ç”»ï¼ˆåŸºç¡€ï¼‰**ï¼šæä¾›åŸºç¡€çš„è§’è‰²ç»‘å®šå’Œå§¿æ€è®¾ç½®ã€‚

**æŠ¥ä»·ç¤ºä¾‹ï¼š**

* **PSXé£æ ¼ä½å¤šè¾¹å½¢è§’è‰²**ï¼šÂ¥1500 - Â¥5000 (æ ¹æ®ç»†èŠ‚å¤æ‚ç¨‹åº¦)
* **ç²¾ç»†æ¦‚å¿µè§’è‰²æ’ç”»**ï¼šÂ¥800 - Â¥3000 (æ ¹æ®ç»†èŠ‚å’ŒèƒŒæ™¯)

**é¡¹ç›®å‘¨æœŸ**ï¼šé€šå¸¸ä¸º 1-3 å‘¨ã€‚
`
                        },
                        {
                            id: 'poster-design-category',
                            name: 'æµ·æŠ¥ä¸è§†è§‰è®¾è®¡',
                            nameEn: 'Poster & Visual Design',
                            shortDescription: 'åˆ¶ä½œå…·æœ‰èµ›åšæœ‹å…‹å’Œæ•…éšœè‰ºæœ¯æ„Ÿçš„å®£ä¼ æµ·æŠ¥ã€‚',
                            detailContent: `
# æµ·æŠ¥ä¸è§†è§‰è®¾è®¡

æˆ‘èƒ½ä¸ºæ‚¨åˆ›ä½œå‡ºå¼•äººæ³¨ç›®çš„ **èµ›åšæœ‹å…‹ã€Y2K æˆ–æ•…éšœè‰ºæœ¯é£æ ¼** çš„æµ·æŠ¥å’Œå„ç±»è§†è§‰å®£ä¼ å“ã€‚

æœåŠ¡åŒ…æ‹¬ï¼š

* **æ´»åŠ¨æµ·æŠ¥**ï¼šéŸ³ä¹èŠ‚ã€æ¸¸æˆå‘å¸ƒã€è‰ºæœ¯å±•è§ˆç­‰ä¸»é¢˜æµ·æŠ¥ã€‚
* **å“ç‰Œè§†è§‰**ï¼šç¬¦åˆæ‚¨å“ç‰Œè°ƒæ€§çš„ç‹¬ç‰¹å›¾å½¢å…ƒç´ å’Œå®£ä¼ å›¾ã€‚
* **æ•°å­—æ’ç”»**ï¼šç”¨äºç½‘ç«™ã€ç¤¾äº¤åª’ä½“æˆ–å°åˆ·å“çš„å®šåˆ¶æ’ç”»ã€‚
* **åŠ¨æ€å›¾å½¢ï¼ˆåŸºç¡€ï¼‰ï¼‰**ï¼šä¸ºæµ·æŠ¥æ·»åŠ ç®€å•çš„åŠ¨ç”»æ•ˆæœã€‚

**æŠ¥ä»·ç¤ºä¾‹ï¼š**

* **å•é¡µæ¦‚å¿µæµ·æŠ¥**ï¼šÂ¥1200 - Â¥4000 (æ ¹æ®å¤æ‚åº¦å’Œä¿®è®¢æ¬¡æ•°)
* **ç³»åˆ—è§†è§‰å®£ä¼ å›¾ï¼ˆ3å¼ ï¼‰ï¼š**ï¼šÂ¥3000 - Â¥8000

**é¡¹ç›®å‘¨æœŸ**ï¼šé€šå¸¸ä¸º 0.5-2 å‘¨ã€‚
`
                        }
                    ]
                },

                // ç¤¾äº¤éƒ¨åˆ†
                socialsTitle: 'ç¤¾äº¤åª’ä½“',
                socialsDescription: 'æ¬¢è¿åœ¨ä»¥ä¸‹å¹³å°å…³æ³¨æˆ‘ï¼Œä¸æˆ‘äº’åŠ¨ã€‚',
                socialsLinks: [
                    { name: 'å¾®åš', url: 'https://weibo.com/yourprofile', iconAssetKey: 'icon_weibo' },
                    { name: 'Instagram', url: 'https://instagram.com/yourprofile', iconAssetKey: 'icon_instagram' },
                    { name: 'ArtStation', url: 'https://artstation.com/yourprofile', iconAssetKey: 'icon_artstation' },
                    { name: 'Behance', url: 'https://behance.net/yourprofile', iconAssetKey: 'icon_behance_square' },
                    { name: 'é‚®ç®±', url: 'mailto:your.email@example.com', iconAssetKey: 'icon_envelope' }
                ],

                // è®¾ç½®éƒ¨åˆ†
                settings: {
                    title: 'ç³»ç»Ÿè®¾ç½®',
                    description: 'è°ƒæ•´æ‚¨çš„ç³»ç»Ÿåå¥½è®¾ç½®ã€‚',
                    options: [
                        { id: 'language-toggle', type: 'language-toggle', label: 'åˆ‡æ¢è¯­è¨€' }, // Added missing label
                        { id: 'desktop-icons-toggle', type: 'toggle', checked: true, label: 'æ˜¾ç¤ºæ¡Œé¢å›¾æ ‡' },
                        { id: 'enable-animations', type: 'toggle', checked: true, disabled: true, label: 'å¯ç”¨ç³»ç»ŸåŠ¨ç”» (æš‚ä¸å¯ç”¨)' },
                        { id: 'reset-settings', type: 'button', label: 'é‡ç½®æ‰€æœ‰è®¾ç½®' }
                    ]
                },
            }, // End of zh language content
            en: { // Add English content
                systemName: 'MAX OS',
                systemVersion: 'v1.0.0',
                welcomeMessage: 'Welcome to MAZKO\'s Virtual Terminal',
                loadingMessage: 'Loading...',
                errorLoadingContent: 'Failed to load content: ',
                unknownModule: 'Unknown Module',
                profileName: 'MAZKO',
                startButton: 'Start',
                // Desktop Icons / Menu Items
                worksIcon: 'Works',
                worksMenuItem: 'My Works',
                charactersIcon: 'Characters',
                charactersMenuItem: 'Characters Library',
                mazkoExeIcon: 'MAZKO',
                servicesIcon: 'Services',
                servicesMenuItem: 'Services & Pricing',
                socialsIcon: 'Socials',
                socialsMenuItem: 'Social Media',
                datacoreIcon: 'DATA CORE',
                datacoreMenuItem: 'DATA.CORE',
                settingsMenuItem: 'System Settings',
                shutdownMenuItem: 'Shutdown',
                shutdownMessage: 'System is shutting down, Goodbye!',

                // Status bar specific
                statusBarBranding: 'â§‰ Ğ¼ax ä¿‚çµ± â¸¸ ğ™ˆğ™–ğ™­ ğ™Šğ™ [ğ™‘áµ‰Ê³Â¹â€¤â°â€¤â°]', // Same branding text for English
                statusBarStatusReady: 'Ready',
                statusBarStatusDragging: 'Dragging Window...',
                statusBarStatusResizing: 'Resizing Window...',

                // Works section
                worksTitle: 'My Works',
                worksClickPrompt: 'Click on a work to view details',
                worksDetailsSuffix: ' Details',

                // Characters section
                charactersTitle: 'Characters Library',
                charactersDescription: 'Here are some characters I\'ve designed, from different worlds and stories.',

                // About section
                aboutTitle: 'About MAZKO',
                aboutContent: `
# About MAZKO

MAZKO is a digital artist focused on **Cyberpunk, Y2K, PSX, and Glitch Art styles**.

My areas of expertise include:

* **3D Models & Renders**: High-fidelity and low-poly models, with a focus on retro-futuristic aesthetics.
* **Concept Art & Illustrations**: Transforming abstract ideas into concrete visuals with a unique cyberpunk atmosphere.
* **Visual Effects & Animation**: Adding dynamic and immersive elements to your projects.
* **User Interface Design**: Adhering to styles like Frutiger Aero, Y2K, to create intuitive and aesthetically pleasing interfaces.

I am dedicated to expressing thoughts on technology, the future, and nostalgia through art.

**Contact me:**

Feel free to contact me through the following channels to explore the infinite possibilities of digital art together.

`,
                // Data Core section
                datacoreTitle: 'DATA.CORE',
                datacoreDescription: 'Explore my inspiration gallery.',
                datacoreEmpty: 'No inspiration images here yet.',

                // Services section
                services: {
                    title: 'Services & Pricing',
                    description: 'I offer the following digital art services. Each service is designed to meet your specific creative needs.',
                    categories: [
                        {
                            id: 'character-modeling-category',
                            name: 'Character Modeling & Design',
                            nameEn: 'Character Modeling & Design',
                            shortDescription: 'Create unique and stylized 3D/2D characters.',
                            detailContent: `
# Character Modeling & Design

æˆ‘æ“…é•¿ä»æ¦‚å¿µåˆ°æœ€ç»ˆæ¸²æŸ“çš„å„ç±»è§’è‰²è®¾è®¡ï¼Œå°¤å…¶æ˜¯åœ¨ **PSXé£æ ¼å’Œä½å¤šè¾¹å½¢** é¢†åŸŸæœ‰æ·±å…¥ç ”ç©¶ã€‚

æœåŠ¡åŒ…æ‹¬ï¼š

* **Concept Sketches**: Providing multi-angle character concepts based on your ideas.
* **3D Modeling**: Creating high-poly and low-poly models using tools like Blender/ZBrush.
* **Texture Painting**: Using Substance Painter to give characters retro pixelated or sci-fi textures.
* **Rigging & Basic Animation**: Providing basic character rigging and pose setup.

**Pricing Examples:**

* **PSX Style Low-Poly Character**: Â¥1500 - Â¥5000 (depending on detail complexity)
* **Detailed Concept Character Illustration**: Â¥800 - Â¥3000 (depending on detail and background)

**Project Duration**: Typically 1-3 weeks.
`
                        },
                        {
                            id: 'poster-design-category',
                            name: 'Poster & Visual Design',
                            nameEn: 'Poster & Visual Design',
                            shortDescription: 'Create promotional posters with a cyberpunk and glitch art feel.',
                            detailContent: `
# Poster & Visual Design

I can create eye-catching posters and various visual promotional materials for you in **Cyberpunk, Y2K, or Glitch Art styles**.

Services include:

* **Event Posters**: Themed posters for music festivals, game releases, art exhibitions, etc.
* **Brand Visuals**: Unique graphic elements and promotional images that align with your brand identity.
* **Digital Illustrations**: Custom illustrations for websites, social media, or print.
* **Motion Graphics (Basic)**: Adding simple animation effects to posters.

**Pricing Examples:**

* **Single-Page Concept Poster**: Â¥1200 - Â¥4000 (depending on complexity and revisions)
* **Series of Visual Promotional Images (3 images)**: Â¥3000 - Â¥8000

**Project Duration**: Typically 0.5-2 weeks.
`
                        }
                    ]
                },

                // ç¤¾äº¤éƒ¨åˆ†
                socialsTitle: 'ç¤¾äº¤åª’ä½“',
                socialsDescription: 'æ¬¢è¿åœ¨ä»¥ä¸‹å¹³å°å…³æ³¨æˆ‘ï¼Œä¸æˆ‘äº’åŠ¨ã€‚',
                socialsLinks: [
                    { name: 'å¾®åš', url: 'https://weibo.com/yourprofile', iconAssetKey: 'icon_weibo' },
                    { name: 'Instagram', url: 'https://instagram.com/yourprofile', iconAssetKey: 'icon_instagram' },
                    { name: 'ArtStation', url: 'https://artstation.com/yourprofile', iconAssetKey: 'icon_artstation' },
                    { name: 'Behance', url: 'https://behance.net/yourprofile', iconAssetKey: 'icon_behance_square' },
                    { name: 'é‚®ç®±', url: 'mailto:your.email@example.com', iconAssetKey: 'icon_envelope' }
                ],

                // è®¾ç½®éƒ¨åˆ†
                settings: {
                    title: 'System Settings',
                    description: 'Adjust your system preferences.',
                    options: [
                        { id: 'language-toggle', type: 'language-toggle', label: 'åˆ‡æ¢è¯­è¨€' },
                        { id: 'desktop-icons-toggle', type: 'toggle', checked: true, label: 'æ˜¾ç¤ºæ¡Œé¢å›¾æ ‡' },
                        { id: 'enable-animations', type: 'toggle', checked: true, disabled: true, label: 'å¯ç”¨ç³»ç»ŸåŠ¨ç”» (æš‚ä¸å¯ç”¨)' },
                        { id: 'reset-settings', type: 'button', label: 'é‡ç½®æ‰€æœ‰è®¾ç½®' }
                    ]
                },
            }
        };


        let currentLanguage = 'zh'; // å°†å£°æ˜ç§»åˆ° DOMContentLoaded å¤–éƒ¨

        document.addEventListener('DOMContentLoaded', () => {
            console.log('è„šæœ¬å¼€å§‹è§£æã€‚'); // Added for debugging
            
            // JavaScript for dynamic elements (e.g., time display)
            // ç”¨äºåŠ¨æ€å…ƒç´ ï¼ˆä¾‹å¦‚ï¼Œæ—¶é—´æ˜¾ç¤ºï¼‰çš„ JavaScript
            function updateTime() {
                const now = new Date();
                const hours = String(now.getHours()).padStart(2, '0');
                const minutes = String(now.getMinutes()).padStart(2, '0');
                const timeElement = document.getElementById('current-time');
                if (timeElement) {
                    timeElement.textContent = `${hours}:${minutes}`;
                } else {
                    console.warn('æœªæ‰¾åˆ°æ—¶é—´å…ƒç´ ã€‚');
                }
            }

            // Update time every minute
            // æ¯åˆ†é’Ÿæ›´æ–°æ—¶é—´
            setInterval(updateTime, 60000); // æ¯åˆ†é’Ÿæ›´æ–° HH:MM
            // Initial call to display time immediately
            // ç«‹å³è°ƒç”¨ä»¥æ˜¾ç¤ºæ—¶é—´
            updateTime();

            // Get elements for the desktop environment
            // è·å–æ¡Œé¢ç¯å¢ƒçš„å…ƒç´ 
            const startButton = document.getElementById('start-button-taskbar');
            const startMenu = document.getElementById('start-menu');
            const startMenuHeader = document.querySelector('.start-menu-header'); // Get the header
            // è·å–å¤´éƒ¨
            const mainDesktopArea = document.getElementById('main-desktop-area');
            // Removed welcome message elements as requested
            // æŒ‰è¦æ±‚ç§»é™¤æ¬¢è¿æ¶ˆæ¯å…ƒç´ 
            // const welcomeMessage = document.getElementById('welcome-message');
            // let welcomeMessageText = document.getElementById('welcome-message-text'); 
            const taskbarIconsContainer = document.getElementById('taskbar-icons');
            const desktopIconsContainer = document.getElementById('desktop-icons-container');
            const desktopBackground = document.getElementById('desktop-background'); // Get desktop background element
            // è·å–æ¡Œé¢èƒŒæ™¯å…ƒç´ 
            let highestZIndex = 5; // To manage window stacking order
            // ç”¨äºç®¡ç†çª—å£å †å é¡ºåº

            // Store references to open windows to re-render them on language change
            // å­˜å‚¨æ‰“å¼€çš„çª—å£çš„å¼•ç”¨ï¼Œä»¥ä¾¿åœ¨è¯­è¨€æ›´æ”¹æ—¶é‡æ–°æ¸²æŸ“å®ƒä»¬
            const openWindowsMap = new Map(); // Map<windowId, {section, chineseTitle, englishTitle, windowElement}>

            console.log('æ ¸å¿ƒDOMå…ƒç´ å’Œå˜é‡å·²åˆå§‹åŒ–ã€‚');

            /**
             * @function updateCursors
             * @description Dynamically updates CSS custom properties for cursors based on paths defined in ASSETS.
             * @returns {void}
             */
            /**
             * @function updateCursors
             * @description æ ¹æ® ASSETS ä¸­å®šä¹‰çš„è·¯å¾„åŠ¨æ€æ›´æ–°å…‰æ ‡çš„ CSS è‡ªå®šä¹‰å±æ€§ã€‚
             * @returns {void}
             */
            function updateCursors() {
                const root = document.documentElement;
                root.style.setProperty('--cursor-default', `url('${getAssetUrl('cursor_default')}'), auto`);
                root.style.setProperty('--cursor-active', `url('${getAssetUrl('cursor_active')}'), auto`);
                root.style.setProperty('--cursor-pointer', `url('${getAssetUrl('cursor_pointer')}'), auto`);
                console.log('è‡ªå®šä¹‰å…‰æ ‡å·²æ›´æ–°ã€‚');
            }

            /**
             * @function renderDynamicAssets
             * @description Iterates through all placeholder elements with `data-asset-key` attribute and replaces them with `<img>` tags, loading the corresponding images.
             * @returns {void}
             */
            /**
             * @function renderDynamicAssets
             * @description éå†æ‰€æœ‰å¸¦æœ‰ `data-asset-key` å±æ€§çš„å ä½ç¬¦å…ƒç´ ï¼Œå¹¶å°†å…¶æ›¿æ¢ä¸º `<img>` æ ‡ç­¾ï¼ŒåŠ è½½ç›¸åº”çš„å›¾åƒã€‚
             * @returns {void}
             */
            function renderDynamicAssets() {
                document.querySelectorAll('.icon-placeholder[data-asset-key]').forEach(placeholder => {
                    const assetKey = placeholder.dataset.assetKey;
                    const iconUrl = getAssetUrl(assetKey);
                    if (iconUrl) {
                        // If placeholder already has an image, avoid adding duplicates
                        // å¦‚æœå ä½ç¬¦å·²ç»æœ‰å›¾åƒï¼Œåˆ™é¿å…æ·»åŠ é‡å¤é¡¹
                        if (placeholder.querySelector('img')) {
                            placeholder.querySelector('img').src = iconUrl;
                        } else {
                            const img = document.createElement('img');
                            img.src = iconUrl;
                            img.alt = assetKey.replace('icon_', '').replace(/_/g, ' '); // Simple alt text
                            // ç®€å•çš„altæ–‡æœ¬
                            img.classList.add('icon-image'); // Apply general icon styles defined in CSS
                            // åº”ç”¨CSSä¸­å®šä¹‰çš„é€šç”¨å›¾æ ‡æ ·å¼
                            placeholder.innerHTML = ''; // Clear any existing content
                            // æ¸…é™¤ä»»ä½•ç°æœ‰å†…å®¹
                            placeholder.appendChild(img);
                        }
                    } else {
                        console.warn(`æœªæ‰¾åˆ°é”®åä¸º "${assetKey}" çš„èµ„äº§ã€‚`);
                        // If asset not found, display a default broken icon, or keep it empty
                        // å¦‚æœæœªæ‰¾åˆ°èµ„äº§ï¼Œåˆ™æ˜¾ç¤ºé»˜è®¤çš„æŸåå›¾æ ‡ï¼Œæˆ–ä¿æŒä¸ºç©º
                        placeholder.innerHTML = 'âš ï¸';
                    }
                });

                // Check and set desktop background image (if defined in ASSETS)
                // æ£€æŸ¥å¹¶è®¾ç½®æ¡Œé¢èƒŒæ™¯å›¾åƒï¼ˆå¦‚æœASSETSä¸­å®šä¹‰ï¼‰
                const desktopBgImage = getAssetUrl('desktop_background_image');
                console.log('å°è¯•è®¾ç½®æ¡Œé¢èƒŒæ™¯ã€‚è·¯å¾„ï¼š', desktopBgImage); // Debug: Check path
                // è°ƒè¯•ï¼šæ£€æŸ¥è·¯å¾„
                if (desktopBgImage && desktopBackground) {
                    // Set CSS variable for the image URL
                    // è®¾ç½®å›¾åƒURLçš„CSSå˜é‡
                    desktopBackground.style.setProperty('--desktop-image-url', `url('${desktopBgImage}')`);
                    
                    desktopBackground.classList.add('desktop-background-image-active');
                    console.log('æ¡Œé¢èƒŒæ™¯å›¾åƒå·²åº”ç”¨CSSå±æ€§ã€‚ç±»åˆ—è¡¨ï¼š', desktopBackground.classList.value);
                } else if (desktopBackground) {
                    // Ensure default background and effects are active if no image is used
                    // å¦‚æœæ²¡æœ‰ä½¿ç”¨å›¾åƒï¼Œè¯·ç¡®ä¿é»˜è®¤èƒŒæ™¯å’Œæ•ˆæœå¤„äºæ´»åŠ¨çŠ¶æ€
                    desktopBackground.classList.remove('desktop-background-image-active');
                    desktopBackground.classList.add('desktop-background');
                    desktopBackground.style.removeProperty('--desktop-image-url'); // Remove the CSS variable
                    // ç§»é™¤CSSå˜é‡
                    // Re-apply default background gradients if no image is set
                    // å¦‚æœæ²¡æœ‰è®¾ç½®å›¾åƒï¼Œåˆ™é‡æ–°åº”ç”¨é»˜è®¤èƒŒæ™¯æ¸å˜
                    desktopBackground.style.backgroundImage = `
                        radial-gradient(circle at 10% 90%, rgba(0,191,255,0.3) 0%, transparent 45%),
                        radial-gradient(circle at 90% 10%, rgba(0,191,255,0.3) 0%, transparent 45%),
                        radial-gradient(ellipse at center, rgba(0,122,204,0.15) 0%, transparent 55%),
                        linear-gradient(to bottom right, #3A92CE, #CCEEFF)
                    `;
                    desktopBackground.style.opacity = '0.95';
                    desktopBackground.style.filter = 'brightness(0.9) contrast(1.1)';
                    console.log('æœªæŒ‡å®šæ¡Œé¢èƒŒæ™¯å›¾åƒï¼Œå›é€€åˆ°æ¸å˜ã€‚');
                }
            }


            /**
             * @function updateUIForLanguage
             * @description Updates all UI text based on the current language setting.
             * @returns {void}
             */
            /**
             * @function updateUIForLanguage
         * @description æ ¹æ®å½“å‰è¯­è¨€è®¾ç½®æ›´æ–°æ‰€æœ‰UIæ–‡æœ¬ã€‚
         * @returns {void}
         */
            function updateUIForLanguage() {
                const langData = LANG_CONTENT[currentLanguage];

                // Update Start Menu header profile name
                // æ›´æ–°å¼€å§‹èœå•æ ‡é¢˜æ ä¸ªäººèµ„æ–™åç§°
                const profileNameElement = startMenu.querySelector('[data-lang-key="profileName"]');
                if (profileNameElement) {
                    profileNameElement.textContent = langData.profileName;
                }

                // Update Desktop Icons
                // æ›´æ–°æ¡Œé¢å›¾æ ‡
                document.querySelectorAll('.desktop-icon').forEach(icon => {
                    const langKey = icon.querySelector('.desktop-icon-label').dataset.langKey;
                    if (langKey && langData[langKey]) {
                        icon.querySelector('.desktop-icon-label').textContent = langData[langKey];
                    }
                    // Update data-title for window opening (using current language for display, but keep zh/en for internal)
                    // æ›´æ–°çª—å£æ‰“å¼€çš„data-titleï¼ˆä½¿ç”¨å½“å‰è¯­è¨€æ˜¾ç¤ºï¼Œä½†ä¿æŒzh/enå†…éƒ¨ä½¿ç”¨ï¼‰
                    icon.dataset.title = icon.dataset[`title-${currentLanguage}`];
                });

                // Update Start Menu Items (links and buttons)
                // æ›´æ–°å¼€å§‹èœå•é¡¹ï¼ˆé“¾æ¥å’ŒæŒ‰é’®ï¼‰
                document.querySelectorAll('.start-menu-item').forEach(item => {
                    const langKey = item.dataset.langKey;
                    // Ensure both language versions exist before attempting to access
                    // åœ¨å°è¯•è®¿é—®ä¹‹å‰ï¼Œè¯·ç¡®ä¿ä¸¤ç§è¯­è¨€ç‰ˆæœ¬éƒ½å­˜åœ¨
                    // Changed to safely access properties with optional chaining in case langKey is missing in either language
                    const chineseLabel = LANG_CONTENT.zh?.[langKey] || ''; 
                    const englishLabel = LANG_CONTENT.en?.[langKey] || '';

                    const labelSpan = item.querySelector('.menu-item-label');
                    if (labelSpan) {
                        labelSpan.textContent = `${chineseLabel} [${englishLabel}]`; 
                    }
                });

                // Update Start Menu Footer Buttons (now icon-only)
                // æ›´æ–°å¼€å§‹èœå•åº•éƒ¨æŒ‰é’®ï¼ˆç°åœ¨åªæœ‰å›¾æ ‡ï¼‰
                document.querySelectorAll('.start-menu-footer-button').forEach(button => {
                    const langKey = button.dataset.langKey;
                    if (langKey && langData[langKey]) {
                        button.title = langData[langKey];
                    }
                });
                
                // Re-open/re-render all active windows
                // é‡æ–°æ‰“å¼€/é‡æ–°æ¸²æŸ“æ‰€æœ‰æ´»åŠ¨çª—å£
                reopenAllWindows();
                // Re-render all dynamic assets (icons) for current language
                // ä¸ºå½“å‰è¯­è¨€é‡æ–°æ¸²æŸ“æ‰€æœ‰åŠ¨æ€èµ„äº§ï¼ˆå›¾æ ‡ï¼‰
                renderDynamicAssets();
            }

            /**
             * @function getWindowTitles
             * @description Generates window titles in both Chinese and English based on the section and optional content.
             * @param {string} section - The section identifier (e.g., 'works', 'about', 'work-detail-123').
             * @param {Object} [currentWork=null] - The work object if the section is a work detail.
             * @param {Object} [currentCategory=null] - The service category object if the section is a service category detail.
             * @returns {{chineseTitle: string, englishTitle: string}} An object containing the Chinese and English titles.
             */
            /**
             * @function getWindowTitles
             * @description æ ¹æ®éƒ¨åˆ†å’Œå¯é€‰å†…å®¹ç”Ÿæˆä¸­æ–‡å’Œè‹±æ–‡çª—å£æ ‡é¢˜ã€‚
             * @param {string} section - éƒ¨åˆ†æ ‡è¯†ç¬¦ï¼ˆä¾‹å¦‚ï¼Œ'works'ï¼Œ'about'ï¼Œ'work-detail-123'ï¼‰ã€‚
             * @param {Object} [currentWork=null] - å¦‚æœéƒ¨åˆ†æ˜¯ä½œå“è¯¦æƒ…ï¼Œåˆ™ä¸ºä½œå“å¯¹è±¡ã€‚
             * @param {Object} [currentCategory=null] - å¦‚æœéƒ¨åˆ†æ˜¯æœåŠ¡ç±»åˆ«è¯¦æƒ…ï¼Œåˆ™ä¸ºæœåŠ¡ç±»åˆ«å¯¹è±¡ã€‚
             * @returns {{chineseTitle: string, englishTitle: string}} åŒ…å«ä¸­æ–‡å’Œè‹±æ–‡æ ‡é¢˜çš„å¯¹è±¡ã€‚
             */
            function getWindowTitles(section, currentWork = null, currentCategory = null) {
                let chineseTitle = LANG_CONTENT[currentLanguage]?.unknownModule || 'Untitled Window';
                let englishTitle = LANG_CONTENT['en']?.unknownModule || 'Untitled Window';

                if (section.startsWith('work-detail-') && currentWork) {
                    chineseTitle = currentWork.title + (LANG_CONTENT[currentLanguage]?.worksDetailsSuffix || '');
                    englishTitle = currentWork.title + (LANG_CONTENT['en']?.worksDetailsSuffix || ''); 
                } else if (section.startsWith('service-category-') && currentCategory) {
                    chineseTitle = currentCategory.name;
                    englishTitle = currentCategory.nameEn || currentCategory.name; // Use nameEn if available, otherwise fallback
                    // å¦‚æœnameEnå¯ç”¨åˆ™ä½¿ç”¨ï¼Œå¦åˆ™å›é€€
                } else {
                    // For main sections, use data-title-zh and data-title-en from desktop icons or menu items
                    // å¯¹äºä¸»è¦éƒ¨åˆ†ï¼Œä½¿ç”¨data-title-zhå’Œdata-title-enä»æ¡Œé¢å›¾æ ‡æˆ–èœå•é¡¹
                    const desktopIcon = document.querySelector(`.desktop-icon[data-section="${section}"]`);
                    const startMenuItem = document.querySelector(`.start-menu-item[data-section="${section}"]`);
                    const startMenuFooterButton = document.querySelector(`.start-menu-footer-button[data-section="${section}"]`);
                    const startMenuHeader = document.querySelector('.start-menu-header[data-section="about"]'); // For about section
                    // ç”¨äºå…³äºéƒ¨åˆ†

                    if (desktopIcon) {
                        chineseTitle = desktopIcon.dataset.titleZh;
                        englishTitle = desktopIcon.dataset.titleEn;
                    } else if (startMenuItem) {
                        chineseTitle = LANG_CONTENT['zh'][`${section}MenuItem`]; 
                        englishTitle = LANG_CONTENT['en'][`${section}MenuItem`]; 
                    } else if (startMenuFooterButton) {
                        chineseTitle = LANG_CONTENT['zh'][`${section}MenuItem`]; 
                        englishTitle = LANG_CONTENT['en'][`${section}MenuItem`]; 
                    } else if (section === 'about' && startMenuHeader) {
                        chineseTitle = startMenuHeader.dataset.titleZh;
                        englishTitle = startMenuHeader.dataset.titleEn;
                    } else if (section === 'settings') {
                        chineseTitle = LANG_CONTENT[currentLanguage]?.settings?.title; 
                        englishTitle = LANG_CONTENT['en']?.settings?.title; 
                    } else if (section === 'shutdown') {
                        chineseTitle = LANG_CONTENT[currentLanguage]?.shutdownMenuItem; 
                        englishTitle = LANG_CONTENT['en'][`${section}MenuItem`]; 
                    } else if (section === 'data-core') { // Add new section
                        chineseTitle = LANG_CONTENT[currentLanguage]?.datacoreTitle;
                        englishTitle = LANG_CONTENT['en']?.datacoreTitle;
                    }
                }
                return { chineseTitle, englishTitle };
            }


            /**
             * @function reopenAllWindows
             * @description Re-opens all currently active windows to update their content based on the current language.
             * @returns {Promise<void>}
             */
            /**
             * @function reopenAllWindows
             * @description é‡æ–°æ‰“å¼€æ‰€æœ‰å½“å‰æ´»åŠ¨çª—å£ï¼Œæ ¹æ®å½“å‰è¯­è¨€æ›´æ–°å…¶å†…å®¹ã€‚
             * @returns {Promise<void>}
             */
            async function reopenAllWindows() {
                // Get a snapshot of currently open windows and their original positions/sizes
                // è·å–å½“å‰æ‰“å¼€çª—å£åŠå…¶åŸå§‹ä½ç½®/å¤§å°çš„å¿«ç…§
                const activeWindowsData = [];
                document.querySelectorAll('.os-window').forEach(win => {
                    // Only re-open if not minimized, as minimized state will be re-applied
                    // ä»…åœ¨æœªæœ€å°åŒ–æ—¶é‡æ–°æ‰“å¼€ï¼Œå› ä¸ºæœ€å°åŒ–çŠ¶æ€å°†è¢«é‡æ–°åº”ç”¨
                    if (!win.classList.contains('minimized')) {
                        activeWindowsData.push({
                            section: win.dataset.section,
                            windowId: win.dataset.windowId,
                            originalLeft: win.dataset.originalLeft,
                            originalTop: win.dataset.originalTop,
                            originalWidth: win.dataset.originalWidth,
                            originalHeight: win.dataset.originalHeight,
                            isMaximized: win.classList.contains('maximized')
                        });
                        win.remove(); // Remove old window
                        // ç§»é™¤æ—§çª—å£
                    }
                });
                // Clear taskbar icons for removed windows
                // æ¸…é™¤å·²ç§»é™¤çª—å£çš„ä»»åŠ¡æ å›¾æ ‡
                taskbarIconsContainer.innerHTML = '';

                // Re-open windows one by one
                // é€ä¸€é‡æ–°æ‰“å¼€çª—å£
                for (const winData of activeWindowsData) {
                    const data = await fetchContent(winData.section); // Re-fetch content in new language
                    // é‡æ–°è·å–æ–°è¯­è¨€çš„å†…å®¹
                    let contentHTML = '';
                    let isMarkdown = false;
                    let currentWork = null;
                    let currentCategory = null;
                    let currentImageGallery = null; // For data-core gallery

                    if (winData.section.startsWith('work-detail-')) {
                        const workId = winData.windowId.replace('work-detail-', '');
                        const worksData = await fetchContent('works'); // Re-fetch works data to find the work
                        // é‡æ–°è·å–ä½œå“æ•°æ®ä»¥æŸ¥æ‰¾ä½œå“
                        currentWork = worksData.find(w => w.id === workId);
                    } else if (winData.section.startsWith('service-category-')) {
                        const categoryId = winData.windowId.replace('service-category-', '');
                        // Get category directly from LANG_CONTENT as it's static
                        // ç›´æ¥ä»LANG_CONTENTè·å–ç±»åˆ«ï¼Œå› ä¸ºå®ƒæ˜¯é™æ€çš„
                        currentCategory = LANG_CONTENT[currentLanguage]?.services?.categories.find(cat => cat.id === categoryId);
                    } else if (winData.section === 'data-core') {
                        currentImageGallery = data; // Data for the data-core gallery
                    }

                    const { chineseTitle, englishTitle } = getWindowTitles(winData.section, currentWork, currentCategory);

                    // Re-generate content based on section and new language
                    // æ ¹æ®éƒ¨åˆ†å’Œæ–°è¯­è¨€é‡æ–°ç”Ÿæˆå†…å®¹
                    switch (winData.section) {
                        case 'works':
                            contentHTML = `
                                <h2 class="text-xl font-bold mb-4">${chineseTitle}</h2>
                                <div class="works-grid">
                                    ${data?.map(work => `
                                        <div class="work-card" data-work-id="${work.id}">
                                            <img src="${work.thumbnail}" alt="${work.title}">
                                            <div class="work-card-title">${work.title}</div>
                                            <div class="work-card-category">${work.category}</div>
                                        </div>
                                    `).join('')}
                                </div>
                                <p class="mt-4 opacity-70 text-center">${LANG_CONTENT[currentLanguage]?.worksClickPrompt}</p>
                            `;
                            break;
                        case 'characters':
                            contentHTML = `
                                <h2 class="text-xl font-bold mb-4">${chineseTitle}</h2>
                                <p>${LANG_CONTENT[currentLanguage]?.charactersDescription}</p>
                                <div class="grid grid-cols-2 gap-4 mt-4">
                                    ${data?.map(char => `
                                        <div class="flex flex-col items-center">
                                            <img src="${char.image}" alt="${char.name}" class="rounded-lg shadow-md mb-2">
                                            <p class="font-bold">${char.name}</p>
                                            <p class="text-sm opacity-80 text-center">${char.description}</p>
                                        </div>
                                    `).join('')}
                                </div>
                            `;
                            break;
                        case 'about':
                            contentHTML = LANG_CONTENT[currentLanguage]?.aboutContent;
                            isMarkdown = true;
                            break;
                        case 'services':
                            contentHTML = marked.parse(LANG_CONTENT[currentLanguage]?.services?.description || '') + `
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mt-4">
                                    ${data?.categories.map(category => `
                                        <div class="service-category-card p-4 rounded-lg border border-primary-blue hover:bg-glass-bg cursor-pointer transition-all duration-200" data-category-id="${category.id}">
                                            <h3 class="font-bold text-lg text-light-blue">${category.name}</h3>
                                            <p class="text-sm opacity-80 mt-1">${category.shortDescription}</p>
                                        </div>
                                    `).join('')}
                                </div>
                            `;
                            break;
                        case 'socials':
                            contentHTML = marked.parse(LANG_CONTENT[currentLanguage]?.socialsDescription || '') + `
                                <div class="flex flex-wrap gap-4 mt-4">
                                    ${data?.links.map(link => `
                                        <a href="${link.url}" target="_blank" class="flex items-center space-x-2 hover:text-primary-blue transition-colors">
                                            <span class="icon-placeholder" data-asset-key="${link.iconAssetKey}"></span>
                                            <span>${link.name}</span>
                                        </a>
                                    `).join('')}
                                </div>
                            `;
                            break;
                        case 'data-core': // New case for data-core window
                            if (currentImageGallery && currentImageGallery.length > 0) {
                                contentHTML = `
                                    <h2 class="text-xl font-bold mb-4">${chineseTitle}</h2>
                                    <p>${LANG_CONTENT[currentLanguage]?.datacoreDescription}</p>
                                    <div class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4 mt-4">
                                        ${currentImageGallery.map(image => `
                                            <div class="flex flex-col items-center p-2 rounded-lg bg-white bg-opacity-5 hover:bg-opacity-10 transition-colors">
                                                <img src="${image.url}" alt="${image.alt}" class="w-full h-32 object-cover rounded-md mb-2 cursor-pointer" data-full-image="${image.fullSizeUrl || image.url}">
                                                <p class="text-sm text-center opacity-90">${image.alt}</p>
                                            </div>
                                        `).join('')}
                                    </div>
                                    <div id="image-modal" class="hidden fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 p-4">
                                        <div class="relative max-w-4xl max-h-full">
                                            <img id="modal-image" src="" alt="Full size image" class="max-w-full max-h-[80vh] object-contain rounded-lg shadow-xl">
                                            <button id="close-modal" class="absolute top-4 right-4 text-white text-3xl font-bold p-2 rounded-full bg-red-600 hover:bg-red-700 transition-colors">&times;</button>
                                        </div>
                                    </div>
                                `;
                            } else {
                                contentHTML = `
                                    <h2 class="text-xl font-bold mb-4">${chineseTitle}</h2>
                                    <p>${LANG_CONTENT[currentLanguage]?.datacoreEmpty}</p>
                                `;
                            }
                            break;
                        case 'settings': // New case for settings window
                            contentHTML = marked.parse(LANG_CONTENT[currentLanguage]?.settings?.description || '') + `
                                <div class="flex flex-col gap-4 mt-4">
                                    ${data?.options.map(option => {
                                        const labelText = LANG_CONTENT[currentLanguage]?.settings?.options.find(opt => opt.id === option.id)?.label || option.label; 
                                        if (option.type === 'toggle') {
                                            return `
                                                <div class="flex items-center justify-between p-3 rounded-lg bg-white bg-opacity-5 border border-white border-opacity-20">
                                                    <label for="${option.id}" class="text-lg">${labelText}</label>
                                                    <label class="toggle-switch">
                                                        <input type="checkbox" id="${option.id}" ${option.checked ? 'checked' : ''} ${option.disabled ? 'disabled' : ''}>
                                                        <span class="toggle-slider round"></span>
                                                    </label>
                                                </div>
                                            `;
                                        } else if (option.type === 'language-toggle') {
                                            return `
                                                <div class="flex items-center justify-between p-3 rounded-lg bg-white bg-opacity-5 border border-white border-opacity-20">
                                                    <span class="text-lg">${labelText}</span>
                                                    <label class="toggle-switch">
                                                        <input type="checkbox" id="${option.id}" ${currentLanguage === 'en' ? 'checked' : ''}>
                                                        <span class="toggle-slider round"></span>
                                                    </label>
                                                </div>
                                            `;
                                        } else if (option.type === 'button') {
                                            return `
                                                <button id="${option.id}" class="py-2 px-4 rounded-lg bg-primary-blue hover:bg-dark-blue transition-colors text-white font-bold ${option.disabled ? 'opacity-50 cursor-not-allowed' : ''}" ${option.disabled ? 'disabled' : ''}>
                                                    ${labelText}
                                                </button>
                                            `;
                                        }
                                        return '';
                                    }).join('')}
                                </div>
                            `;
                            break;
                        case 'service-category-character-modeling-category': 
                        case 'service-category-poster-design-category':
                            contentHTML = currentCategory ? currentCategory.detailContent : `<p class="text-xl text-red-400">${LANG_CONTENT[currentLanguage]?.unknownModule}</p>`;
                            isMarkdown = true;
                            break;
                        case 'work-detail-' + winData.windowId.replace('work-detail-', ''):
                            if (currentWork) {
                                let currentImageIndex = 0; // This state is lost on re-render, will default to 0
                                // æ­¤çŠ¶æ€åœ¨é‡æ–°æ¸²æŸ“æ—¶ä¸¢å¤±ï¼Œå°†é»˜è®¤ä¸º 0
                                contentHTML = `
                                    <div class="work-detail-content">
                                        <div class="gallery-main-image-container">
                                            <img src="${currentWork.images[currentImageIndex]}" alt="${currentWork.title}" class="gallery-main-image">
                                            ${currentWork.images.length > 1 ? `
                                                <button class="gallery-nav-button prev" data-direction="prev"><span class="icon-placeholder" data-asset-key="icon_chevron_left"></span></button>
                                                <button class="gallery-nav-button next" data-direction="next"><span class="icon-placeholder" data-asset-key="icon_chevron_right"></span></button>
                                            ` : ''}
                                        </div>
                                        <div class="gallery-thumbnails">
                                            ${currentWork.images.map((imgSrc, index) => `
                                                <img src="${imgSrc}" alt="${currentWork.title} ç¼©ç•¥å›¾" class="gallery-thumbnail ${index === currentImageIndex ? 'active' : ''}" data-index="${index}">
                                            `).join('')}
                                        </div>
                                        <h3>${currentWork.title}</h3>
                                        <p class="text-sm opacity-90 mb-2">${currentWork.category}</p>
                                        <p>${currentWork.description}</p>
                                        <div class="flex flex-wrap gap-2 mt-4">
                                            ${currentWork.tags.map(tag => `<span class="category-tag">${tag}</span>`).join('')}
                                        </div>
                                    </div>
                                `;
                            } else {
                                contentHTML = `<p class="text-xl text-red-400">${LANG_CONTENT[currentLanguage]?.unknownModule}</p>`;
                            }
                            break;
                        default:
                            contentHTML = `<p class="text-xl text-red-400">${LANG_CONTENT[currentLanguage]?.unknownModule || 'Unknown Module'}</p>`;
                    }

                    // Re-open the window with its original properties
                    // ä»¥å…¶åŸå§‹å±æ€§é‡æ–°æ‰“å¼€çª—å£
                    const newWindowElement = await openWindow(winData.section, chineseTitle, englishTitle, contentHTML, winData.windowId, {
                        left: winData.originalLeft,
                        top: winData.originalTop,
                        width: winData.originalWidth,
                        height: winData.originalHeight
                    }, isMarkdown);

                    if (winData.isMaximized) {
                        newWindowElement.classList.add('maximized');
                        // Re-apply maximized styles if necessary, or let CSS handle it
                        // å¦‚æœéœ€è¦ï¼Œé‡æ–°åº”ç”¨æœ€å¤§åŒ–æ ·å¼ï¼Œæˆ–è€…è®©CSSå¤„ç†
                        newWindowElement.style.borderRadius = '0';
                        newWindowElement.style.boxShadow = 'none';
                    }
                }
            }


            // --- æ¡Œé¢å›¾æ ‡å®šä½é€»è¾‘ ---
            // --- Desktop Icon Positioning Logic ---
            /**
             * @function positionDesktopIcons
             * @description Positions desktop icons in a grid layout within the main desktop area.
             * @returns {void}
             */
            /**
             * @function positionDesktopIcons
             * @description åœ¨ä¸»æ¡Œé¢åŒºåŸŸå†…ä»¥ç½‘æ ¼å¸ƒå±€å®šä½æ¡Œé¢å›¾æ ‡ã€‚
             * @returns {void}
             */
            function positionDesktopIcons() {
                const iconWidth = 80; // Defined in CSS .desktop-icon width
                // åœ¨CSS .desktop-iconå®½åº¦ä¸­å®šä¹‰
                const iconHeight = 100; // Approximate height including label and padding
                // åŒ…æ‹¬æ ‡ç­¾å’Œå¡«å……çš„è¿‘ä¼¼é«˜åº¦
                const paddingX = 20; // Horizontal padding from desktop edge
                // æ¡Œé¢è¾¹ç¼˜çš„æ°´å¹³å¡«å……
                const paddingY = 20; // Vertical padding from desktop edge
                // æ¡Œé¢è¾¹ç¼˜çš„å‚ç›´å¡«å……
                const gapX = 20; // Gap between icons horizontally
                // å›¾æ ‡ä¹‹é—´çš„æ°´å¹³é—´è·
                const gapY = 20; // Gap between icons vertically
                // å›¾æ ‡ä¹‹é—´çš„å‚ç›´é—´è·

                const icons = Array.from(desktopIconsContainer.children);
                let currentX = paddingX;
                let currentY = paddingY;
                let column = 0;

                icons.forEach((icon, index) => {
                    // Check if icon fits in current column, otherwise move to next column
                    // æ£€æŸ¥å›¾æ ‡æ˜¯å¦é€‚åˆå½“å‰åˆ—ï¼Œå¦åˆ™ç§»åŠ¨åˆ°ä¸‹ä¸€åˆ—
                    if (currentY + iconHeight > mainDesktopArea.clientHeight - (paddingY + 10)) { // Add small buffer for taskbar
                        // ä¸ºä»»åŠ¡æ æ·»åŠ å°ç¼“å†²åŒº
                        column++;
                        currentX = paddingX + (column * (iconWidth + gapX));
                        currentY = paddingY;
                    }

                    icon.style.left = `${currentX}px`;
                    icon.style.top = `${currentY}px`;
                    currentY += (iconHeight + gapY);
                });
            }

            // Call positioning function initially and on window resize
            // åˆå§‹åŒ–å’Œçª—å£å¤§å°è°ƒæ•´æ—¶è°ƒç”¨å®šä½å‡½æ•°
            positionDesktopIcons();
            window.addEventListener('resize', positionDesktopIcons);

            console.log('æ¡Œé¢å›¾æ ‡å®šä½é€»è¾‘å·²åˆå§‹åŒ–ã€‚');

            // --- Mock Data Fetching (Simulating Headless CMS API Calls) ---
            // --- æ¨¡æ‹Ÿæ•°æ®è·å–ï¼ˆæ¨¡æ‹Ÿæ— å¤´CMS APIè°ƒç”¨ï¼‰ ---
            // In a real application, these would be actual fetch() calls to your CMS API endpoints.
            // åœ¨å®é™…åº”ç”¨ç¨‹åºä¸­ï¼Œè¿™äº›å°†æ˜¯å¯¹æ‚¨çš„CMS APIç«¯ç‚¹çš„å®é™…fetch()è°ƒç”¨ã€‚

            /**
             * @function fetchContent
             * @description Simulates fetching content for a given section. In a real app, this would be an API call.
             * @param {string} section - The section identifier (e.g., 'works', 'about').
             * @returns {Promise<Object|null>} A promise that resolves with the content data or null if not found.
             */
            /**
             * @function fetchContent
             * @description æ¨¡æ‹Ÿè·å–ç»™å®šéƒ¨åˆ†çš„å†…å®¹ã€‚åœ¨å®é™…åº”ç”¨ç¨‹åºä¸­ï¼Œè¿™å°†æ˜¯ä¸€ä¸ªAPIè°ƒç”¨ã€‚
             * @param {string} section - éƒ¨åˆ†æ ‡è¯†ç¬¦ï¼ˆä¾‹å¦‚ï¼Œ'works'ï¼Œ'about'ï¼‰ã€‚
             * @returns {Promise<Object|null>} è§£æä¸ºå†…å®¹æ•°æ®æˆ–å¦‚æœæœªæ‰¾åˆ°åˆ™ä¸ºnullçš„Promiseã€‚
             */
            async function fetchContent(section) {
                console.log(`æ­£åœ¨è·å– ${currentLanguage} è¯­è¨€çš„ ${section} å†…å®¹...`);
                // Simulate network delay
                // æ¨¡æ‹Ÿç½‘ç»œå»¶è¿Ÿ
                await new Promise(resolve => setTimeout(resolve, 300)); 

                const langData = LANG_CONTENT[currentLanguage];
                let data = null;

                switch (section) {
                    case 'works':
                        data = [
                            {
                                id: 'work-001',
                                title: 'åœ°ä¸‹ä¿±ä¹éƒ¨åœºæ™¯',
                                category: 'åœºæ™¯è®¾è®¡ / PSXé£æ ¼',
                                // ä½¿ç”¨ç›¸å¯¹è·¯å¾„
                                thumbnail: './assets/works/work_001_thumbnail.png', 
                                images: [
                                    './assets/works/work_001_full_1.png', // ä½¿ç”¨ç›¸å¯¹è·¯å¾„
                                    './assets/works/work_001_full_2.png', // ä½¿ç”¨ç›¸å¯¹è·¯å¾„
                                    './assets/works/work_001_full_3.png'  // ä½¿ç”¨ç›¸å¯¹è·¯å¾„
                                ],
                                description: 'ä¸€ä¸ªå……æ»¡éœ“è™¹ç¯å’Œä½å¤šè¾¹å½¢å…ƒç´ çš„åœ°ä¸‹ä¿±ä¹éƒ¨åœºæ™¯ï¼Œèåˆäº†Y2Kå’Œæ•…éšœç¾å­¦ã€‚',
                                tags: ['åœºæ™¯', 'PSX', 'Y2K', 'Blender']
                            },
                            {
                                id: 'work-002',
                                title: 'èµ›åšæœ‹å…‹è§’è‰² - KAI',
                                category: 'è§’è‰²è®¾è®¡ / Lowpoly',
                                // ä½¿ç”¨ç›¸å¯¹è·¯å¾„
                                thumbnail: './assets/works/work_002_thumbnail.png', 
                                images: [
                                    './assets/works/work_002_full_1.png', // ä½¿ç”¨ç›¸å¯¹è·¯å¾„
                                    './assets/works/work_002_full_2.png', // ä½¿ç”¨ç›¸å¯¹è·¯å¾„
                                    './assets/works/work_002_full_3.png'  // ä½¿ç”¨ç›¸å¯¹è·¯å¾„
                                ],
                                description: 'ä¸€ä¸ªå…·æœ‰å¤å¤ç§‘å¹»æ„Ÿçš„èµ›åšæœ‹å…‹è§’è‰²ï¼Œé‡‡ç”¨ä½å¤šè¾¹å½¢å»ºæ¨¡å’Œåƒç´ è´¨æ„Ÿçº¹ç†ã€‚',
                                tags: ['è§’è‰²', 'Lowpoly', 'èµ›åšæœ‹K', 'Substance Painter']
                            }
                        ];
                        break;
                    case 'characters':
                        data = [
                            {
                                id: 'char-001',
                                name: 'æ˜Ÿé™…æ¼«æ¸¸è€…',
                                description: 'ä¸€ä¸ªå­¤ç‹¬çš„æ˜Ÿé™…æ—…è¡Œè€…ï¼Œæ¢ç´¢å®‡å®™æ·±å¤„çš„å¥¥ç§˜ã€‚PSXé£æ ¼ï¼Œä½å¤šè¾¹å½¢è®¾è®¡ã€‚',
                                // 
                                image: './assets/characters/char_001_image.png' 
                            },
                            {
                                id: 'char-002',
                                name: 'éƒ½å¸‚å¿è€…',
                                description: 'ç©¿æ¢­äºéœ“è™¹éƒ½å¸‚é˜´å½±ä¸­çš„ç¥ç§˜å¿è€…ã€‚',
                                // 
                                image: './assets/characters/char_002_image.png' 
                            }
                        ];
                        break;
                    case 'about':
                        data = {
                            title: langData.aboutTitle,
                            content: langData.aboutContent
                        };
                        break;
                    case 'services':
                        data = {
                            title: langData.services.title,
                            description: langData.services.description,
                            categories: langData.services.categories
                        };
                        break;
                    case 'socials':
                        data = {
                            title: langData.socialsTitle,
                            description: langData.socialsDescription,
                            links: langData.socialsLinks
                        };
                        break;
                    case 'data-core': // Fetch content for the new Data Core app
                        data = [
                            // ç¤ºä¾‹çµæ„Ÿå›¾ç‰‡ï¼Œè¯·æ›¿æ¢ä¸ºæ‚¨çš„å®é™…å›¾ç‰‡ URL æˆ– Base64
                            { url: './assets/data-core/inspiration_1_thumb.jpg', alt: 'èµ›åšæœ‹å…‹åŸå¸‚æ™¯è§‚', fullSizeUrl: './assets/data-core/inspiration_1_full.jpg' },
                            { url: './assets/data-core/inspiration_2_thumb.jpg', alt: 'æ•…éšœè‰ºæœ¯è‚–åƒ', fullSizeUrl: './assets/data-core/inspiration_2_full.jpg' },
                            { url: './assets/data-core/inspiration_3_thumb.jpg', alt: 'Y2Kç¾å­¦è®¾è®¡', fullSizeUrl: './assets/data-core/inspiration_3_full.jpg' },
                            { url: './assets/data-core/inspiration_4_thumb.jpg', alt: 'PSXé£æ ¼åœºæ™¯', fullSizeUrl: './assets/data-core/inspiration_4_full.jpg' },
                            { url: './assets/data-core/inspiration_5_thumb.jpg', alt: 'éœ“è™¹ç¯ç®¡è‰ºæœ¯', fullSizeUrl: './assets/data-core/inspiration_5_full.jpg' },
                            { url: './assets/data-core/inspiration_6_thumb.jpg', alt: 'ç§‘æŠ€æ„ŸUIç•Œé¢', fullSizeUrl: './assets/data-core/inspiration_6_full.jpg' },
                            { url: './assets/data-core/inspiration_7_thumb.jpg', alt: 'å¤å¤æœªæ¥ä¸»ä¹‰', fullSizeUrl: './assets/data-core/inspiration_7_full.jpg' },
                            { url: './assets/data-core/inspiration_8_thumb.jpg', alt: 'æ•°å­—æ•…éšœçº¹ç†', fullSizeUrl: './assets/data-core/inspiration_8_full.jpg' }
                        ];
                        break;
                    case 'settings': // New case for settings
                        data = langData.settings;
                        break;
                    case 'shutdown':
                        data = null; // No specific data needed for shutdown
                        break;
                    default:
                        data = null;
                }
                console.log(`å·²è·å– ${section} çš„å†…å®¹:`, data);
                return data;
            }

            /**
             * @function setActiveTaskbarIcon
             * @description Sets the active state for a taskbar icon.
             * @param {string} windowId - The ID of the window whose taskbar icon should be set active.
             * @returns {void}
             */
            function setActiveTaskbarIcon(windowId) {
                document.querySelectorAll('.taskbar-minimized-icon').forEach(icon => {
                    if (icon.dataset.windowId === windowId) {
                        icon.classList.add('active');
                    } else {
                        icon.classList.remove('active');
                    }
                });
            }

            /**
             * @function bringToFront
             * @description Brings a specified window element to the front of the stacking order.
             * @param {HTMLElement} windowElement - The window HTML element to bring to front.
             * @returns {void}
             */
            function bringToFront(windowElement) {
                highestZIndex++;
                windowElement.style.zIndex = highestZIndex;
                console.log(`çª—å£ "${windowElement.dataset.windowId}" å·²ç½®äºæœ€å‰ã€‚æ–°z-index: ${highestZIndex}`);
                setActiveTaskbarIcon(windowElement.dataset.windowId); // Set its taskbar icon as active
                // Also set window title bar to active style
                document.querySelectorAll('.os-window-title-bar').forEach(bar => bar.classList.add('inactive'));
                const titleBar = windowElement.querySelector('.os-window-title-bar');
                if (titleBar) {
                    titleBar.classList.remove('inactive');
                }
                // Update status bar text to "Ready" when brought to front
                const statusBarTextElement = windowElement.querySelector('.os-window-status-bar .status-text');
                if (statusBarTextElement) {
                    statusBarTextElement.textContent = LANG_CONTENT[currentLanguage].statusBarStatusReady;
                }
            }
            /**
             * @function openWindow
             * @description Creates and opens a new window or brings an existing one to the front.
             * @param {string} section - The section identifier this window belongs to.
             * @param {string} chineseTitle - The Chinese title for the window.
             * @param {string} englishTitle - The English title for the window.
             * @param {string} contentHTML - The HTML content to display inside the window.
             * @param {string} [windowId=section] - A unique ID for this specific window instance.
             * @param {Object} [initialProps={}] - Initial position and size properties (left, top, width, height).
             * @param {boolean} [isMarkdown=false] - Whether the contentHTML should be parsed as Markdown.
             * @returns {Promise<HTMLElement>} A promise that resolves with the created or existing window element.
             */
            async function openWindow(section, chineseTitle, englishTitle, contentHTML, windowId = section, initialProps = {}, isMarkdown = false) {
                console.log(`å°è¯•æ‰“å¼€çª—å£ï¼š${chineseTitle} [${englishTitle}] (éƒ¨åˆ†ï¼š${section}ï¼ŒIDï¼š${windowId}ï¼ŒMarkdownï¼š${isMarkdown}`);

                // Check if a window for this section already exists
                let existingWindow = document.querySelector(`.os-window[data-window-id="${windowId}"]`);
                if (existingWindow) {
                    bringToFront(existingWindow);
                    // If it exists and is minimized, restore it
                    if (existingWindow.classList.contains('minimized')) {
                        restoreWindow(existingWindow);
                    }
                    return existingWindow; // Return existing window
                }

                const windowElement = document.createElement('div');
                windowElement.classList.add('os-window');
                windowElement.dataset.section = section; // Store section for identification
                windowElement.dataset.windowId = windowId; // Unique ID for this specific window instance
                
                // Store initial position and size for restore functionality
                const desktopWidth = mainDesktopArea.offsetWidth;
                const desktopHeight = mainDesktopArea.offsetHeight;

                let defaultWidth, defaultHeight, offsetX, offsetY;

                if (window.innerWidth <= 768) { // Mobile-specific sizing
                    defaultWidth = window.innerWidth * 0.95;
                    defaultHeight = window.innerHeight * 0.8;
                    offsetX = (window.innerWidth - defaultWidth) / 2;
                    offsetY = (window.innerHeight - defaultHeight) / 2 - (parseFloat(getComputedStyle(document.documentElement).getPropertyValue('--taskbar-height')) || 48) / 2;
                } else { // Desktop sizing
                    defaultWidth = Math.min(desktopWidth * 0.7, 800); // Max 800px or 70%
                    defaultHeight = Math.min(desktopHeight * 0.7, 600); // Max 600px or 70%
                    // Position new windows slightly offset from each other
                    const openWindows = document.querySelectorAll('.os-window:not(.minimized)');
                    offsetX = 50 * (openWindows.length % 5); // Max 5 offsets before repeating
                    offsetY = 50 * (openWindows.length % 5);
                    offsetX += (desktopWidth / 2 - defaultWidth / 2);
                    offsetY += (desktopHeight / 2 - defaultHeight / 2);
                }


                windowElement.style.width = initialProps.width || `${defaultWidth}px`;
                windowElement.style.height = initialProps.height || `${defaultHeight}px`;
                windowElement.style.left = initialProps.left || `${offsetX}px`;
                windowElement.style.top = initialProps.top || `${offsetY}px`;

                // Ensure window is within bounds after offset
                if (parseFloat(windowElement.style.left) + parseFloat(windowElement.style.width) > desktopWidth) {
                    windowElement.style.left = `${desktopWidth - parseFloat(windowElement.style.width) - 20}px`;
                }
                if (parseFloat(windowElement.style.top) + parseFloat(windowElement.style.height) > desktopHeight) {
                    windowElement.style.top = `${desktopHeight - parseFloat(windowElement.style.height) - 20}px`;
                }

                // Store current position and size for restoration
                windowElement.dataset.originalLeft = windowElement.style.left;
                windowElement.dataset.originalTop = windowElement.style.top;
                windowElement.dataset.originalWidth = windowElement.style.width;
                windowElement.dataset.originalHeight = windowElement.style.height;


                bringToFront(windowElement); // Bring new window to front
                console.log(`æ–°çª—å£ "${windowId}" åˆ›å»ºäº left: ${windowElement.style.left}, top: ${windowElement.style.top}`);

                // Parse Markdown if required
                const finalContent = isMarkdown ? marked.parse(contentHTML) : contentHTML;
                const contentClass = isMarkdown ? 'markdown-content' : '';

                // Construct the full title bar text
                const fullTitle = `${chineseTitle} [${englishTitle}]`;
                windowElement.dataset.windowTitle = fullTitle; // Store the full title in dataset

                // Construct window HTML dynamically, using data-asset-key for icons
                windowElement.innerHTML = `
                    <div class="os-window-title-bar">
                        <div class="os-window-title-content">
                            <span class="icon-placeholder" data-asset-key="icon_mazko_logo"></span>
                            <span class="os-window-title">${fullTitle}</span>
                        </div>
                        <div class="os-window-controls">
                            <div class="control-button minimize" title="æœ€å°åŒ–">
                                <span class="icon-placeholder" data-asset-key="icon_minus"></span>
                            </div>
                            <div class="control-button maximize" title="æœ€å¤§åŒ–">
                                <span class="icon-placeholder" data-asset-key="icon_square"></span>
                            </div>
                            <div class="control-button close" title="å…³é—­">
                                <span class="icon-placeholder" data-asset-key="icon_times"></span>
                            </div>
                        </div>
                    </div>
                    <div class="os-window-content ${contentClass}">
                        ${finalContent}
                    </div>
                    <div class="os-window-status-bar">
                        <span class="status-text">${LANG_CONTENT[currentLanguage].statusBarStatusReady}</span>
                        <span class="system-branding-text">${LANG_CONTENT[currentLanguage].statusBarBranding}</span>
                    </div>
                `;

                mainDesktopArea.appendChild(windowElement); // Append to main desktop area
                console.log(`çª—å£ "${windowId}" å·²é™„åŠ åˆ°ä¸»æ¡Œé¢åŒºåŸŸã€‚`);
                renderDynamicAssets(); // Render icons for the newly created window

                // Add to map for language switching
                openWindowsMap.set(windowId, {
                    section: section,
                    chineseTitle: chineseTitle, // Store both for re-rendering
                    englishTitle: englishTitle,
                    windowElement: windowElement
                });

                // Immediately create and add taskbar icon for the new window
                createTaskbarIcon(windowElement, chineseTitle, windowId);


                // Make window draggable
                const titleBar = windowElement.querySelector('.os-window-title-bar');
                const statusBarTextElement = windowElement.querySelector('.os-window-status-bar .status-text'); // Get status text element
                let isDraggingWindow = false; // Renamed to avoid conflict with desktop icon dragging
                let offsetXWindow, offsetYWindow;

                if (titleBar) { // Ensure titleBar exists
                    titleBar.addEventListener('mousedown', (e) => {
                        isDraggingWindow = true;
                        offsetXWindow = e.clientX - windowElement.getBoundingClientRect().left;
                        offsetYWindow = e.clientY - windowElement.getBoundingClientRect().top;
                        titleBar.style.cursor = 'grabbing'; // Changed to grab cursor
                        bringToFront(windowElement); // Bring to front when dragging starts
                        if (statusBarTextElement) { // Update status text
                            statusBarTextElement.textContent = LANG_CONTENT[currentLanguage].statusBarStatusDragging;
                        }
                        console.log(`å¼€å§‹æ‹–åŠ¨çª—å£ "${windowId}"ã€‚`);
                    });
                } else {
                    console.error(`æœªæ‰¾åˆ°çª—å£ "${windowId}" çš„æ ‡é¢˜æ ã€‚æ‹–åŠ¨å·²ç¦ç”¨ã€‚`);
                }

                document.addEventListener('mousemove', (e) => {
                    if (!isDraggingWindow) return;
                    let newX = e.clientX - offsetXWindow;
                    let newY = e.clientY - offsetYWindow;

                    // Boundary checks for dragging within mainDesktopArea
                    const parentRect = mainDesktopArea.getBoundingClientRect();
                    const windowRect = windowElement.getBoundingClientRect();

                    if (newX < 0) newX = 0;
                    if (newY < 0) newY = 0;
                    if (newX + windowRect.width > parentRect.width) newX = parentRect.width - windowRect.width;
                    if (newY + windowRect.height > parentRect.height) newY = parentRect.height - windowRect.height;

                    windowElement.style.left = `${newX}px`;
                    windowElement.style.top = `${newY}px`;
                });

                document.addEventListener('mouseup', () => {
                    if (isDraggingWindow) {
                        isDraggingWindow = false;
                        if (titleBar) titleBar.style.cursor = 'grab'; // Changed to grab cursor
                        if (statusBarTextElement) { // Reset status text
                            statusBarTextElement.textContent = LANG_CONTENT[currentLanguage].statusBarStatusReady;
                        }
                        console.log(`åœæ­¢æ‹–åŠ¨çª—å£ "${windowId}"ã€‚`);
                    }
                });

                // Handle window control buttons
                const closeButton = windowElement.querySelector('.control-button.close');
                const minimizeButton = windowElement.querySelector('.control-button.minimize');
                const maximizeButton = windowElement.querySelector('.control-button.maximize');

                if (closeButton) {
                    closeButton.addEventListener('click', () => {
                        windowElement.remove();
                        openWindowsMap.delete(windowId); // Remove from map
                        // Remove taskbar icon if it exists
                        const taskbarIcon = document.querySelector(`.taskbar-minimized-icon[data-window-id="${windowId}"]`);
                        if (taskbarIcon) {
                            taskbarIcon.remove();
                        }
                        console.log(`çª—å£ "${windowId}" å·²å…³é—­ã€‚`);
                    });
                } else {
                    console.error(`æœªæ‰¾åˆ°çª—å£ "${windowId}" çš„å…³é—­æŒ‰é’®ã€‚`);
                }

                if (minimizeButton) {
                    minimizeButton.addEventListener('click', () => {
                        minimizeWindow(windowElement, chineseTitle, windowId);
                    });
                }
                if (maximizeButton) {
                    maximizeButton.addEventListener('click', () => {
                        toggleMaximizeWindow(windowElement);
                    });
                }

                // Bring to front on click anywhere on the window
                windowElement.addEventListener('mousedown', () => {
                    bringToFront(windowElement);
                });

                // Event listeners for image modal in Data Core app
                if (section === 'data-core') {
                    const imageModal = windowElement.querySelector('#image-modal');
                    const modalImage = windowElement.querySelector('#modal-image');
                    const closeModalButton = windowElement.querySelector('#close-modal');

                    windowElement.querySelectorAll('.os-window-content img[data-full-image]').forEach(img => {
                        img.addEventListener('click', (e) => {
                            modalImage.src = e.target.dataset.fullImage;
                            imageModal.classList.remove('hidden');
                        });
                    });

                    if (closeModalButton) {
                        closeModalButton.addEventListener('click', () => {
                            imageModal.classList.add('hidden');
                            modalImage.src = ''; // Clear image to save memory
                        });
                    }

                    // Close modal when clicking outside the image
                    if (imageModal) {
                        imageModal.addEventListener('click', (e) => {
                            if (e.target === imageModal) {
                                imageModal.classList.add('hidden');
                                modalImage.src = '';
                            }
                        });
                    }
                }

                return windowElement; // Return the newly created window element
            }

            /**
             * @function createTaskbarIcon
             * @description Creates and appends a taskbar icon for a given window.
             * @param {HTMLElement} windowElement - The window HTML element for which to create an icon.
             * @param {string} title - The title of the window (used for display in taskbar).
             * @param {string} windowId - The unique ID of the window.
             * @returns {void}
             */
            function createTaskbarIcon(windowElement, title, windowId) {
                console.log('createTaskbarIcon received title:', title, 'type:', typeof title, 'windowId:', windowId); // Debug log
                let taskbarIcon = document.querySelector(`.taskbar-minimized-icon[data-window-id="${windowId}"]`);
                if (!taskbarIcon) {
                    taskbarIcon = document.createElement('div');
                    taskbarIcon.classList.add('taskbar-minimized-icon');
                    taskbarIcon.dataset.windowId = windowId;

                    let displayTitle = String(title || 'Untitled Window'); // Start with the provided title, ensure it's a string and has a fallback

                    const langData = LANG_CONTENT[currentLanguage];
                    const section = windowElement.dataset.section;

                    if (langData && section) { // Ensure both langData and section are defined
                        if (langData[`${section}MenuItem`]) {
                            displayTitle = langData[`${section}MenuItem`]; // Use the simplified menu item label
                        } else if (section === 'about' && langData.mazkoExeIcon) {
                            displayTitle = langData.mazkoExeIcon;
                        } else if (section.startsWith('service-category-')) {
                            const categoryId = section.replace('service-category-', '');
                            const category = langData.services?.categories?.find(cat => cat.id === categoryId); // Use optional chaining
                            if (category?.name) {
                                displayTitle = category.name;
                            }
                        } else if (section.startsWith('work-detail-')) {
                            // For work-detail windows, the 'title' parameter already contains the full title
                            // which is usually in the format "Work Title [English Title]" or similar.
                            // We need to trim the "[English Title]" part if present.
                            const regex = /^(.*?)\s*\[.*?\]$/;
                            const match = String(title).match(regex);
                            if (match && match[1]) {
                                displayTitle = match[1].trim();
                            } else {
                                displayTitle = String(title).trim();
                            }
                        } else if (section === 'data-core') { // New logic for data-core
                            displayTitle = langData.datacoreIcon; // Use the short icon name
                        }
                    }
                    // Final fallback to ensure displayTitle is always a non-empty string and trimmed
                    displayTitle = displayTitle.trim() || 'Untitled';

                    taskbarIcon.innerHTML = `<span class="icon-placeholder" data-asset-key="icon_window_restore"></span> <span>${displayTitle}</span>`;
                    taskbarIconsContainer.appendChild(taskbarIcon);
                    renderDynamicAssets(); // Render icons for the newly created taskbar icon

                    taskbarIcon.addEventListener('click', () => {
                        restoreWindow(windowElement);
                    });
                }
                setActiveTaskbarIcon(windowId); // Set its taskbar icon as active
            }

            /**
             * @function minimizeWindow
             * @description Minimizes a given window.
             * @param {HTMLElement} windowElement - The window HTML element to minimize.
             * @param {string} title - The title of the window.
             * @param {string} windowId - The ID of the window.
             * @returns {void}
             */
            function minimizeWindow(windowElement, title, windowId) {
                windowElement.classList.add('minimized');
                console.log(`çª—å£ "${windowId}" å·²æœ€å°åŒ–ã€‚`);
                // Ensure taskbar icon is active even when minimized
                setActiveTaskbarIcon(windowId); 
            }

            /**
             * @function restoreWindow
             * @description Restores a minimized or maximized window to its original size and position.
             * @param {HTMLElement} windowElement - The window HTML element to restore.
             * @returns {void}
             */
            function restoreWindow(windowElement) {
                windowElement.classList.remove('minimized');
                windowElement.classList.remove('maximized'); // Ensure it's not maximized either
                windowElement.style.width = windowElement.dataset.originalWidth;
                windowElement.style.height = windowElement.dataset.originalHeight;
                windowElement.style.left = windowElement.dataset.originalLeft;
                windowElement.style.top = windowElement.dataset.originalTop;
                windowElement.style.borderRadius = '20px'; // Restore border-radius for Aero
                /* Adjusted shadow for restored window to match unified border */
                // Corrected: Use camelCase for CSS property `boxShadow`
                windowElement.style.boxShadow = '0 10px 40px var(--fa-glow-blue), inset 0 0 25px rgba(255, 255, 255, 0.4)'; 
                bringToFront(windowElement);
                console.log(`çª—å£ "${windowElement.dataset.windowId}" å·²æ¢å¤ã€‚`);
                setActiveTaskbarIcon(windowElement.dataset.windowId); // Set its taskbar icon as active
            }

            /**
             * @function toggleMaximizeWindow
             * @description Toggles the maximized state of a window.
             * @param {HTMLElement} windowElement - The window HTML element to toggle.
             * @returns {void}
             */
            function toggleMaximizeWindow(windowElement) {
                if (windowElement.classList.contains('maximized')) {
                    // Restore
                    windowElement.classList.remove('maximized');
                    windowElement.style.width = windowElement.dataset.originalWidth;
                    windowElement.style.height = windowElement.dataset.originalHeight;
                    windowElement.style.left = windowElement.dataset.originalLeft;
                    windowElement.style.top = windowElement.dataset.originalTop;
                    windowElement.style.borderRadius = '20px'; // Restore border-radius for Aero
                    /* Adjusted shadow for restored window to match unified border */
                    // Corrected: Use camelCase for CSS property `boxShadow`
                    windowElement.style.boxShadow = '0 10px 40px var(--fa-glow-blue), inset 0 0 25px rgba(255, 255, 255, 0.4)'; 
                    console.log(`çª—å£ "${windowElement.dataset.windowId}" å·²ä»æœ€å¤§åŒ–æ¢å¤ã€‚`);
                } else {
                    // Maximize
                    // Save current position and size before maximizing (if not already saved)
                    if (!windowElement.dataset.originalLeft) {
                        windowElement.dataset.originalLeft = windowElement.style.left;
                        windowElement.dataset.originalTop = windowElement.style.top;
                        windowElement.dataset.originalWidth = windowElement.style.width;
                        windowElement.dataset.originalHeight = windowElement.style.height;
                    }
                    windowElement.classList.add('maximized');
                    // CSS handles the full-screen positioning via the .maximized class
                    console.log(`çª—å£ "${windowElement.dataset.windowId}" å·²æœ€å¤§åŒ–ã€‚`);
                }
                bringToFront(windowElement); // Bring to front after state change
                setActiveTaskbarIcon(windowElement.dataset.windowId); // Set its taskbar icon as active
            }

            /**
             * @function openWorkDetail
             * @description Opens a detailed work view window with a gallery.
             * @param {Object} work - The work object containing details like title, images, description, etc.
             * @returns {void}
             */
            function openWorkDetail(work) {
                // Initialize current image index for this work
                let currentImageIndex = 0;

                const { chineseTitle, englishTitle } = getWindowTitles('work-detail-' + work.id, work);

                const detailContent = `
                    <div class="work-detail-content">
                        <div class="gallery-main-image-container">
                            <img src="${work.images[currentImageIndex]}" alt="${work.title}" class="gallery-main-image">
                            ${work.images.length > 1 ? `
                                <button class="gallery-nav-button prev" title="ä¸Šä¸€å¼ å›¾ç‰‡">
                                    <span class="icon-placeholder" data-asset-key="icon_chevron_left"></span>
                                </button>
                                <button class="gallery-nav-button next" title="ä¸‹ä¸€å¼ å›¾ç‰‡">
                                    <span class="icon-placeholder" data-asset-key="icon_chevron_right"></span>
                                </button>
                            ` : ''}
                        </div>
                        <div class="gallery-thumbnails">
                            ${work.images.map((image, index) => `
                                <img src="${image}" alt="${work.title} ç¼©ç•¥å›¾" class="gallery-thumbnail ${index === currentImageIndex ? 'active' : ''}" data-index="${index}">
                            `).join('')}
                        </div>
                        <h3>${work.title}</h3>
                        <p>${work.description}</p>
                        <div class="flex flex-wrap gap-2">
                            ${work.tags.map(tag => `<span class="category-tag">${tag}</span>`).join('')}
                        </div>
                    </div>
                `;
                
                openWindow('work-detail-' + work.id, chineseTitle, englishTitle, detailContent, 'work-detail-' + work.id);
            }

            function openServiceCategoryDetail(category) {
                const { chineseTitle, englishTitle } = getWindowTitles('service-category-' + category.id, null, category);

                const detailContent = marked.parse(category.detailContent || '');

                openWindow('service-category-' + category.id, chineseTitle, englishTitle, detailContent, 'service-category-' + category.id, {}, true);
            }


            // Toggle Start Menu visibility
            if (startButton && startMenu) { // Ensure elements exist before adding listeners
                console.log('æ‰¾åˆ°â€œå¼€å§‹â€æŒ‰é’®å’Œâ€œå¼€å§‹èœå•â€å…ƒç´ ã€‚æ­£åœ¨é™„åŠ äº‹ä»¶ç›‘å¬å™¨ã€‚');
                startButton.addEventListener('click', (event) => {
                    event.stopPropagation(); // Prevent click from propagating to document
                    console.log('â€œå¼€å§‹â€æŒ‰é’®è¢«ç‚¹å‡»äº†ï¼'); // Debug: Confirm button click
                    startMenu.classList.toggle('hidden');
                    startMenu.classList.toggle('visible');
                    console.log(`å¼€å§‹èœå•å¯è§æ€§å·²åˆ‡æ¢ã€‚å½“å‰ç±»ï¼š${startMenu.classList}`);
                });

                // Hide Start Menu when clicking outside of it
                document.addEventListener('click', (event) => {
                    if (!startMenu.contains(event.target) && !startButton.contains(event.target)) {
                        if (startMenu.classList.contains('visible')) {
                            startMenu.classList.add('hidden');
                            startMenu.classList.remove('visible');
                            console.log('ç‚¹å‡»èœå•å¤–éƒ¨ï¼Œå¼€å§‹èœå•å·²éšè—ã€‚');
                        }
                    }
                });
            } else {
                console.error('é”™è¯¯ï¼šåœ¨DOMä¸­æœªæ‰¾åˆ°â€œå¼€å§‹â€æŒ‰é’®æˆ–â€œå¼€å§‹èœå•â€å…ƒç´ ã€‚è¯·æ£€æŸ¥IDå’ŒHTMLç»“æ„ã€‚');
            }

            // Handle Start Menu item clicks (for links)
            document.querySelectorAll('.start-menu-item, .start-menu-footer-button').forEach(item => {
                item.addEventListener('click', async (event) => { // Made async to await fetchContent
                    event.preventDefault(); // Prevent default link behavior

                    const section = item.dataset.section;
                    const { chineseTitle, englishTitle } = getWindowTitles(section);
                    
                    startMenu.classList.add('hidden'); // Hide menu after clicking an item
                    startMenu.classList.remove('visible'); // Ensure it's explicitly removed
                    console.log(`å¼€å§‹èœå•é¡¹â€œ${section}â€è¢«ç‚¹å‡»ã€‚èœå•å·²éšè—ã€‚`);

                    let content = '';
                    let data = null;
                    let isMarkdown = false;

                    // Show loading spinner while fetching data
                    content = `
                        <div class="flex flex-col items-center justify-center h-full">
                            <div class="loading-spinner"></div>
                            <p class="mt-4 text-lg">${LANG_CONTENT[currentLanguage]?.loadingMessage}</p>
                        </div>
                    `;
                    // Pass windowId to openWindow for correct targeting
                    const openedWindow = await openWindow(section, chineseTitle, englishTitle, content, section); 

                    try {
                        data = await fetchContent(section); // Fetch data
                    } catch (error) {
                        console.error(`${LANG_CONTENT[currentLanguage]?.errorLoadingContent} ${section}:`, error);
                        content = `<p class="text-xl text-red-400">${LANG_CONTENT[currentLanguage]?.errorLoadingContent} ${error.message || LANG_CONTENT[currentLanguage]?.unknownModule}</p>`;
                        // Update existing window with error message
                        if (openedWindow) {
                            openedWindow.querySelector('.os-window-content').innerHTML = content;
                            renderDynamicAssets(); // Re-render icons after content update
                        }
                        return;
                    }

                    // Re-render content based on fetched data
                    switch (section) {
                        case 'works':
                            content = `
                                <h2 class="text-xl font-bold mb-4">${LANG_CONTENT[currentLanguage]?.worksTitle}</h2>
                                <div class="works-grid">
                                    ${data?.map(work => `
                                        <div class="work-card" data-work-id="${work.id}">
                                            <img src="${work.thumbnail}" alt="${work.title}">
                                            <div class="work-card-title">${work.title}</div>
                                            <div class="work-card-category">${work.category}</div>
                                        </div>
                                    `).join('')}
                                </div>
                                <p class="mt-4 opacity-70 text-center">${LANG_CONTENT[currentLanguage]?.worksClickPrompt}</p>
                            `;
                            // Update content of existing window
                            if (openedWindow) {
                                openedWindow.querySelector('.os-window-content').innerHTML = content;
                                // Attach event listeners to newly created work cards
                                setTimeout(() => { // Use setTimeout to ensure elements are rendered
                                    openedWindow.querySelectorAll('.work-card').forEach(card => {
                                        card.addEventListener('click', () => {
                                            const workId = card.dataset.workId;
                                            const selectedWork = data?.find(w => w.id === workId); // Use fetched data
                                            if (selectedWork) {
                                                console.log(`ä½œå“å¡ç‰‡â€œ${workId}â€è¢«ç‚¹å‡»ã€‚æ­£åœ¨æ‰“å¼€è¯¦ç»†ä¿¡æ¯çª—å£ã€‚`);
                                                openWorkDetail(selectedWork);
                                            } else {
                                                console.warn(`æœªæ‰¾åˆ°IDä¸ºâ€œ${workId}â€çš„ä½œå“ã€‚`);
                                            }
                                        });
                                    });
                                }, 100); // Small delay
                                renderDynamicAssets(); // Re-render icons after content update
                            }
                            break;
                        case 'characters':
                            content = `
                                <h2 class="text-xl font-bold mb-4">${LANG_CONTENT[currentLanguage]?.charactersTitle}</h2>
                                <p>${LANG_CONTENT[currentLanguage]?.charactersDescription}</p>
                                <div class="grid grid-cols-2 gap-4 mt-4">
                                    ${data?.map(char => `
                                        <div class="flex flex-col items-center">
                                            <img src="${char.image}" alt="${char.name}" class="rounded-lg shadow-md mb-2">
                                            <p class="font-bold">${char.name}</p>
                                            <p class="text-sm opacity-80 text-center">${char.description}</p>
                                        </div>
                                    `).join('')}
                                </div>
                            `;
                            if (openedWindow) {
                                openedWindow.querySelector('.os-window-content').innerHTML = content;
                                renderDynamicAssets(); // Re-render icons after content update
                            }
                            break;
                        case 'about':
                            content = data?.content;
                            isMarkdown = true;
                            if (openedWindow) {
                                openedWindow.querySelector('.os-window-content').innerHTML = marked.parse(content || '');
                                renderDynamicAssets(); // Re-render icons after content update
                            }
                            break;
                        case 'services':
                            content = marked.parse(data?.description || '') + `
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mt-4">
                                    ${data?.categories.map(category => `
                                        <div class="service-category-card p-4 rounded-lg border border-primary-blue hover:bg-glass-bg cursor-pointer transition-all duration-200" data-category-id="${category.id}">
                                            <h3 class="font-bold text-lg text-light-blue">${category.name}</h3>
                                            <p class="text-sm opacity-80 mt-1">${category.shortDescription}</p>
                                        </div>
                                    `).join('')}
                                </div>
                            `;
                            if (openedWindow) {
                                openedWindow.querySelector('.os-window-content').innerHTML = content;
                                // Attach event listeners to newly created service category cards
                                setTimeout(() => {
                                    openedWindow.querySelectorAll('.service-category-card').forEach(card => {
                                        card.addEventListener('click', () => {
                                            const categoryId = card.dataset.categoryId;
                                            const selectedCategory = data?.categories.find(cat => cat.id === categoryId);
                                            if (selectedCategory) {
                                                console.log(`æœåŠ¡ç±»åˆ«â€œ${categoryId}â€è¢«ç‚¹å‡»ã€‚æ­£åœ¨æ‰“å¼€è¯¦ç»†ä¿¡æ¯çª—å£ã€‚`);
                                                openServiceCategoryDetail(selectedCategory);
                                            } else {
                                                console.warn(`æœªæ‰¾åˆ°IDä¸ºâ€œ${categoryId}â€çš„æœåŠ¡ç±»åˆ«ã€‚`);
                                            }
                                        });
                                    });
                                }, 100);
                                renderDynamicAssets(); // Re-render icons after content update
                            }
                            break;
                        case 'socials':
                            content = marked.parse(data?.description || '') + `
                                <div class="flex flex-wrap gap-4 mt-4">
                                    ${data?.links.map(link => `
                                        <a href="${link.url}" target="_blank" class="flex items-center space-x-2 hover:text-primary-blue transition-colors">
                                            <span class="icon-placeholder" data-asset-key="${link.iconAssetKey}"></span>
                                            <span>${link.name}</span>
                                        </a>
                                    `).join('')}
                                </div>
                            `;
                            if (openedWindow) {
                                openedWindow.querySelector('.os-window-content').innerHTML = content;
                                renderDynamicAssets(); // Re-render icons after content update
                            }
                            break;
                        case 'data-core': // New content rendering for Data Core
                            if (data && data.length > 0) {
                                content = `
                                    <h2 class="text-xl font-bold mb-4">${chineseTitle}</h2>
                                    <p>${LANG_CONTENT[currentLanguage]?.datacoreDescription}</p>
                                    <div class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4 mt-4">
                                        ${data.map(image => `
                                            <div class="flex flex-col items-center p-2 rounded-lg bg-white bg-opacity-5 hover:bg-opacity-10 transition-colors">
                                                <img src="${image.url}" alt="${image.alt}" class="w-full h-32 object-cover rounded-md mb-2 cursor-pointer" data-full-image="${image.fullSizeUrl || image.url}">
                                                <p class="text-sm text-center opacity-90">${image.alt}</p>
                                            </div>
                                        `).join('')}
                                    </div>
                                    <div id="image-modal" class="hidden fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 p-4">
                                        <div class="relative max-w-4xl max-h-full">
                                            <img id="modal-image" src="" alt="Full size image" class="max-w-full max-h-[80vh] object-contain rounded-lg shadow-xl">
                                            <button id="close-modal" class="absolute top-4 right-4 text-white text-3xl font-bold p-2 rounded-full bg-red-600 hover:bg-red-700 transition-colors">&times;</button>
                                        </div>
                                    </div>
                                `;
                            } else {
                                content = `
                                    <h2 class="text-xl font-bold mb-4">${chineseTitle}</h2>
                                    <p>${LANG_CONTENT[currentLanguage]?.datacoreEmpty}</p>
                                `;
                            }
                            if (openedWindow) {
                                openedWindow.querySelector('.os-window-content').innerHTML = content;
                                renderDynamicAssets(); // Re-render icons after content update
                                // Re-attach modal event listeners for the new content
                                setTimeout(() => {
                                    const imageModal = openedWindow.querySelector('#image-modal');
                                    const modalImage = openedWindow.querySelector('#modal-image');
                                    const closeModalButton = openedWindow.querySelector('#close-modal');

                                    openedWindow.querySelectorAll('.os-window-content img[data-full-image]').forEach(img => {
                                        img.addEventListener('click', (e) => {
                                            modalImage.src = e.target.dataset.fullImage;
                                            imageModal.classList.remove('hidden');
                                        });
                                    });

                                    if (closeModalButton) {
                                        closeModalButton.addEventListener('click', () => {
                                            imageModal.classList.add('hidden');
                                            modalImage.src = '';
                                        });
                                    }

                                    if (imageModal) {
                                        imageModal.addEventListener('click', (e) => {
                                            if (e.target === imageModal) {
                                                imageModal.classList.add('hidden');
                                                modalImage.src = '';
                                            }
                                        });
                                    }
                                }, 100);
                            }
                            break;
                        case 'settings':
                            content = marked.parse(data?.description || '') + `
                                <div class="flex flex-col gap-4 mt-4">
                                    ${data?.options.map(option => {
                                        const labelText = LANG_CONTENT[currentLanguage]?.settings?.options.find(opt => opt.id === option.id)?.label || option.label;
                                        if (option.type === 'toggle') {
                                            return `
                                                <div class="flex items-center justify-between p-3 rounded-lg bg-white bg-opacity-5 border border-white border-opacity-20">
                                                    <label for="${option.id}" class="text-lg">${labelText}</label>
                                                    <label class="toggle-switch">
                                                        <input type="checkbox" id="${option.id}" ${option.checked ? 'checked' : ''} ${option.disabled ? 'disabled' : ''}>
                                                        <span class="toggle-slider round"></span>
                                                    </label>
                                                </div>
                                            `;
                                        } else if (option.type === 'language-toggle') {
                                            return `
                                                <div class="flex items-center justify-between p-3 rounded-lg bg-white bg-opacity-5 border border-white border-opacity-20">
                                                    <span class="text-lg">${labelText}</span>
                                                    <label class="toggle-switch">
                                                        <input type="checkbox" id="${option.id}" ${currentLanguage === 'en' ? 'checked' : ''}>
                                                        <span class="toggle-slider round"></span>
                                                    </label>
                                                </div>
                                            `;
                                        } else if (option.type === 'button') {
                                            return `
                                                <button id="${option.id}" class="py-2 px-4 rounded-lg bg-primary-blue hover:bg-dark-blue transition-colors text-white font-bold ${option.disabled ? 'opacity-50 cursor-not-allowed' : ''}" ${option.disabled ? 'disabled' : ''}>
                                                    ${labelText}
                                                </button>
                                            `;
                                        }
                                        return '';
                                    }).join('')}
                                </div>
                            `;
                            if (openedWindow) {
                                openedWindow.querySelector('.os-window-content').innerHTML = content;
                                setTimeout(() => {
                                    const languageToggle = openedWindow.querySelector('#language-toggle');
                                    if (languageToggle) {
                                        languageToggle.addEventListener('change', (e) => {
                                            const newLang = e.target.checked ? 'en' : 'zh';
                                            if (newLang !== currentLanguage) {
                                                currentLanguage = newLang;
                                                console.log(`é€šè¿‡è®¾ç½®åˆ‡æ¢è¯­è¨€åˆ°: ${currentLanguage}`);
                                                updateUIForLanguage();
                                                // Re-render the settings window to reflect the new language
                                                const { chineseTitle: settingsZh, englishTitle: settingsEn } = getWindowTitles('settings');
                                                openWindow('settings', settingsZh, settingsEn, content, 'settings');
                                            }
                                        });
                                    }

                                    const desktopIconsToggle = openedWindow.querySelector('#desktop-icons-toggle');
                                    if (desktopIconsToggle) {
                                        desktopIconsToggle.addEventListener('change', (e) => {
                                            if (e.target.checked) {
                                                desktopIconsContainer.style.display = 'block';
                                                console.log('æ¡Œé¢å›¾æ ‡å·²å¯ç”¨ã€‚');
                                            } else {
                                                desktopIconsContainer.style.display = 'none';
                                                console.log('æ¡Œé¢å›¾æ ‡å·²ç¦ç”¨ã€‚');
                                            }
                                        });
                                    }
                                }, 100);
                                renderDynamicAssets(); // Re-render icons after content update
                            }
                            break;
                        case 'shutdown':
                            content = `
                                <h2 class="text-xl font-bold mb-4 text-red-400">${LANG_CONTENT[currentLanguage]?.shutdownMenuItem}...</h2>
                                <p>${LANG_CONTENT[currentLanguage]?.shutdownMessage}</p>
                                <p class="mt-4 opacity-70">${(LANG_CONTENT[currentLanguage]?.loadingMessage || 'åŠ è½½ä¸­...').replace('åŠ è½½ä¸­...', 'è¯·ç¨å€™...')}</p>
                            `;
                            if (openedWindow) {
                                openedWindow.querySelector('.os-window-content').innerHTML = content;
                                renderDynamicAssets(); // Re-render icons after content update
                            }
                            // For a real shutdown, you might redirect or show a final message
                            setTimeout(() => {
                                console.log(LANG_CONTENT[currentLanguage]?.shutdownMessage);
                                mainDesktopArea.innerHTML = `<div id="welcome-message" class="absolute inset-0 flex items-center justify-center pointer-events-none">
                                    <p class="text-3xl text-white opacity-70" id="welcome-message-text">${LANG_CONTENT[currentLanguage]?.shutdownMessage}</p>
                                </div>`;
                                // Clear all open windows from map and taskbar
                                openWindowsMap.clear();
                                taskbarIconsContainer.innerHTML = '';
                                renderDynamicAssets(); // Ensure icons in shutdown message are rendered if any
                            }, 2000);
                            break;
                    }
                });
            });


            // Handle Start Menu header click to open About Me
            if (startMenuHeader) {
                startMenuHeader.addEventListener('click', async (event) => {
                    event.preventDefault();
                    event.stopPropagation(); // Prevent start menu from closing immediately
                    startMenu.classList.add('hidden');
                    startMenu.classList.remove('visible');

                    const section = 'about';
                    // Directly get titles from LANG_CONTENT, as getWindowTitles is for generic sections
                    const aboutTitleForWindow = LANG_CONTENT[currentLanguage]?.aboutTitle;
                    const aboutContentForWindow = LANG_CONTENT[currentLanguage]?.aboutContent;

                    if (aboutContentForWindow) { // Check if content exists
                        openWindow('about', aboutTitleForWindow, LANG_CONTENT['en']?.aboutTitle, aboutContentForWindow, 'about', {}, true);
                    } else {
                        console.error(`é”™è¯¯ï¼šæœªæ‰¾åˆ°å…³äº MAZKO çš„å†…å®¹ï¼Œè¯­è¨€ ${currentLanguage} æˆ–æœªå®šä¹‰ã€‚`);
                        openWindow('about', 'é”™è¯¯', 'é”™è¯¯', `<p class="text-xl text-red-400">æ— æ³•åŠ è½½å…³äº MAZKO çš„å†…å®¹ã€‚</p>`, 'about', {}, false);
                    }
                });
            }


            // --- æ¡Œé¢å›¾æ ‡æ‹–åŠ¨é€»è¾‘ ---
            let isDraggingIcon = false;
            let currentDraggedIcon = null;
            let initialMouseX, initialMouseY;
            let initialIconX, initialIconY;

            if (desktopIconsContainer) {
                desktopIconsContainer.querySelectorAll('.desktop-icon').forEach(icon => {
                    // Set initial positions (from inline style)
                    icon.style.position = 'absolute'; // Ensure position is absolute for dragging

                    icon.addEventListener('mousedown', (e) => {
                        if (e.button !== 0) return; // Only allow left-click drag
                        isDraggingIcon = true;
                        currentDraggedIcon = icon;
                        initialMouseX = e.clientX;
                        initialMouseY = e.clientY;
                        initialIconX = icon.offsetLeft;
                        initialIconY = icon.offsetTop;

                        // Bring the icon to front while dragging (optional, but good UX)
                        currentDraggedIcon.style.zIndex = highestZIndex + 1; 

                        e.preventDefault(); // Prevent default browser drag behavior (e.g., ghost image)
                        console.log(`å¼€å§‹æ‹–åŠ¨å›¾æ ‡: ${icon.dataset.title}`);
                    });

                    // Handle icon click (separate from drag)
                    icon.addEventListener('click', (event) => {
                        // If it was a drag, don't open the window
                        if (currentDraggedIcon === icon && (Math.abs(event.clientX - initialMouseX) > 5 || Math.abs(event.clientY - initialMouseY) > 5)) {
                            console.log("å›¾æ ‡è¢«æ‹–åŠ¨ï¼Œé˜»æ­¢ç‚¹å‡»æ“ä½œã€‚");
                            return; 
                        }

                        const section = icon.dataset.section;
                        const { chineseTitle, englishTitle } = getWindowTitles(section);
                        
                        let existingWindow = document.querySelector(`.os-window[data-window-id="${section}"]`);
                        if (existingWindow) {
                            if (existingWindow.classList.contains('minimized')) {
                                restoreWindow(existingWindow);
                            } else {
                                bringToFront(existingWindow);
                            }
                            return;
                        }

                        // Simulate click on the corresponding start menu item or button to trigger window opening logic
                        // For mazko.exe, directly open the about window
                        if (section === 'about') {
                            console.log('æ¡Œé¢ MAZKO å›¾æ ‡è¢«ç‚¹å‡»ã€‚å½“å‰è¯­è¨€:', currentLanguage);
                            // Directly access aboutTitle and aboutContent from LANG_CONTENT
                            const aboutTitleForWindow = LANG_CONTENT[currentLanguage]?.aboutTitle;
                            const aboutContentForWindow = LANG_CONTENT[currentLanguage]?.aboutContent;

                            if (aboutContentForWindow) { // Check if content exists
                                openWindow('about', aboutTitleForWindow, LANG_CONTENT['en']?.aboutTitle, aboutContentForWindow, 'about', {}, true);
                            } else {
                                console.error(`é”™è¯¯ï¼šæœªæ‰¾åˆ°å…³äº MAZKO çš„å†…å®¹ï¼Œè¯­è¨€ ${currentLanguage} æˆ–æœªå®šä¹‰ã€‚`);
                                openWindow('about', 'é”™è¯¯', 'é”™è¯¯', `<p class="text-xl text-red-400">æ— æ³•åŠ è½½å…³äº MAZKO çš„å†…å®¹ã€‚</p>`, 'about', {}, false);
                            }
                        } else {
                            // Find the corresponding start menu item or button and click it
                            const startMenuItem = document.querySelector(`.start-menu-item[data-section="${section}"]`);
                            const startMenuFooterButton = document.querySelector(`.start-menu-footer-button[data-section="${section}"]`);
                            // Also check for the new data-core menu item
                            const datacoreMenuItem = document.querySelector(`.start-menu-item[data-section="data-core"]`);

                            if (startMenuItem) {
                                startMenuItem.click();
                            } else if (startMenuFooterButton) {
                                startMenuFooterButton.click();
                            } else if (datacoreMenuItem && section === 'data-core') { // Specific click for data-core if it's the target
                                datacoreMenuItem.click();
                            } else {
                                console.warn(`æœªæ‰¾åˆ°æ¨¡å—: ${section} çš„å¼€å§‹èœå•é¡¹æˆ–åº•éƒ¨æŒ‰é’®`);
                            }
                        }
                    });
                });
            }

            document.addEventListener('mousemove', (e) => {
                if (!isDraggingIcon || !currentDraggedIcon) return;

                const dx = e.clientX - initialMouseX;
                const dy = e.clientY - initialMouseY;

                let newX = initialIconX + dx;
                let newY = initialIconY + dy;

                // Boundary checks for dragging within mainDesktopArea
                const desktopRect = mainDesktopArea.getBoundingClientRect();
                const iconRect = currentDraggedIcon.getBoundingClientRect();

                // Calculate bounds relative to the desktop area's top-left corner
                const minX = 0;
                const minY = 0;
                const maxX = desktopRect.width - iconRect.width;
                const maxY = desktopRect.height - iconRect.height;

                newX = Math.max(minX, Math.min(newX, maxX));
                newY = Math.max(minY, Math.min(newY, maxY));

                currentDraggedIcon.style.left = `${newX}px`;
                currentDraggedIcon.style.top = `${newY}px`;
            });

            document.addEventListener('mouseup', () => {
                if (isDraggingIcon) {
                    isDraggingIcon = false;
                    if (currentDraggedIcon) {
                        // Reset z-index if desired, or keep it high if windows can overlap icons
                        currentDraggedIcon.style.zIndex = 2; 
                        console.log(`åœæ­¢æ‹–åŠ¨å›¾æ ‡: ${currentDraggedIcon.dataset.title}`);
                    }
                    currentDraggedIcon = null;
                }
            });

            // Handle window focus/blur to update title bar active state
            document.addEventListener('mousedown', (e) => {
                const clickedWindow = e.target.closest('.os-window');
                document.querySelectorAll('.os-window').forEach(win => {
                    const titleBar = win.querySelector('.os-window-title-bar');
                    if (titleBar) {
                        if (win === clickedWindow) {
                            titleBar.classList.remove('inactive');
                        } else {
                            titleBar.classList.add('inactive');
                        }
                    }
                });
            });

            // Initial UI update based on default language
            updateCursors(); // Set cursors initially
            updateUIForLanguage(); // Render text and initial assets
            renderDynamicAssets(); // Render all initial icons
            console.log('æ‰€æœ‰äº‹ä»¶ç›‘å¬å™¨å·²é™„åŠ ï¼Œè„šæœ¬åˆå§‹åŒ–å®Œæˆã€‚');
        });
    </script>
</body>
</html>
